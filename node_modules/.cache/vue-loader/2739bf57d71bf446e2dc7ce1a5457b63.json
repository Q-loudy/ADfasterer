{"remainingRequest":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\modals\\H2PModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\modals\\H2PModal.vue","mtime":1745241596819},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\babel-loader\\lib\\index.js","mtime":1745242219290},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745242214069},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1745242220175}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgTW9kYWxDbG9zZUJ1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvbW9kYWxzL01vZGFsQ2xvc2VCdXR0b24iOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJIMlBNb2RhbCIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBNb2RhbENsb3NlQnV0dG9uLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0YWJJZDogMCwNCiAgICAgIHNlYXJjaFZhbHVlOiAiIiwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGFjdGl2ZVRhYjogew0KICAgICAgZ2V0KCkgew0KICAgICAgICByZXR1cm4gR2FtZURhdGFiYXNlLmgycC50YWJzW3RoaXMudGFiSWRdOw0KICAgICAgfSwNCiAgICAgIHNldCh0YWIpIHsNCiAgICAgICAgdGhpcy50YWJJZCA9IHRhYi5pZDsNCiAgICAgIH0NCiAgICB9LA0KICAgIG1hdGNoaW5nVGFicygpIHsNCiAgICAgIHJldHVybiBHYW1lRGF0YWJhc2UuaDJwLnNlYXJjaCh0aGlzLnNlYXJjaFZhbHVlKS5maWx0ZXIoc2VhcmNoT2JqID0+IHNlYXJjaE9iai50YWIuaXNVbmxvY2tlZCgpKTsNCiAgICB9LA0KICAgIHRvcFRocmVzaG9sZCgpIHsNCiAgICAgIHJldHVybiBNYXRoLm1pbih0aGlzLm1hdGNoaW5nVGFic1tNYXRoLm1pbih0aGlzLm1hdGNoaW5nVGFicy5sZW5ndGggLSAxLCA0KV0ucmVsZXZhbmNlICsgMC4wMSwgMC41KTsNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgY29uc3QgdW5sb2NrZWRUYWJzID0gR2FtZURhdGFiYXNlLmgycC50YWJzLmZpbHRlcih0YWIgPT4gdGFiLmlzVW5sb2NrZWQoKSk7DQogICAgY29uc3QgdGFiID0gdGhpcy4kdmlld01vZGVsLnRhYjsNCiAgICBjb25zdCBzdWJ0YWIgPSBgJHt0YWJ9LyR7dGhpcy4kdmlld01vZGVsLnN1YnRhYn1gOw0KICAgIGNvbnN0IG1hdGNoZWRFbnRyeSA9IHVubG9ja2VkVGFicy5maW5kKGgycFRhYiA9PiBoMnBUYWIudGFiID09PSBzdWJ0YWIgfHwgaDJwVGFiLnRhYiA9PT0gdGFiKTsNCiAgICB0aGlzLmFjdGl2ZVRhYiA9IHVpLnZpZXcuaDJwRm9yY2VkVGFiIHx8IG1hdGNoZWRFbnRyeSB8fCB1bmxvY2tlZFRhYnNbMF07DQogICAgdWkudmlldy5oMnBGb3JjZWRUYWIgPSB1bmRlZmluZWQ7DQogICAgLy8gRm9yY2Utc2hvdyB0aGUgSDJQIGluZm8gaW5pdGFsbHkgcmVnYXJkbGVzcyBvZiB0YWIgd2hpbGUgdGhlIHRvb2x0aXAgZm9yIHRoZSBIMlAgYnV0dG9uIGlzIHN0aWxsIGFjdGl2ZQ0KICAgIGlmIChUdXRvcmlhbC5lbXBoYXNpemVIMlAoKSkgdGhpcy5hY3RpdmVUYWIgPSBHYW1lRGF0YWJhc2UuaDJwLnRhYnNbMF07DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy4kcmVmcy5pbnB1dC5zZWxlY3QoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHNldEFjdGl2ZVRhYih0YWIpIHsNCiAgICAgIHRoaXMuYWN0aXZlVGFiID0gdGFiOw0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImgycC1ib2R5Iikuc2Nyb2xsVG9wID0gMDsNCiAgICB9LA0KICAgIGlzRmlyc3RJcnJlbGV2YW50KGlkeCkgew0KICAgICAgY29uc3QgbWF0Y2hlcyA9IHRoaXMubWF0Y2hpbmdUYWJzOw0KICAgICAgY29uc3Qgc2VhcmNoT2JqVGhpcyA9IG1hdGNoZXNbaWR4XTsNCiAgICAgIGNvbnN0IHNlYXJjaE9iak90aGVyID0gbWF0Y2hlc1tpZHggLSAxXTsNCg0KICAgICAgcmV0dXJuIGlkeCA+IDAgJiYNCiAgICAgICAgc2VhcmNoT2JqVGhpcy5yZWxldmFuY2UgPj0gdGhpcy50b3BUaHJlc2hvbGQgJiYNCiAgICAgICAgc2VhcmNoT2JqT3RoZXIucmVsZXZhbmNlIDwgdGhpcy50b3BUaHJlc2hvbGQ7DQogICAgfQ0KICB9LA0KfTsNCg=="},{"version":3,"sources":["H2PModal.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"H2PModal.vue","sourceRoot":"src/components/modals","sourcesContent":["<script>\r\nimport ModalCloseButton from \"@/components/modals/ModalCloseButton\";\r\n\r\nexport default {\r\n  name: \"H2PModal\",\r\n  components: {\r\n    ModalCloseButton,\r\n  },\r\n  data() {\r\n    return {\r\n      tabId: 0,\r\n      searchValue: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    activeTab: {\r\n      get() {\r\n        return GameDatabase.h2p.tabs[this.tabId];\r\n      },\r\n      set(tab) {\r\n        this.tabId = tab.id;\r\n      }\r\n    },\r\n    matchingTabs() {\r\n      return GameDatabase.h2p.search(this.searchValue).filter(searchObj => searchObj.tab.isUnlocked());\r\n    },\r\n    topThreshold() {\r\n      return Math.min(this.matchingTabs[Math.min(this.matchingTabs.length - 1, 4)].relevance + 0.01, 0.5);\r\n    }\r\n  },\r\n  created() {\r\n    const unlockedTabs = GameDatabase.h2p.tabs.filter(tab => tab.isUnlocked());\r\n    const tab = this.$viewModel.tab;\r\n    const subtab = `${tab}/${this.$viewModel.subtab}`;\r\n    const matchedEntry = unlockedTabs.find(h2pTab => h2pTab.tab === subtab || h2pTab.tab === tab);\r\n    this.activeTab = ui.view.h2pForcedTab || matchedEntry || unlockedTabs[0];\r\n    ui.view.h2pForcedTab = undefined;\r\n    // Force-show the H2P info initally regardless of tab while the tooltip for the H2P button is still active\r\n    if (Tutorial.emphasizeH2P()) this.activeTab = GameDatabase.h2p.tabs[0];\r\n  },\r\n  mounted() {\r\n    this.$refs.input.select();\r\n  },\r\n  methods: {\r\n    setActiveTab(tab) {\r\n      this.activeTab = tab;\r\n      document.getElementById(\"h2p-body\").scrollTop = 0;\r\n    },\r\n    isFirstIrrelevant(idx) {\r\n      const matches = this.matchingTabs;\r\n      const searchObjThis = matches[idx];\r\n      const searchObjOther = matches[idx - 1];\r\n\r\n      return idx > 0 &&\r\n        searchObjThis.relevance >= this.topThreshold &&\r\n        searchObjOther.relevance < this.topThreshold;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"l-h2p-modal\">\r\n    <ModalCloseButton @click=\"emitClose\" />\r\n    <div class=\"l-h2p-header\">\r\n      <div class=\"c-h2p-title\">\r\n        How To Play\r\n      </div>\r\n    </div>\r\n    <div class=\"l-h2p-container\">\r\n      <div class=\"l-h2p-search-tab\">\r\n        <input\r\n          ref=\"input\"\r\n          v-model=\"searchValue\"\r\n          placeholder=\"Type to search...\"\r\n          class=\"c-h2p-search-bar\"\r\n          @keyup.esc=\"emitClose\"\r\n        >\r\n        <div class=\"l-h2p-tab-list\">\r\n          <div\r\n            v-for=\"(searchObj, searchObjId) in matchingTabs\"\r\n            :key=\"searchObj.tab.name\"\r\n            class=\"o-h2p-tab-button\"\r\n            :class=\"{\r\n              'o-h2p-tab-button--selected': searchObj.tab === activeTab,\r\n              'o-h2p-tab-button--relevant': searchObj.relevance < topThreshold,\r\n              'o-h2p-tab-button--first-irrelevant': isFirstIrrelevant(searchObjId)\r\n            }\"\r\n            @click=\"setActiveTab(searchObj.tab)\"\r\n          >\r\n            {{ searchObj.tab.alias }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"l-h2p-info\">\r\n        <div class=\"c-h2p-body--title\">\r\n          {{ activeTab.name }}\r\n        </div>\r\n        <div\r\n          id=\"h2p-body\"\r\n          class=\"l-h2p-body c-h2p-body\"\r\n          v-html=\"activeTab.info()\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.o-h2p-tab-button--relevant {\r\n  background-color: #df505055;\r\n}\r\n\r\n.o-h2p-tab-button--first-irrelevant {\r\n  border-top: 0.1rem solid black;\r\n  margin-top: 0.8rem;\r\n}\r\n\r\n.s-base--dark .o-h2p-tab-button--first-irrelevant {\r\n  border-top-color: white;\r\n}\r\n\r\n.t-s12 .o-h2p-tab-button--first-irrelevant {\r\n  border-top-color: black;\r\n}\r\n</style>\r\n"]}]}