{"remainingRequest":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\celestial-navigation\\NodeOverlay.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\celestial-navigation\\NodeOverlay.vue","mtime":1745241597136},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\babel-loader\\lib\\index.js","mtime":1745242219290},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745242214069},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1745242220175}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBzdmdSaW5nUGF0aCB9IGZyb20gIi4vc3ZnLXJpbmctcGF0aCI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIk5vZGVPdmVybGF5IiwNCiAgcHJvcHM6IHsNCiAgICBjb21wbGV0ZTogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9LA0KICAgIHBvc2l0aW9uOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogdHJ1ZQ0KICAgIH0sDQogICAgbGVnZW5kOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiB1bmRlZmluZWQNCiAgICB9LA0KICAgIHJpbmc6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICBmaWxsOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiB1bmRlZmluZWQNCiAgICB9LA0KICAgIGFsd2F5c1Nob3dMZWdlbmQ6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiBmYWxzZQ0KICAgIH0sDQogICAgZm9yY2VMZWdlbmQ6IHsNCiAgICAgIHR5cGU6IEZ1bmN0aW9uLA0KICAgICAgcmVxdWlyZWQ6IGZhbHNlLA0KICAgICAgZGVmYXVsdDogdW5kZWZpbmVkDQogICAgfSwNCiAgICBjbGlja0FjdGlvbjogew0KICAgICAgdHlwZTogRnVuY3Rpb24sDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiB1bmRlZmluZWQNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxlZ2VuZExpbmVzOiBbXSwNCiAgICAgIGhvdmVyT3ZlcnJpZGU6IGZhbHNlLA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgTEVHRU5EX0ZPTlRfU0laRTogKCkgPT4gMTYsDQogICAgYmFzZVRyYW5zZm9ybSgpIHsNCiAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmFzVHJhbnNsYXRlKCk7DQogICAgfSwNCiAgICBwYXRoRGF0YSgpIHsNCiAgICAgIHJldHVybiBzdmdSaW5nUGF0aCh0aGlzLnJpbmcpOw0KICAgIH0sDQogICAgaGFzTGVnZW5kKCkgew0KICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5sZWdlbmQpICYmICghdGhpcy5sZWdlbmQuaGlkZVdoZW5Db21wbGV0ZWQgfHwgdGhpcy5jb21wbGV0ZSA8IDEpOw0KICAgIH0sDQogICAgbGVnZW5kQXJyb3dQb2ludHMoKSB7DQogICAgICBjb25zdCBkaXIgPSBWZWN0b3IudW5pdEZyb21EZWdyZWVzKHRoaXMubGVnZW5kLmFuZ2xlKTsNCiAgICAgIGNvbnN0IHB0cyA9IFtkaXIudGltZXModGhpcy5yaW5nLnJNYWpvciArIDIpXTsNCiAgICAgIHB0cy5wdXNoKHB0c1swXS5wbHVzKGRpci50aW1lcyh0aGlzLmxlZ2VuZC5kaWFnb25hbCkpKTsNCiAgICAgIHB0cy5wdXNoKHB0c1sxXS5wbHVzKFZlY3Rvci5ob3Jpeih0aGlzLmxlZ2VuZC5ob3Jpem9udGFsICogTWF0aC5zaWduKGRpci54KSkpKTsNCiAgICAgIHJldHVybiBwdHM7DQogICAgfSwNCiAgICBsZWdlbmRBcnJvd1BvaW50U3RyaW5nKCkgew0KICAgICAgcmV0dXJuIHRoaXMubGVnZW5kQXJyb3dQb2ludHMuam9pbigiICIpOw0KICAgIH0sDQogICAgbGVnZW5kVHJhbnNmb3JtKCkgew0KICAgICAgY29uc3QgcHRzID0gdGhpcy5sZWdlbmRBcnJvd1BvaW50czsNCiAgICAgIGNvbnN0IHhEaXIgPSBNYXRoLnNpZ24ocHRzWzJdLnggLSBwdHNbMF0ueCk7DQogICAgICByZXR1cm4gcHRzWzJdLnBsdXMoVmVjdG9yLmhvcml6KHhEaXIgKiA0KSkuYXNUcmFuc2xhdGUoKTsNCiAgICB9LA0KICAgIGxlZ2VuZFRleHRBbmNob3IoKSB7DQogICAgICBjb25zdCBhbmdsZSA9ICh0aGlzLmxlZ2VuZC5hbmdsZSArIDM2MCkgJSAzNjA7DQogICAgICByZXR1cm4gYW5nbGUgPiA5MCAmJiBhbmdsZSA8IDI3MCA/ICJlbmQiIDogInN0YXJ0IjsNCiAgICB9LA0KICAgIG5vZGVDbGFzcygpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgICJvLWNlbGVzdGlhbC1uYXZfX2ZvcmNlLWhvdmVyIjogdGhpcy5ob3Zlck92ZXJyaWRlLA0KICAgICAgICAiby1jZWxlc3RpYWwtbmF2X19jbGlja2FibGUiOiB0aGlzLmNsaWNrQWN0aW9uICE9PSB1bmRlZmluZWQNCiAgICAgIH07DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHVwZGF0ZSgpIHsNCiAgICAgIHRoaXMubGVnZW5kTGluZXMgPSB0aGlzLmdldExpbmVzKCk7DQogICAgICB0aGlzLmhvdmVyT3ZlcnJpZGUgPSB0aGlzLmFsd2F5c1Nob3dMZWdlbmQgfHwgKHRoaXMuZm9yY2VMZWdlbmQgJiYgdGhpcy5mb3JjZUxlZ2VuZCgpKTsNCiAgICB9LA0KICAgIGxlZ2VuZExpbmVZKGlkeCkgew0KICAgICAgY29uc3Qgc3BhY2luZyA9IE1hdGgucm91bmQodGhpcy5MRUdFTkRfRk9OVF9TSVpFICogMS4yNSAvIDIpOw0KICAgICAgY29uc3QgbnVtID0gdGhpcy5sZWdlbmRMaW5lcy5sZW5ndGg7DQogICAgICByZXR1cm4gKDIgKiBpZHggLSAobnVtIC0gMSkpICogc3BhY2luZzsNCiAgICB9LA0KICAgIGdldExpbmVzKCkgew0KICAgICAgaWYgKCF0aGlzLmxlZ2VuZCkgcmV0dXJuIG51bGw7DQogICAgICBjb25zdCBkYXRhID0gdHlwZW9mICh0aGlzLmxlZ2VuZC50ZXh0KSA9PT0gImZ1bmN0aW9uIg0KICAgICAgICA/IHRoaXMubGVnZW5kLnRleHQodGhpcy5jb21wbGV0ZSkgOiB0aGlzLmxlZ2VuZC50ZXh0Ow0KICAgICAgcmV0dXJuIHR5cGVvZiAoZGF0YSkgPT09ICJzdHJpbmciID8gW2RhdGFdIDogZGF0YTsNCiAgICB9LA0KICB9DQp9Ow0K"},{"version":3,"sources":["NodeOverlay.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NodeOverlay.vue","sourceRoot":"src/components/tabs/celestial-navigation","sourcesContent":["<script>\r\nimport { svgRingPath } from \"./svg-ring-path\";\r\n\r\nexport default {\r\n  name: \"NodeOverlay\",\r\n  props: {\r\n    complete: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    position: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    legend: {\r\n      type: Object,\r\n      required: false,\r\n      default: undefined\r\n    },\r\n    ring: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    fill: {\r\n      type: String,\r\n      required: false,\r\n      default: undefined\r\n    },\r\n    alwaysShowLegend: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false\r\n    },\r\n    forceLegend: {\r\n      type: Function,\r\n      required: false,\r\n      default: undefined\r\n    },\r\n    clickAction: {\r\n      type: Function,\r\n      required: false,\r\n      default: undefined\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      legendLines: [],\r\n      hoverOverride: false,\r\n    };\r\n  },\r\n  computed: {\r\n    LEGEND_FONT_SIZE: () => 16,\r\n    baseTransform() {\r\n      return this.position.asTranslate();\r\n    },\r\n    pathData() {\r\n      return svgRingPath(this.ring);\r\n    },\r\n    hasLegend() {\r\n      return Boolean(this.legend) && (!this.legend.hideWhenCompleted || this.complete < 1);\r\n    },\r\n    legendArrowPoints() {\r\n      const dir = Vector.unitFromDegrees(this.legend.angle);\r\n      const pts = [dir.times(this.ring.rMajor + 2)];\r\n      pts.push(pts[0].plus(dir.times(this.legend.diagonal)));\r\n      pts.push(pts[1].plus(Vector.horiz(this.legend.horizontal * Math.sign(dir.x))));\r\n      return pts;\r\n    },\r\n    legendArrowPointString() {\r\n      return this.legendArrowPoints.join(\" \");\r\n    },\r\n    legendTransform() {\r\n      const pts = this.legendArrowPoints;\r\n      const xDir = Math.sign(pts[2].x - pts[0].x);\r\n      return pts[2].plus(Vector.horiz(xDir * 4)).asTranslate();\r\n    },\r\n    legendTextAnchor() {\r\n      const angle = (this.legend.angle + 360) % 360;\r\n      return angle > 90 && angle < 270 ? \"end\" : \"start\";\r\n    },\r\n    nodeClass() {\r\n      return {\r\n        \"o-celestial-nav__force-hover\": this.hoverOverride,\r\n        \"o-celestial-nav__clickable\": this.clickAction !== undefined\r\n      };\r\n    },\r\n  },\r\n  methods: {\r\n    update() {\r\n      this.legendLines = this.getLines();\r\n      this.hoverOverride = this.alwaysShowLegend || (this.forceLegend && this.forceLegend());\r\n    },\r\n    legendLineY(idx) {\r\n      const spacing = Math.round(this.LEGEND_FONT_SIZE * 1.25 / 2);\r\n      const num = this.legendLines.length;\r\n      return (2 * idx - (num - 1)) * spacing;\r\n    },\r\n    getLines() {\r\n      if (!this.legend) return null;\r\n      const data = typeof (this.legend.text) === \"function\"\r\n        ? this.legend.text(this.complete) : this.legend.text;\r\n      return typeof (data) === \"string\" ? [data] : data;\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <g\r\n    class=\"o-celestial-nav__hoverable\"\r\n    :class=\"nodeClass\"\r\n    :transform=\"baseTransform\"\r\n    v-on=\"clickAction ? { click: clickAction } : {}\"\r\n  >\r\n    <path\r\n      :d=\"pathData\"\r\n      class=\"o-celestial-nav__node-overlay\"\r\n    />\r\n    <g\r\n      v-if=\"hasLegend\"\r\n      class=\"tooltiptext\"\r\n    >\r\n      <polyline\r\n        :points=\"legendArrowPointString\"\r\n        class=\"o-celestial-nav__legend-arrow\"\r\n      />\r\n      <!-- The ring radii are adjusted slightly to offset the stroke outside the node -->\r\n      <path\r\n        :d=\"pathData\"\r\n        class=\"o-celestial-nav__legend-outline\"\r\n      />\r\n      <g :transform=\"legendTransform\">\r\n        <text\r\n          class=\"o-celestial-nav__legend-text\"\r\n          :text-anchor=\"legendTextAnchor\"\r\n          dominant-baseline=\"middle\"\r\n          :font-size=\"LEGEND_FONT_SIZE\"\r\n        >\r\n          <tspan\r\n            v-for=\"(line, idx) in legendLines\"\r\n            :key=\"idx\"\r\n            x=\"0\"\r\n            :y=\"legendLineY(idx)\"\r\n          >\r\n            {{ line }}\r\n          </tspan>\r\n        </text>\r\n      </g>\r\n    </g>\r\n  </g>\r\n</template>\r\n\r\n<style scoped>\r\n.o-celestial-nav__clickable {\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"]}]}