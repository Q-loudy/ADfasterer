{"remainingRequest":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\modals\\cloud\\CloudSaveConflictModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\modals\\cloud\\CloudSaveConflictModal.vue","mtime":1745241596906},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\babel-loader\\lib\\index.js","mtime":1745242219290},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745242214069},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1745242220175}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgTW9kYWxXcmFwcGVyQ2hvaWNlIGZyb20gIkAvY29tcG9uZW50cy9tb2RhbHMvTW9kYWxXcmFwcGVyQ2hvaWNlIjsNCmltcG9ydCBTYXZlSW5mb0VudHJ5IGZyb20gIkAvY29tcG9uZW50cy9tb2RhbHMvY2xvdWQvU2F2ZUluZm9FbnRyeSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkNsb3VkU2F2ZUNvbmZsaWN0TW9kYWwiLA0KICBjb21wb25lbnRzOiB7DQogICAgTW9kYWxXcmFwcGVyQ2hvaWNlLA0KICAgIFNhdmVJbmZvRW50cnksDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgY29uZmxpY3QoKSB7DQogICAgICByZXR1cm4gdGhpcy4kdmlld01vZGVsLm1vZGFsLmNsb3VkQ29uZmxpY3Q7DQogICAgfSwNCiAgICBvbGRlcigpIHsNCiAgICAgIHJldHVybiB0aGlzLmNvbmZsaWN0LnNhdmVDb21wYXJpc29uLm9sZGVyID09PSAtMTsNCiAgICB9LA0KICAgIGZhcnRoZXIoKSB7DQogICAgICByZXR1cm4gdGhpcy5jb25mbGljdC5zYXZlQ29tcGFyaXNvbi5mYXJ0aGVyID09PSAtMTsNCiAgICB9LA0KICAgIGhhc0RpZmZlcmVudE5hbWUoKSB7DQogICAgICByZXR1cm4gdGhpcy5jb25mbGljdC5jbG91ZC5zYXZlTmFtZSAhPT0gdGhpcy5jb25mbGljdC5sb2NhbC5zYXZlTmFtZTsNCiAgICB9LA0KICAgIHdyb25nSGFzaCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmNvbmZsaWN0LnNhdmVDb21wYXJpc29uLmhhc2hNaXNtYXRjaDsNCiAgICB9LA0KICAgIHN1Z2dlc3Rpb25UZXh0KCkgew0KICAgICAgY29uc3QgZ29vZFN0eWxlID0gYHN0eWxlPSJjb2xvcjogdmFyKC0tY29sb3ItZ29vZCkiYDsNCiAgICAgIGNvbnN0IGJhZFN0eWxlID0gYHN0eWxlPSJjb2xvcjogdmFyKC0tY29sb3ItaW5maW5pdHkpImA7DQoNCiAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gWyJTYXZpbmcgdG8gdGhlIENsb3VkICJdOw0KICAgICAgY29uc3QgY2xvdWRQcm9nID0gdGhpcy5jb25mbGljdC5jbG91ZC5jb21wb3NpdGVQcm9ncmVzcywgbG9jYWxQcm9nID0gdGhpcy5jb25mbGljdC5sb2NhbC5jb21wb3NpdGVQcm9ncmVzczsNCiAgICAgIGNvbnN0IHdhcm5PdmVyd3JpdGUgPSB0aGlzLmZhcnRoZXIgJiYgTWF0aC5hYnMoY2xvdWRQcm9nIC0gbG9jYWxQcm9nKSA+IDAuMTU7DQogICAgICBzdWdnZXN0aW9ucy5wdXNoKHdhcm5PdmVyd3JpdGUNCiAgICAgICAgPyBgPGIgJHtiYWRTdHlsZX0+d291bGQgb3ZlcndyaXRlIGEgc2F2ZSB3aXRoIHNpZ25pZmljYW50bHkgbW9yZSBwcm9ncmVzczwvYj5gDQogICAgICAgIDogYDxiICR7Z29vZFN0eWxlfT5pcyBwcm9iYWJseSBzYWZlPC9iPmApOw0KICAgICAgaWYgKHRoaXMuaGFzRGlmZmVyZW50TmFtZSB8fCB0aGlzLndyb25nSGFzaCkgew0KICAgICAgICBzdWdnZXN0aW9ucy5wdXNoKGAgJHt3YXJuT3ZlcndyaXRlID8gIkFkZGl0aW9uYWxseSIgOiAiSG93ZXZlciJ9LCB5b3UgbWF5IGJlIG92ZXJ3cml0aW5nIGEgDQogICAgICAgICAgPGIgJHtiYWRTdHlsZX0+c2F2ZSBmcm9tIGEgZGlmZmVyZW50IGRldmljZTwvYj4uYCk7DQogICAgICB9DQogICAgICBpZiAod2Fybk92ZXJ3cml0ZSB8fCB0aGlzLmhhc0RpZmZlcmVudE5hbWUgfHwgdGhpcy53cm9uZ0hhc2gpIHsNCiAgICAgICAgc3VnZ2VzdGlvbnMucHVzaChgPGJyPjxiICR7YmFkU3R5bGV9PkFyZSB5b3Ugc3VyZSB5b3Ugd2lzaCB0byBvdmVyd3JpdGUgdGhlIENsb3VkIHNhdmU/PC9iPmApOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHN1Z2dlc3Rpb25zLmpvaW4oIiIpOw0KICAgIH0sDQogICAgbm9PdmVyd3JpdGVJbmZvKCkgew0KICAgICAgcmV0dXJuIGBTYXZlIGNvbmZsaWN0cyB3aWxsIGtlZXAgb2NjdXJyaW5nIHdpdGhvdXQgb3ZlcndyaXRpbmcuYDsNCiAgICB9LA0KICAgIG92ZXJ3cml0ZUluZm8oKSB7DQogICAgICByZXR1cm4gYElmIGFub3RoZXIgZGV2aWNlIGlzIGFsc28gc2F2aW5nIHRvIHRoZSBjbG91ZCBvbiB0aGlzIEdvb2dsZSBBY2NvdW50IGF0IHRoZSBzYW1lIHRpbWUsDQogICAgICAgIHRoaXMgbW9kYWwgbWF5IGFwcGVhciByZXBlYXRlZGx5LmA7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZG9Ob3RTYXZlKCkgew0KICAgICAgcGxheWVyLm9wdGlvbnMuY2xvdWRFbmFibGVkID0gZmFsc2U7DQogICAgICBFdmVudEh1Yi5kaXNwYXRjaChHQU1FX0VWRU5ULkNMT1NFX01PREFMKTsNCiAgICB9LA0KICAgIG92ZXJ3cml0ZSgpIHsNCiAgICAgIHRoaXMuY29uZmxpY3Qub25BY2NlcHQ/LigpOw0KICAgICAgRXZlbnRIdWIuZGlzcGF0Y2goR0FNRV9FVkVOVC5DTE9TRV9NT0RBTCk7DQogICAgfQ0KICB9LA0KfTsNCg=="},{"version":3,"sources":["CloudSaveConflictModal.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CloudSaveConflictModal.vue","sourceRoot":"src/components/modals/cloud","sourcesContent":["<script>\r\nimport ModalWrapperChoice from \"@/components/modals/ModalWrapperChoice\";\r\nimport SaveInfoEntry from \"@/components/modals/cloud/SaveInfoEntry\";\r\n\r\nexport default {\r\n  name: \"CloudSaveConflictModal\",\r\n  components: {\r\n    ModalWrapperChoice,\r\n    SaveInfoEntry,\r\n  },\r\n  computed: {\r\n    conflict() {\r\n      return this.$viewModel.modal.cloudConflict;\r\n    },\r\n    older() {\r\n      return this.conflict.saveComparison.older === -1;\r\n    },\r\n    farther() {\r\n      return this.conflict.saveComparison.farther === -1;\r\n    },\r\n    hasDifferentName() {\r\n      return this.conflict.cloud.saveName !== this.conflict.local.saveName;\r\n    },\r\n    wrongHash() {\r\n      return this.conflict.saveComparison.hashMismatch;\r\n    },\r\n    suggestionText() {\r\n      const goodStyle = `style=\"color: var(--color-good)\"`;\r\n      const badStyle = `style=\"color: var(--color-infinity)\"`;\r\n\r\n      const suggestions = [\"Saving to the Cloud \"];\r\n      const cloudProg = this.conflict.cloud.compositeProgress, localProg = this.conflict.local.compositeProgress;\r\n      const warnOverwrite = this.farther && Math.abs(cloudProg - localProg) > 0.15;\r\n      suggestions.push(warnOverwrite\r\n        ? `<b ${badStyle}>would overwrite a save with significantly more progress</b>`\r\n        : `<b ${goodStyle}>is probably safe</b>`);\r\n      if (this.hasDifferentName || this.wrongHash) {\r\n        suggestions.push(` ${warnOverwrite ? \"Additionally\" : \"However\"}, you may be overwriting a \r\n          <b ${badStyle}>save from a different device</b>.`);\r\n      }\r\n      if (warnOverwrite || this.hasDifferentName || this.wrongHash) {\r\n        suggestions.push(`<br><b ${badStyle}>Are you sure you wish to overwrite the Cloud save?</b>`);\r\n      }\r\n      return suggestions.join(\"\");\r\n    },\r\n    noOverwriteInfo() {\r\n      return `Save conflicts will keep occurring without overwriting.`;\r\n    },\r\n    overwriteInfo() {\r\n      return `If another device is also saving to the cloud on this Google Account at the same time,\r\n        this modal may appear repeatedly.`;\r\n    }\r\n  },\r\n  methods: {\r\n    doNotSave() {\r\n      player.options.cloudEnabled = false;\r\n      EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);\r\n    },\r\n    overwrite() {\r\n      this.conflict.onAccept?.();\r\n      EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <ModalWrapperChoice\r\n    class=\"c-modal-options__large\"\r\n    :cancel-class=\"'c-modal-message__okay-btn'\"\r\n    :confirm-class=\"'c-modal-message__okay-btn c-modal__confirm-btn'\"\r\n    :cancel-fn=\"overwrite\"\r\n    @confirm=\"doNotSave()\"\r\n  >\r\n    <template #header>\r\n      Save Game to Cloud\r\n    </template>\r\n    <span v-if=\"wrongHash\">\r\n      Your Cloud Save has been <b>changed by a different device</b> since you last saved to the Cloud this session.\r\n    </span>\r\n    <span v-else-if=\"hasDifferentName\">\r\n      Your Local and Cloud Saves have <b>different names</b>.\r\n    </span>\r\n    <span v-else-if=\"older\">\r\n      Saving to the Cloud would <b>overwrite an older save</b>.\r\n    </span>\r\n    <span v-else-if=\"farther\">\r\n      Saving to the Cloud would <b>overwrite a save with more progress</b>.\r\n    </span>\r\n    <span v-else>\r\n      Your Local Save and Cloud Save <b>appear to have similar amounts of progress</b>.\r\n    </span>\r\n    <br>\r\n    <SaveInfoEntry\r\n      :save-data=\"conflict.local\"\r\n      :other-data=\"conflict.cloud\"\r\n      :save-id=\"conflict.saveId\"\r\n      :show-name=\"hasDifferentName\"\r\n      save-type=\"Local Save\"\r\n    />\r\n    <SaveInfoEntry\r\n      :save-data=\"conflict.cloud\"\r\n      :other-data=\"conflict.local\"\r\n      :save-id=\"conflict.saveId\"\r\n      :show-name=\"hasDifferentName\"\r\n      save-type=\"Cloud Save\"\r\n    />\r\n    <span v-html=\"suggestionText\" />\r\n    <br>\r\n    <span>\r\n      Not overwriting will turn off Cloud saving and you will need to manually turn it back on again\r\n      if you want to use it.\r\n      <span :ach-tooltip=\"noOverwriteInfo\">\r\n        <i class=\"fas fa-question-circle\" />\r\n      </span>\r\n    </span>\r\n    <span>\r\n      Overwriting will force a save to the Cloud in this particular instance; in most\r\n      cases this should prevent this modal from reappearing afterwards.\r\n      <span :ach-tooltip=\"overwriteInfo\">\r\n        <i class=\"fas fa-question-circle\" />\r\n      </span>\r\n    </span>\r\n    <template #cancel-text>\r\n      Overwrite Cloud Save\r\n    </template>\r\n    <template #confirm-text>\r\n      Do not overwrite\r\n    </template>\r\n  </ModalWrapperChoice>\r\n</template>\r\n"]}]}