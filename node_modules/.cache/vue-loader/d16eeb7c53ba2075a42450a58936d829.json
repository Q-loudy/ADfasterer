{"remainingRequest":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\automator\\AutomatorScriptDropdownEntryList.vue?vue&type=style&index=0&id=1c1d19a8&scoped=true&lang=css&","dependencies":[{"path":"C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\automator\\AutomatorScriptDropdownEntryList.vue","mtime":1745241597090},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\css-loader\\dist\\cjs.js","mtime":1745242216572},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\loaders\\stylePostLoader.js","mtime":1745242222796},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\postcss-loader\\dist\\cjs.js","mtime":1745242214022},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745242214069},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1745242220175}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoubC1zY3JpcHQtb3B0aW9uIHsNCiAgYm9yZGVyLXJhZGl1czogMDsNCiAgYm9yZGVyLWJvdHRvbTogMDsNCn0NCg0KLmMtc2NyaXB0LW9wdGlvbi1ob3Zlci1lZmZlY3Q6aG92ZXIgew0KICBmaWx0ZXI6IGJyaWdodG5lc3MoNzAlKTsNCiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYXV0b21hdG9yLWFjdGl2ZS1saW5lLWJhY2tncm91bmQpOw0KfQ0KDQoubC1zY3JpcHQtb3B0aW9uOmZpcnN0LWNoaWxkIHsNCiAgYm9yZGVyLXJhZGl1czogdmFyKC0tdmFyLWJvcmRlci1yYWRpdXMsIDAuNXJlbSkgdmFyKC0tdmFyLWJvcmRlci1yYWRpdXMsIDAuNXJlbSkgMCAwOw0KfQ0KDQoubC1jcmVhdGUtc2NyaXB0IHsNCiAgYm9yZGVyLXJhZGl1czogMCAwIHZhcigtLXZhci1ib3JkZXItcmFkaXVzLCAwLjVyZW0pIHZhcigtLXZhci1ib3JkZXItcmFkaXVzLCAwLjVyZW0pOw0KfQ0KDQoubC1hY3RpdmUtc2NyaXB0IHsNCiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYXV0b21hdG9yLWNvbnRyb2xzLWFjdGl2ZSk7DQp9DQoNCi5sLXNlbGVjdGVkLXNjcmlwdCB7DQogIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWF1dG9tYXRvci1hY3RpdmUtbGluZS1vdXRsaW5lKTsNCn0NCg0KLmwtbWF4LXNjcmlwdHMgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1hdXRvbWF0b3ItZXJyb3ItYmFja2dyb3VuZCk7DQogIGN1cnNvcjogYXV0bzsNCn0NCg=="},{"version":3,"sources":["AutomatorScriptDropdownEntryList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"AutomatorScriptDropdownEntryList.vue","sourceRoot":"src/components/tabs/automator","sourcesContent":["<script>\r\nexport default {\r\n  name: \"AutomatorScriptDropdownEntryList\",\r\n  data() {\r\n    return {\r\n      isBlock: false,\r\n      currentScriptID: 0,\r\n      runningScriptID: 0,\r\n      isRunning: false,\r\n      isPaused: false,\r\n      canMakeNewScript: false,\r\n    };\r\n  },\r\n  computed: {\r\n    scripts() {\r\n      return Object.values(player.reality.automator.scripts).map(script => ({\r\n        id: script.id,\r\n        name: script.name,\r\n      }));\r\n    },\r\n    currentScriptContent() {\r\n      return player.reality.automator.scripts[this.currentScriptID].content;\r\n    },\r\n    currentScript() {\r\n      return CodeMirror.Doc(this.currentScriptContent, \"automato\").getValue();\r\n    },\r\n    scriptCount() {\r\n      return Object.keys(player.reality.automator.scripts).length;\r\n    },\r\n    maxScriptCount() {\r\n      return AutomatorData.MAX_ALLOWED_SCRIPT_COUNT;\r\n    },\r\n  },\r\n  created() {\r\n    this.currentScriptID = player.reality.automator.state.editorScript;\r\n    // Deleted script names potentially persist within the vue component unless we clear them\r\n    this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED, () => {\r\n      this.$recompute(\"scripts\");\r\n    });\r\n  },\r\n  methods: {\r\n    update() {\r\n      this.isBlock = player.reality.automator.type === AUTOMATOR_TYPE.BLOCK;\r\n      this.runningScriptID = AutomatorBackend.state.topLevelScript;\r\n      this.isRunning = AutomatorBackend.isRunning;\r\n      this.isPaused = AutomatorBackend.isOn && !AutomatorBackend.isRunning;\r\n      this.canMakeNewScript = this.scriptCount < this.maxScriptCount;\r\n    },\r\n    changeScriptID(newID) {\r\n      this.currentScriptID = newID;\r\n      player.reality.automator.state.editorScript = newID;\r\n      this.updateCurrentScriptID();\r\n    },\r\n    createNewScript() {\r\n      const newScript = AutomatorBackend.newScript();\r\n      player.reality.automator.state.editorScript = newScript.id;\r\n      this.updateCurrentScriptID();\r\n      this.$parent.$parent.rename();\r\n    },\r\n    updateCurrentScriptID() {\r\n      const storedScripts = player.reality.automator.scripts;\r\n      this.currentScriptID = player.reality.automator.state.editorScript;\r\n      // This shouldn't happen if things are loaded in the right order, but might as well be sure.\r\n      if (storedScripts[this.currentScriptID] === undefined) {\r\n        this.currentScriptID = Number(Object.keys(storedScripts)[0]);\r\n        player.reality.automator.state.editorScript = this.currentScriptID;\r\n      }\r\n      if (this.isBlock) this.$nextTick(() => BlockAutomator.updateEditor(this.currentScript));\r\n      this.$parent.openRequest = false;\r\n      AutomatorData.clearUndoData();\r\n    },\r\n    dropdownLabel(script) {\r\n      const labels = [];\r\n      if (script.id === this.currentScriptID) labels.push(\"viewing\");\r\n      if (script.id === this.runningScriptID) {\r\n        if (this.isRunning) labels.push(\"running\");\r\n        else if (this.isPaused) labels.push(\"paused\");\r\n      }\r\n      const status = labels.length ? `(${labels.join(\", \").capitalize()})` : \"\";\r\n      return `${script.name} ${status}`;\r\n    },\r\n    labelClassObject(id) {\r\n      const highlightRunning = this.isRunning || this.isPaused;\r\n      return {\r\n        \"c-automator-docs-script-select\": true,\r\n        \"l-active-script\": id === this.runningScriptID && highlightRunning,\r\n        \"l-selected-script\": id === this.currentScriptID && (id !== this.runningScriptID || !highlightRunning),\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div :key=\"scripts.length\">\r\n    <div\r\n      v-for=\"script in scripts\"\r\n      :key=\"script.id\"\r\n      class=\"l-script-option c-script-option-hover-effect\"\r\n      :class=\"labelClassObject(script.id)\"\r\n      @click=\"changeScriptID(script.id)\"\r\n    >\r\n      {{ dropdownLabel(script) }}\r\n    </div>\r\n    <div\r\n      v-if=\"canMakeNewScript\"\r\n      class=\"l-create-script c-automator-docs-script-select c-script-option-hover-effect\"\r\n      @click=\"createNewScript()\"\r\n    >\r\n      <i>Create a new script (You have {{ formatInt(scriptCount) }} / {{ formatInt(maxScriptCount) }})</i>\r\n    </div>\r\n    <div\r\n      v-else\r\n      class=\"l-create-script c-automator-docs-script-select l-max-scripts\"\r\n    >\r\n      <i>You can only have {{ formatInt(maxScriptCount) }} scripts!</i>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.l-script-option {\r\n  border-radius: 0;\r\n  border-bottom: 0;\r\n}\r\n\r\n.c-script-option-hover-effect:hover {\r\n  filter: brightness(70%);\r\n  background-color: var(--color-automator-active-line-background);\r\n}\r\n\r\n.l-script-option:first-child {\r\n  border-radius: var(--var-border-radius, 0.5rem) var(--var-border-radius, 0.5rem) 0 0;\r\n}\r\n\r\n.l-create-script {\r\n  border-radius: 0 0 var(--var-border-radius, 0.5rem) var(--var-border-radius, 0.5rem);\r\n}\r\n\r\n.l-active-script {\r\n  background-color: var(--color-automator-controls-active);\r\n}\r\n\r\n.l-selected-script {\r\n  background-color: var(--color-automator-active-line-outline);\r\n}\r\n\r\n.l-max-scripts {\r\n  background-color: var(--color-automator-error-background);\r\n  cursor: auto;\r\n}\r\n</style>\r\n"]}]}