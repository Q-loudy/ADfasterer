{"remainingRequest":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\perks\\PerksTab.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\perks\\PerksTab.vue","mtime":1745241597418},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\babel-loader\\lib\\index.js","mtime":1745242219290},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745242214069},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1745242220175}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBEYXRhU2V0LCBOZXR3b3JrIH0gZnJvbSAidmlzLW5ldHdvcmsiOw0KDQppbXBvcnQgeyBQRVJLX0ZBTUlMWSB9IGZyb20gIkAvY29yZS9zZWNyZXQtZm9ybXVsYSI7DQppbXBvcnQgUGVya1BvaW50TGFiZWwgZnJvbSAiLi9QZXJrUG9pbnRMYWJlbCI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlBlcmtzVGFiIiwNCiAgY29tcG9uZW50czogew0KICAgIFBlcmtQb2ludExhYmVsDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgc2hvd0hpbnRUZXh0KCkgew0KICAgICAgcmV0dXJuIHVpLnZpZXcuc2hpZnREb3duIHx8IHBsYXllci5vcHRpb25zLnNob3dIaW50VGV4dC5wZXJrczsNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgc2hvd0hpbnRUZXh0KG5ld1ZhbHVlKSB7DQogICAgICBpZiAodWkudmlldy50aGVtZSA9PT0gIlM5IikgUGVya05ldHdvcmsuc2V0TGFiZWxWaXNpYmlsaXR5KGZhbHNlKTsNCiAgICAgIGVsc2UgUGVya05ldHdvcmsuc2V0TGFiZWxWaXNpYmlsaXR5KG5ld1ZhbHVlKTsNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgRXZlbnRIdWIudWkub24oR0FNRV9FVkVOVC5QRVJLX0JPVUdIVCwgKCkgPT4gUGVya05ldHdvcmsudXBkYXRlUGVya0NvbG9yKCkpOw0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIFBlcmtOZXR3b3JrLmluaXRpYWxTdGFiaWxpemF0aW9uID0gZmFsc2U7DQogICAgUGVya05ldHdvcmsuY3VycmVudExheW91dCA9IFBlcmtMYXlvdXRzW3BsYXllci5vcHRpb25zLnBlcmtMYXlvdXRdOw0KICAgIFBlcmtOZXR3b3JrLmluaXRpYWxpemVJZk5lZWRlZCgpOw0KICAgIGlmICh1aS52aWV3LnRoZW1lID09PSAiUzkiKSBQZXJrTmV0d29yay5zZXRMYWJlbFZpc2liaWxpdHkoZmFsc2UpOw0KICAgIGVsc2UgUGVya05ldHdvcmsuc2V0TGFiZWxWaXNpYmlsaXR5KHVpLnZpZXcuc2hpZnREb3duIHx8IHBsYXllci5vcHRpb25zLnNob3dIaW50VGV4dC5wZXJrcyk7DQogICAgUGVya05ldHdvcmsudXBkYXRlUGVya0NvbG9yKCk7DQogICAgUGVya05ldHdvcmsudXBkYXRlUGVya1NpemUoKTsNCiAgICB0aGlzLiRyZWZzLnRhYi5hcHBlbmRDaGlsZChQZXJrTmV0d29yay5jb250YWluZXIpOw0KICAgIFBlcmtOZXR3b3JrLm1vdmVUb0RlZmF1bHRMYXlvdXRQb3NpdGlvbnMocGxheWVyLm9wdGlvbnMucGVya0xheW91dCk7DQogIH0NCn07DQoNCi8vIFByaW1hcnkgaXMgbGlmdGVkIGZyb20gdGhlIHN0dWR5IHRyZWUgKG1vc3RseSksDQovLyBzZWNvbmRhcnkgaXMgcHJpbWFyeSAtMTUlIGwgaW4gaHNsLCBhcGFydCBmcm9tIHJlYWxpdHkgd2hpY2ggaXMgLTEwJQ0KY29uc3QgcGVya0NvbG9ycyA9ICgpID0+ICh7DQogIFtQRVJLX0ZBTUlMWS5BTlRJTUFUVEVSXTogew0KICAgIHByaW1hcnk6ICIjMjJhYTQ4IiwNCiAgICBzZWNvbmRhcnk6ICIjMTU2YTJkIg0KICB9LA0KICBbUEVSS19GQU1JTFkuSU5GSU5JVFldOiB7DQogICAgcHJpbWFyeTogIiNiNjdmMzMiLA0KICAgIHNlY29uZGFyeTogIiM3YjU2MjMiDQogIH0sDQogIFtQRVJLX0ZBTUlMWS5FVEVSTklUWV06IHsNCiAgICBwcmltYXJ5OiAiI2IyNDFlMyIsDQogICAgc2Vjb25kYXJ5OiAiIzhiMWNiYSINCiAgfSwNCiAgW1BFUktfRkFNSUxZLkRJTEFUSU9OXTogew0KICAgIHByaW1hcnk6ICIjNjRkZDE3IiwNCiAgICBzZWNvbmRhcnk6ICIjNDQ5ODEwIg0KICB9LA0KICBbUEVSS19GQU1JTFkuUkVBTElUWV06IHsNCiAgICBwcmltYXJ5OiAiIzBiNjAwZSIsDQogICAgc2Vjb25kYXJ5OiAiIzA2MzIwNyINCiAgfSwNCiAgW1BFUktfRkFNSUxZLkFVVE9NQVRJT05dOiB7DQogICAgcHJpbWFyeTogIiNmZjAwMDAiLA0KICAgIHNlY29uZGFyeTogIiNiMzAwMDAiDQogIH0sDQogIFtQRVJLX0ZBTUlMWS5BQ0hJRVZFTUVOVF06IHsNCiAgICBwcmltYXJ5OiAiI2ZkZDgzNSIsDQogICAgc2Vjb25kYXJ5OiAiI2UzYmEwMiINCiAgfSwNCn0pOw0KDQovLyBDb29yZGluYXRlIHNwZWNpZmljYXRpb25zIGFyZSBzb21ldGltZXMgZ2l2ZW4gaW4gYSBncmlkIGluZGV4LCBzbyB3ZSBuZWVkIHRvIHNwcmVhZCB0aGVtIG91dCB0byB0aGUgcHJvcGVyIHNjYWxpbmcuDQovLyBQb3NpdGlvbnMgd2l0aCB8eHwgPCAyMCBhbmQgfHl8IDwgMTIgd2lsbCBkaXNwbGF5IHdlbGwgd2l0aCBhIHNjYWxlIGZhY3RvciBvZiAxMC4NCi8vIFdoZW4gbWFraW5nIG5ldyBsYXlvdXRzLCB0aGUgZ3JpZCBjb29yZGluYXRlcyBuZWVkIHRvIGJlIG11bHRpcGxpZWQgYnkgNQ0KZnVuY3Rpb24gZ2xvYmFsU2NhbGUodmVjLCBmYWN0b3IsIHdpZHRoRmFjdG9yID0gMSkgew0KICByZXR1cm4gdmVjLm1hdHJpeFRyYW5zZm9ybShmYWN0b3IgKiB3aWR0aEZhY3RvciwgMCwgMCwgZmFjdG9yKTsNCn0NCg0KZnVuY3Rpb24gcG9zaXRpb25OdW1Ub1ZlY3RvcihudW0pIHsNCiAgY29uc3QgeFBhcnQgPSBudW0gJSA0MDA7DQogIGNvbnN0IHlQYXJ0ID0gTWF0aC5mbG9vcihudW0gLyA0MDApOw0KICByZXR1cm4gbmV3IFZlY3Rvcig1ICogKHhQYXJ0IC0gMjAwKSwgNSAqICh5UGFydCAtIDIwMCkpOw0KfQ0KDQovLyBTcGVjaWZpY2F0aW9uIGZvciBkaWZmZXJlbnQgc3RhcnRpbmcgbGF5b3V0cw0KZXhwb3J0IGNvbnN0IFBlcmtMYXlvdXRzID0gWw0KICB7DQogICAgYnV0dG9uVGV4dDogIkRlZmF1bHQgVW50YW5nbGVkIiwNCiAgICBwb3NpdGlvbjogY29uZmlnID0+IHBvc2l0aW9uTnVtVG9WZWN0b3IoY29uZmlnLmxheW91dFBvc0xpc3RbMF0pLA0KICB9LA0KICB7DQogICAgYnV0dG9uVGV4dDogIlJhbmRvbSBQb3NpdGlvbnMiLA0KICAgIHBvc2l0aW9uOiAoKSA9PiBuZXcgVmVjdG9yKDIwMDAgKiBNYXRoLnJhbmRvbSgpIC0gMTAwMCwgMTIwMCAqIE1hdGgucmFuZG9tKCkgLSA2MDApLA0KICB9LA0KICB7DQogICAgLy8gVGhpcyBpcyB0aGUgcGVya3MgbGFpZCBvdXQgaW4gdGhlIHNhbWUgd2F5IHRoYXQgdGhleSdyZSBsYWlkIG91dCBpbiB0aGUgQW5kcm9pZCB2ZXJzaW9uDQogICAgYnV0dG9uVGV4dDogIkFuZHJvaWQgTGF5b3V0IiwNCiAgICBwb3NpdGlvbjogY29uZmlnID0+IGdsb2JhbFNjYWxlKHBvc2l0aW9uTnVtVG9WZWN0b3IoY29uZmlnLmxheW91dFBvc0xpc3RbMV0pLCAyMCwgMS41KSwNCiAgICBjZW50ZXJPZmZzZXQ6IG5ldyBWZWN0b3IoMCwgMTIwKSwNCiAgICBmb3JjZVBoeXNpY3M6IGZhbHNlLA0KICAgIHN0cmFpZ2h0RWRnZXM6IHRydWUsDQogIH0sDQogIHsNCiAgICBidXR0b25UZXh0OiAiU3F1YXJlIiwNCiAgICBwb3NpdGlvbjogY29uZmlnID0+IGdsb2JhbFNjYWxlKHBvc2l0aW9uTnVtVG9WZWN0b3IoY29uZmlnLmxheW91dFBvc0xpc3RbMl0pLCAyNy41KSwNCiAgICBjZW50ZXJPZmZzZXQ6IG5ldyBWZWN0b3IoMCwgMCksDQogICAgZm9yY2VQaHlzaWNzOiBmYWxzZSwNCiAgICBzdHJhaWdodEVkZ2VzOiB0cnVlLA0KICB9LA0KICB7DQogICAgYnV0dG9uVGV4dDogIkhvcml6b250YWwgR3JpZCIsDQogICAgcG9zaXRpb246IGNvbmZpZyA9PiBnbG9iYWxTY2FsZShwb3NpdGlvbk51bVRvVmVjdG9yKGNvbmZpZy5sYXlvdXRQb3NMaXN0WzNdKSwgMzIuNSksDQogICAgY2VudGVyT2Zmc2V0OiBuZXcgVmVjdG9yKC02MCwgMCksDQogICAgZm9yY2VQaHlzaWNzOiBmYWxzZSwNCiAgICBzdHJhaWdodEVkZ2VzOiB0cnVlLA0KICB9LA0KICB7DQogICAgYnV0dG9uVGV4dDogIkRpc3RhbmNlIGZyb20gU1RBUlQiLA0KICAgIHBvc2l0aW9uOiBjb25maWcgPT4gZ2xvYmFsU2NhbGUocG9zaXRpb25OdW1Ub1ZlY3Rvcihjb25maWcubGF5b3V0UG9zTGlzdFs0XSksIDE3LjUpLA0KICAgIGNlbnRlck9mZnNldDogbmV3IFZlY3RvcigwLCAwKSwNCiAgICBmb3JjZVBoeXNpY3M6IGZhbHNlLA0KICAgIHN0cmFpZ2h0RWRnZXM6IHRydWUsDQogIH0sDQogIHsNCiAgICBidXR0b25UZXh0OiAiQmxvYiIsDQogICAgcG9zaXRpb246IGNvbmZpZyA9PiBwb3NpdGlvbk51bVRvVmVjdG9yKGNvbmZpZy5sYXlvdXRQb3NMaXN0WzVdKSwNCiAgICBjZW50ZXJPZmZzZXQ6IG5ldyBWZWN0b3IoNTAsIDApLA0KICAgIGZvcmNlUGh5c2ljczogZmFsc2UsDQogICAgc3RyYWlnaHRFZGdlczogdHJ1ZSwNCiAgICBpc1VubG9ja2VkOiAoKSA9PiBUaGVtZXMuYXZhaWxhYmxlKCkubWFwKHQgPT4gdC5uYW1lKS5pbmNsdWRlcygiUzExIiksDQogIH0NCl07DQoNCmV4cG9ydCBjb25zdCBQZXJrTmV0d29yayA9IHsNCiAgY29udGFpbmVyOiB1bmRlZmluZWQsDQogIG5ldHdvcms6IHVuZGVmaW5lZCwNCiAgbm9kZXM6IHVuZGVmaW5lZCwNCiAgbWluU2NhbGU6IDAuMiwNCiAgbWF4U2NhbGU6IDQsDQogIGxhc3RQZXJrTm90YXRpb246ICIiLA0KICBwdWxzZVRpbWVyOiAwLA0KICBpbml0aWFsU3RhYmlsaXphdGlvbjogZmFsc2UsDQogIGN1cnJlbnRMYXlvdXQ6IHt9LA0KICBpbml0aWFsaXplSWZOZWVkZWQoKSB7DQogICAgY29uc3Qgbm90YXRpb24gPSBOb3RhdGlvbnMuY3VycmVudC5uYW1lOw0KICAgIGlmICh0aGlzLmNvbnRhaW5lciAhPT0gdW5kZWZpbmVkICYmIG5vdGF0aW9uID09PSB0aGlzLmxhc3RQZXJrTm90YXRpb24pIHJldHVybjsNCiAgICB0aGlzLmxhc3RQZXJrTm90YXRpb24gPSBub3RhdGlvbjsNCg0KICAgIHRoaXMubWFrZU5ldHdvcmsoKTsNCg0KICAgIHRoaXMubmV0d29yay5vbigiY2xpY2siLCBwYXJhbXMgPT4gew0KICAgICAgY29uc3QgaWQgPSBwYXJhbXMubm9kZXNbMF07DQogICAgICBpZiAoIWlzRmluaXRlKGlkKSkgcmV0dXJuOw0KICAgICAgUGVya3MuZmluZChpZCkucHVyY2hhc2UoKTsNCiAgICAgIHRoaXMudXBkYXRlUGVya0NvbG9yKCk7DQogICAgICB0aGlzLnVwZGF0ZVBlcmtTaXplKCk7DQogICAgfSk7DQoNCiAgICB0aGlzLm5ldHdvcmsub24oImRyYWdTdGFydCIsICgpID0+IHsNCiAgICAgIGNvbnN0IHRvb2x0aXAgPSB0aGlzLmNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ2aXMtdG9vbHRpcCIpWzBdOw0KICAgICAgaWYgKHRvb2x0aXAgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICB0b29sdGlwLnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsNCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5pbml0aWFsU3RhYmlsaXphdGlvbikgew0KICAgICAgICB0aGlzLnNldFBoeXNpY3MocGxheWVyLm9wdGlvbnMucGVya1BoeXNpY3NFbmFibGVkKTsNCiAgICAgICAgdGhpcy5pbml0aWFsU3RhYmlsaXphdGlvbiA9IHRydWU7DQogICAgICB9DQogICAgfSk7DQoNCiAgICAvLyBDaGFuZ2Ugbm9kZSBzaWRlIHdoaWxlIGRyYWdnaW5nIG9uIENhbmNlciB0aGVtZSwgYnV0IHNraXAgdGhlIG1ldGhvZCBvdGhlcndpc2UgYmVjYXVzZSBpdCdzIG1pbGRseSBpbnRlbnNpdmUNCiAgICB0aGlzLm5ldHdvcmsub24oImRyYWdnaW5nIiwgKCkgPT4gew0KICAgICAgU2VjcmV0QWNoaWV2ZW1lbnQoNDUpLnRyeVVubG9jaygpOw0KICAgICAgaWYgKFRoZW1lLmN1cnJlbnQoKS5uYW1lID09PSAiUzQiKSBQZXJrTmV0d29yay51cGRhdGVQZXJrU2l6ZSgpOw0KICAgIH0pOw0KDQogICAgdGhpcy5uZXR3b3JrLm9uKCJ6b29tIiwgKCkgPT4gew0KICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLm5ldHdvcmsuZ2V0U2NhbGUoKTsNCiAgICAgIGNvbnN0IGNsYW1wZWRTY2FsZSA9IE1hdGguY2xhbXAoc2NhbGUsIHRoaXMubWluU2NhbGUsIHRoaXMubWF4U2NhbGUpOw0KICAgICAgaWYgKHNjYWxlICE9PSBjbGFtcGVkU2NhbGUpIHsNCiAgICAgICAgdGhpcy5uZXR3b3JrLm1vdmVUbyh7IHNjYWxlOiBjbGFtcGVkU2NhbGUgfSk7DQogICAgICB9DQogICAgfSk7DQoNCiAgICB0aGlzLm5ldHdvcmsub24oInN0YWJpbGl6YXRpb25JdGVyYXRpb25zRG9uZSIsICgpID0+IHsNCiAgICAgIC8vIENlbnRlcmluZyB0aGUgcGVyayB0cmVlIGRvZXNuJ3Qgd29yayB1bnRpbCB0aGUgcGh5c2ljcy1iYXNlZCBtb3ZlbWVudCBoYXMgc3RvcHBlZCBhZnRlciB0aGUgaW5pdGlhbCBjcmVhdGlvbg0KICAgICAgaWYgKCF0aGlzLmluaXRpYWxTdGFiaWxpemF0aW9uKSB7DQogICAgICAgIHRoaXMucmVzZXRQb3NpdGlvbihmYWxzZSk7DQogICAgICAgIHRoaXMuaW5pdGlhbFN0YWJpbGl6YXRpb24gPSB0cnVlOw0KICAgICAgfQ0KICAgICAgdGhpcy5zZXRQaHlzaWNzKHBsYXllci5vcHRpb25zLnBlcmtQaHlzaWNzRW5hYmxlZCk7DQogICAgfSk7DQogIH0sDQogIG1ha2VOZXR3b3JrKCkgew0KICAgIC8vIE5lZWQgdG8gZG8gc29tZSBodG1sIHRvIGJlIGFibGUgdG8gYXBwbHkgc29tZSBjc3MgZm9yIHdoZW4gaW4gZG9vbWVkDQogICAgZnVuY3Rpb24gaHRtbFRpdGxlKGh0bWwpIHsNCiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7DQogICAgICByZXR1cm4gY29udGFpbmVyOw0KICAgIH0NCiAgICAvLyBKdXN0IGZvciBhIGJpdCBvZiBmdW4sIHRhbmdsZSBpdCB1cCBhIGJpdCB1bmxlc3MgdGhlIHBsYXllciBzcGVjaWZpY2FsbHkgY2hvb3NlcyBub3QgdG8NCiAgICBjb25zdCBpc0Rpc2FibGVkID0gcGVyayA9PiBQZWxsZS5pc0Rvb21lZCAmJiBQZWxsZS51c2VsZXNzUGVya3MuaW5jbHVkZXMocGVyay5pZCk7DQogICAgY29uc3Qgc2VsZWN0UG9zID0gY29uZmlnID0+IFBlcmtMYXlvdXRzW3BsYXllci5vcHRpb25zLnBlcmtMYXlvdXRdLnBvc2l0aW9uKGNvbmZpZyk7DQogICAgdGhpcy5ub2RlcyA9IG5ldyBEYXRhU2V0KFBlcmtzLmFsbC5tYXAocGVyayA9PiAoew0KICAgICAgaWQ6IHBlcmsuaWQsDQogICAgICBsYWJlbDogcGVyay5jb25maWcubGFiZWwsDQogICAgICBzaGFwZTogcGVyay5jb25maWcuYXV0b21hdG9yUG9pbnRzID8gImRpYW1vbmQiIDogImRvdCIsDQogICAgICAvLyBBcyBmYXIgYXMgSSBhbSBhd2FyZSwgdmlzLmpzIGRvZXNuJ3Qgc3VwcG9ydCBhcmJpdHJhcnkgQ1NTIHN0eWxpbmc7IG5ldmVydGhlbGVzcywgd2Ugc3RpbGwgd2FudCB0aGUgb3JpZ2luYWwNCiAgICAgIC8vIGRlc2NyaXB0aW9uIHRvIGJlIHZpc2libGUgaW5zdGVhZCBvZiBiZWluZyBoaWRkZW4gYnkgZGlzYWJsZS9sb2NrIHRleHQNCiAgICAgIHRpdGxlOiAoaXNEaXNhYmxlZChwZXJrKQ0KICAgICAgICA/IGh0bWxUaXRsZSgNCiAgICAgICAgICBgPHNwYW4gc3R5bGU9J3RleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoOyc+JHtwZXJrLmNvbmZpZy5kZXNjcmlwdGlvbn08L3NwYW4+YA0KICAgICAgICApDQogICAgICAgIDogYCR7cGVyay5jb25maWcuZGVzY3JpcHRpb259ICR7cGVyay5jb25maWcuYXV0b21hdG9yUG9pbnRzICYmICFpc0Rpc2FibGVkKHBlcmspDQogICAgICAgICAgPyBgKCske2Zvcm1hdEludChwZXJrLmNvbmZpZy5hdXRvbWF0b3JQb2ludHMpfSBBUClgDQogICAgICAgICAgOiAiIn1gDQogICAgICApLA0KICAgICAgeDogc2VsZWN0UG9zKHBlcmsuY29uZmlnKS54LA0KICAgICAgeTogc2VsZWN0UG9zKHBlcmsuY29uZmlnKS55LA0KICAgIH0pKSk7DQoNCiAgICBjb25zdCBlZGdlcyA9IFtdOw0KICAgIGZvciAoY29uc3QgcGVyayBvZiBQZXJrcy5hbGwpIHsNCiAgICAgIGZvciAoY29uc3QgY29ubmVjdGVkUGVyayBvZiBwZXJrLmNvbm5lY3RlZFBlcmtzKSB7DQogICAgICAgIGNvbnN0IGZyb20gPSBNYXRoLm1pbihwZXJrLmlkLCBjb25uZWN0ZWRQZXJrLmlkKTsNCiAgICAgICAgY29uc3QgdG8gPSBNYXRoLm1heChwZXJrLmlkLCBjb25uZWN0ZWRQZXJrLmlkKTsNCiAgICAgICAgaWYgKGVkZ2VzLmZpbmQoZWRnZSA9PiBlZGdlLmZyb20gPT09IGZyb20gJiYgZWRnZS50byA9PT0gdG8pKSBjb250aW51ZTsNCiAgICAgICAgZWRnZXMucHVzaCh7IGZyb20sIHRvIH0pOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGNvbnN0IG5vZGVEYXRhID0gew0KICAgICAgbm9kZXM6IHRoaXMubm9kZXMsDQogICAgICBlZGdlcw0KICAgIH07DQoNCiAgICBjb25zdCBub2RlT3B0aW9ucyA9IHsNCiAgICAgIGludGVyYWN0aW9uOiB7DQogICAgICAgIGhvdmVyOiB0cnVlLA0KICAgICAgICBob3ZlckNvbm5lY3RlZEVkZ2VzOiBmYWxzZSwNCiAgICAgICAgc2VsZWN0Q29ubmVjdGVkRWRnZXM6IGZhbHNlLA0KICAgICAgICB0b29sdGlwRGVsYXk6IDAsDQogICAgICB9LA0KICAgICAgbm9kZXM6IHsNCiAgICAgICAgc2hhcGU6ICJkb3QiLA0KICAgICAgICBzaXplOiAxOCwNCiAgICAgICAgZm9udDogew0KICAgICAgICAgIHNpemU6IDANCiAgICAgICAgfSwNCiAgICAgICAgYm9yZGVyV2lkdGg6IDIsDQogICAgICAgIHNoYWRvdzogdHJ1ZQ0KICAgICAgfSwNCiAgICAgIGVkZ2VzOiB7DQogICAgICAgIHdpZHRoOiA0LA0KICAgICAgICBzaGFkb3c6IHRydWUsDQogICAgICAgIGhvdmVyV2lkdGg6IHdpZHRoID0+IHdpZHRoLA0KICAgICAgICBzZWxlY3Rpb25XaWR0aDogd2lkdGggPT4gd2lkdGgsDQogICAgICAgIGNvbG9yOiB7DQogICAgICAgICAgaW5oZXJpdDogImJvdGgiDQogICAgICAgIH0sDQogICAgICAgIGhpZGRlbjogdWkudmlldy50aGVtZSA9PT0gIlM5Ig0KICAgICAgfSwNCiAgICB9Ow0KDQogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICJjLXdpZGUtY2FudmFzLWVsZW1lbnQgdmlzLW5ldHdvcmsgYy1wZXJrLW5ldHdvcmsiOw0KICAgIGNvbnRhaW5lci50YWJJbmRleCA9IDkwMDsNCiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsNCiAgICBjYW52YXMuY2xhc3NOYW1lID0gImMtcGVyay1uZXR3b3JrX19jYW52YXMiOw0KICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpOw0KICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyOw0KDQogICAgdGhpcy5uZXR3b3JrID0gbmV3IE5ldHdvcmsoY29udGFpbmVyLCBub2RlRGF0YSwgbm9kZU9wdGlvbnMpOw0KICB9LA0KICBzZXRQaHlzaWNzKHN0YXRlKSB7DQogICAgY29uc3QgbmV3U3RhdGUgPSB0aGlzLmN1cnJlbnRMYXlvdXQuZm9yY2VQaHlzaWNzID09PSB1bmRlZmluZWQgPyBzdGF0ZSA6IHRoaXMuY3VycmVudExheW91dC5mb3JjZVBoeXNpY3M7DQogICAgdGhpcy5uZXR3b3JrLnNldE9wdGlvbnMoeyBwaHlzaWNzOiB7IGVuYWJsZWQ6IG5ld1N0YXRlIH0gfSk7DQogIH0sDQogIHNldEVkZ2VDdXJ2ZShzdGF0ZSkgew0KICAgIGNvbnN0IG5ld1N0YXRlID0gdGhpcy5jdXJyZW50TGF5b3V0LnN0cmFpZ2h0RWRnZXMgPT09IHVuZGVmaW5lZCA/IHN0YXRlIDogIXRoaXMuY3VycmVudExheW91dC5zdHJhaWdodEVkZ2VzOw0KICAgIHRoaXMubmV0d29yay5zZXRPcHRpb25zKHsgZWRnZXM6IHsgc21vb3RoOiB7IGVuYWJsZWQ6IG5ld1N0YXRlIH0gfSB9KTsNCiAgfSwNCiAgbW92ZVRvRGVmYXVsdExheW91dFBvc2l0aW9ucyhsYXlvdXRJbmRleCkgew0KICAgIC8vIFRoaW5ncyBnbyB3b25reSBpZiB3ZSBkb24ndCB0dXJuIHRoZXNlIG9mZiBiZWZvcmUgbW92aW5nDQogICAgdGhpcy5zZXRQaHlzaWNzKGZhbHNlKTsNCiAgICB0aGlzLnNldEVkZ2VDdXJ2ZShmYWxzZSk7DQoNCiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhQZXJrTmV0d29yay5uZXR3b3JrLmdldFBvc2l0aW9ucygpKSkgew0KICAgICAgY29uc3QgaWQgPSBOdW1iZXIoa2V5KTsNCiAgICAgIGNvbnN0IGNvbmZpZyA9IFBlcmtzLmFsbC5maW5kKHAgPT4gcC5pZCA9PT0gaWQpLmNvbmZpZzsNCiAgICAgIGNvbnN0IHRhcmdldCA9IFBlcmtMYXlvdXRzW2xheW91dEluZGV4XS5wb3NpdGlvbihjb25maWcpOw0KICAgICAgdGhpcy5uZXR3b3JrLm1vdmVOb2RlKGlkLCB0YXJnZXQueCwgdGFyZ2V0LnkpOw0KICAgIH0NCg0KICAgIC8vIFByb3Blcmx5IHNldCBhdHRyaWJ1dGVzIGFuZCB3aW5kb3cgYWZ0ZXIgYWxsIHRoZSBtb3ZlbWVudA0KICAgIHRoaXMuaW5pdGlhbFN0YWJpbGl6YXRpb24gPSBmYWxzZTsNCiAgICB0aGlzLnJlc2V0UG9zaXRpb24oZmFsc2UpOw0KICAgIHRoaXMuc2V0RWRnZUN1cnZlKHRydWUpOw0KICB9LA0KICBmb3JjZU5ldHdvcmtSZW1ha2UoKSB7DQogICAgdGhpcy5jb250YWluZXIgPSB1bmRlZmluZWQ7DQogICAgdGhpcy5pbml0aWFsaXplSWZOZWVkZWQoKTsNCiAgICAvLyBUYW5nbGVkIHRyZWVzIHVzZSBwaHlzaWNzIHRvIGJyaW5nIGl0IHRvIGEgc2VtaS11c2FibGUgc3RhdGU7IGl0IGdldHMgc2V0IHByb3Blcmx5IGFnYWluIGFmdGVyIHN0YWJpbGl6YXRpb24NCiAgICB0aGlzLnNldFBoeXNpY3ModHJ1ZSk7DQogIH0sDQogIHJlc2V0UG9zaXRpb24oY2VudGVyT25TdGFydCkgew0KICAgIGNvbnN0IGNlbnRlciA9IGNlbnRlck9uU3RhcnQNCiAgICAgID8gUGVya05ldHdvcmsubmV0d29yay5ib2R5Lm5vZGVzW0dhbWVEYXRhYmFzZS5yZWFsaXR5LnBlcmtzLmZpcnN0UGVyay5pZF0NCiAgICAgIDogKFBlcmtMYXlvdXRzW3BsYXllci5vcHRpb25zLnBlcmtMYXlvdXRdLmNlbnRlck9mZnNldCA/PyBuZXcgVmVjdG9yKDAsIDApKTsNCiAgICB0aGlzLm5ldHdvcmsubW92ZVRvKHsgcG9zaXRpb246IHsgeDogY2VudGVyLngsIHk6IGNlbnRlci55IH0sIHNjYWxlOiAwLjQsIG9mZnNldDogeyB4OiAwLCB5OiAwIH0gfSk7DQogIH0sDQogIHNldExhYmVsVmlzaWJpbGl0eShhcmVWaXNpYmxlKSB7DQogICAgY29uc3Qgb3B0aW9ucyA9IHsNCiAgICAgIG5vZGVzOiB7DQogICAgICAgIGZvbnQ6IHsNCiAgICAgICAgICBzaXplOiBhcmVWaXNpYmxlID8gMjAgOiAwLA0KICAgICAgICAgIGNvbG9yOiBUaGVtZS5jdXJyZW50KCkuaXNEYXJrKCkgPyAiI0RERERERCIgOiAiIzIyMjIyMiIsDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIHRoaXMubmV0d29yay5zZXRPcHRpb25zKG9wdGlvbnMpOw0KICB9LA0KICB1cGRhdGVQZXJrQ29sb3IoKSB7DQogICAgdGhpcy5wZXJrQ29sb3JMaXN0ID0gdGhpcy5wZXJrQ29sb3JMaXN0ID8/IHBlcmtDb2xvcnMoKTsNCiAgICBjb25zdCBwZXJrQ29sb3JMaXN0ID0gdGhpcy5wZXJrQ29sb3JMaXN0Ow0KDQogICAgZnVuY3Rpb24gbm9kZUNvbG9yKHBlcmspIHsNCiAgICAgIGNvbnN0IHBlcmtDb2xvciA9IHBlcmtDb2xvckxpc3RbcGVyay5jb25maWcuZmFtaWx5XTsNCiAgICAgIGNvbnN0IHByaW1hcnlDb2xvciA9IHBlcmtDb2xvci5wcmltYXJ5Ow0KICAgICAgY29uc3Qgc2Vjb25kYXJ5Q29sb3IgPSBwZXJrQ29sb3Iuc2Vjb25kYXJ5Ow0KDQogICAgICBjb25zdCBwZWxsZVVzZWxlc3MgPSBQZWxsZS5pc0Rvb21lZCAmJiBQZWxsZS51c2VsZXNzUGVya3MuaW5jbHVkZXMocGVyay5pZCk7DQogICAgICBpZiAocGVsbGVVc2VsZXNzKSB7DQogICAgICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9ICIjMDBiY2Q0IjsNCiAgICAgICAgY29uc3QgaG92ZXJDb2xvciA9ICJjcmltc29uIjsNCiAgICAgICAgY29uc3QgYm9yZGVyQ29sb3IgPSBzZWNvbmRhcnlDb2xvcjsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBiYWNrZ3JvdW5kOiBiYWNrZ3JvdW5kQ29sb3IsDQogICAgICAgICAgYm9yZGVyOiBib3JkZXJDb2xvciwNCiAgICAgICAgICBob3Zlcjogew0KICAgICAgICAgICAgYmFja2dyb3VuZDogaG92ZXJDb2xvciwNCiAgICAgICAgICAgIGJvcmRlcjogYm9yZGVyQ29sb3INCiAgICAgICAgICB9LA0KICAgICAgICAgIGhpZ2hsaWdodDogew0KICAgICAgICAgICAgYmFja2dyb3VuZDogYmFja2dyb3VuZENvbG9yLA0KICAgICAgICAgICAgYm9yZGVyOiBib3JkZXJDb2xvcg0KICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICAgIH0NCiAgICAgIGNvbnN0IGNhbkJlQm91Z2h0ID0gcGVyay5jYW5CZUJvdWdodDsNCiAgICAgIGNvbnN0IGlzQm91Z2h0ID0gcGVyay5pc0JvdWdodDsNCg0KICAgICAgbGV0IGJhY2tncm91bmRDb2xvcjsNCiAgICAgIGlmIChjYW5CZUJvdWdodCkgew0KICAgICAgICBpZiAoVGhlbWUuY3VycmVudCgpLmlzRGFyaygpKSBiYWNrZ3JvdW5kQ29sb3IgPSAiI0VFRUVFRSI7DQogICAgICAgIGVsc2UgYmFja2dyb3VuZENvbG9yID0gIiMxMTExMTEiOw0KICAgICAgfSBlbHNlIGlmIChpc0JvdWdodCkgYmFja2dyb3VuZENvbG9yID0gcHJpbWFyeUNvbG9yOw0KICAgICAgZWxzZSBpZiAoVGhlbWUuY3VycmVudCgpLmlzRGFyaygpKSBiYWNrZ3JvdW5kQ29sb3IgPSAiIzMzMzMzMyI7DQogICAgICBlbHNlIGJhY2tncm91bmRDb2xvciA9ICIjQ0NDQ0NDIjsNCg0KICAgICAgY29uc3QgaG92ZXJDb2xvciA9IGNhbkJlQm91Z2h0IHx8IGlzQm91Z2h0ID8gcHJpbWFyeUNvbG9yIDogIiM2NTY1NjUiOw0KICAgICAgY29uc3QgYm9yZGVyQ29sb3IgPSBzZWNvbmRhcnlDb2xvcjsNCg0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgYmFja2dyb3VuZDogYmFja2dyb3VuZENvbG9yLA0KICAgICAgICBib3JkZXI6IGJvcmRlckNvbG9yLA0KICAgICAgICBob3Zlcjogew0KICAgICAgICAgIGJhY2tncm91bmQ6IGhvdmVyQ29sb3IsDQogICAgICAgICAgYm9yZGVyOiBib3JkZXJDb2xvcg0KICAgICAgICB9LA0KICAgICAgICBoaWdobGlnaHQ6IHsNCiAgICAgICAgICBiYWNrZ3JvdW5kOiBiYWNrZ3JvdW5kQ29sb3IsDQogICAgICAgICAgYm9yZGVyOiBib3JkZXJDb2xvcg0KICAgICAgICB9DQogICAgICB9Ow0KICAgIH0NCg0KICAgIGNvbnN0IGRhdGEgPSBQZXJrcy5hbGwNCiAgICAgIC5tYXAocGVyayA9PiAoeyBpZDogcGVyay5pZCwgY29sb3I6IG5vZGVDb2xvcihwZXJrKSB9KSk7DQogICAgdGhpcy5ub2Rlcy51cGRhdGUoZGF0YSk7DQogIH0sDQogIHVwZGF0ZVBlcmtTaXplKCkgew0KICAgIGZ1bmN0aW9uIG5vZGVTaXplKHBlcmspIHsNCiAgICAgIFBlcmtOZXR3b3JrLnB1bHNlVGltZXIgKz0gMC4xOw0KICAgICAgLy8gTWFrZSB0aGUgbm9kZXMgcHVsc2UgY29udGludW91c2x5IG9uIENhbmNlciB0aGVtZQ0KICAgICAgY29uc3QgbW9kID0gVGhlbWUuY3VycmVudCgpLm5hbWUgPT09ICJTNCINCiAgICAgICAgPyAxMCAqIE1hdGguc2luKDUgKiBQZXJrTmV0d29yay5wdWxzZVRpbWVyICsgMC4xICogcGVyay5fY29uZmlnLmlkKQ0KICAgICAgICA6IDA7DQogICAgICBpZiAocGVyay5fY29uZmlnLmxhYmVsID09PSAiU1RBUlQiKSByZXR1cm4gMzUgKyBtb2Q7DQogICAgICBpZiAocGVyay5pc0JvdWdodCkgcmV0dXJuIDI1ICsgbW9kOw0KICAgICAgaWYgKHBlcmsuY2FuQmVCb3VnaHQpIHJldHVybiAyMCArIG1vZDsNCiAgICAgIHJldHVybiAxMiArIG1vZDsNCiAgICB9DQoNCiAgICBjb25zdCBkYXRhID0gUGVya3MuYWxsDQogICAgICAubWFwKHBlcmsgPT4gKHsgaWQ6IHBlcmsuaWQsIHNpemU6IG5vZGVTaXplKHBlcmspIH0pKTsNCiAgICB0aGlzLm5vZGVzLnVwZGF0ZShkYXRhKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["PerksTab.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"PerksTab.vue","sourceRoot":"src/components/tabs/perks","sourcesContent":["<script>\r\nimport { DataSet, Network } from \"vis-network\";\r\n\r\nimport { PERK_FAMILY } from \"@/core/secret-formula\";\r\nimport PerkPointLabel from \"./PerkPointLabel\";\r\n\r\nexport default {\r\n  name: \"PerksTab\",\r\n  components: {\r\n    PerkPointLabel\r\n  },\r\n  computed: {\r\n    showHintText() {\r\n      return ui.view.shiftDown || player.options.showHintText.perks;\r\n    }\r\n  },\r\n  watch: {\r\n    showHintText(newValue) {\r\n      if (ui.view.theme === \"S9\") PerkNetwork.setLabelVisibility(false);\r\n      else PerkNetwork.setLabelVisibility(newValue);\r\n    }\r\n  },\r\n  created() {\r\n    EventHub.ui.on(GAME_EVENT.PERK_BOUGHT, () => PerkNetwork.updatePerkColor());\r\n  },\r\n  mounted() {\r\n    PerkNetwork.initialStabilization = false;\r\n    PerkNetwork.currentLayout = PerkLayouts[player.options.perkLayout];\r\n    PerkNetwork.initializeIfNeeded();\r\n    if (ui.view.theme === \"S9\") PerkNetwork.setLabelVisibility(false);\r\n    else PerkNetwork.setLabelVisibility(ui.view.shiftDown || player.options.showHintText.perks);\r\n    PerkNetwork.updatePerkColor();\r\n    PerkNetwork.updatePerkSize();\r\n    this.$refs.tab.appendChild(PerkNetwork.container);\r\n    PerkNetwork.moveToDefaultLayoutPositions(player.options.perkLayout);\r\n  }\r\n};\r\n\r\n// Primary is lifted from the study tree (mostly),\r\n// secondary is primary -15% l in hsl, apart from reality which is -10%\r\nconst perkColors = () => ({\r\n  [PERK_FAMILY.ANTIMATTER]: {\r\n    primary: \"#22aa48\",\r\n    secondary: \"#156a2d\"\r\n  },\r\n  [PERK_FAMILY.INFINITY]: {\r\n    primary: \"#b67f33\",\r\n    secondary: \"#7b5623\"\r\n  },\r\n  [PERK_FAMILY.ETERNITY]: {\r\n    primary: \"#b241e3\",\r\n    secondary: \"#8b1cba\"\r\n  },\r\n  [PERK_FAMILY.DILATION]: {\r\n    primary: \"#64dd17\",\r\n    secondary: \"#449810\"\r\n  },\r\n  [PERK_FAMILY.REALITY]: {\r\n    primary: \"#0b600e\",\r\n    secondary: \"#063207\"\r\n  },\r\n  [PERK_FAMILY.AUTOMATION]: {\r\n    primary: \"#ff0000\",\r\n    secondary: \"#b30000\"\r\n  },\r\n  [PERK_FAMILY.ACHIEVEMENT]: {\r\n    primary: \"#fdd835\",\r\n    secondary: \"#e3ba02\"\r\n  },\r\n});\r\n\r\n// Coordinate specifications are sometimes given in a grid index, so we need to spread them out to the proper scaling.\r\n// Positions with |x| < 20 and |y| < 12 will display well with a scale factor of 10.\r\n// When making new layouts, the grid coordinates need to be multiplied by 5\r\nfunction globalScale(vec, factor, widthFactor = 1) {\r\n  return vec.matrixTransform(factor * widthFactor, 0, 0, factor);\r\n}\r\n\r\nfunction positionNumToVector(num) {\r\n  const xPart = num % 400;\r\n  const yPart = Math.floor(num / 400);\r\n  return new Vector(5 * (xPart - 200), 5 * (yPart - 200));\r\n}\r\n\r\n// Specification for different starting layouts\r\nexport const PerkLayouts = [\r\n  {\r\n    buttonText: \"Default Untangled\",\r\n    position: config => positionNumToVector(config.layoutPosList[0]),\r\n  },\r\n  {\r\n    buttonText: \"Random Positions\",\r\n    position: () => new Vector(2000 * Math.random() - 1000, 1200 * Math.random() - 600),\r\n  },\r\n  {\r\n    // This is the perks laid out in the same way that they're laid out in the Android version\r\n    buttonText: \"Android Layout\",\r\n    position: config => globalScale(positionNumToVector(config.layoutPosList[1]), 20, 1.5),\r\n    centerOffset: new Vector(0, 120),\r\n    forcePhysics: false,\r\n    straightEdges: true,\r\n  },\r\n  {\r\n    buttonText: \"Square\",\r\n    position: config => globalScale(positionNumToVector(config.layoutPosList[2]), 27.5),\r\n    centerOffset: new Vector(0, 0),\r\n    forcePhysics: false,\r\n    straightEdges: true,\r\n  },\r\n  {\r\n    buttonText: \"Horizontal Grid\",\r\n    position: config => globalScale(positionNumToVector(config.layoutPosList[3]), 32.5),\r\n    centerOffset: new Vector(-60, 0),\r\n    forcePhysics: false,\r\n    straightEdges: true,\r\n  },\r\n  {\r\n    buttonText: \"Distance from START\",\r\n    position: config => globalScale(positionNumToVector(config.layoutPosList[4]), 17.5),\r\n    centerOffset: new Vector(0, 0),\r\n    forcePhysics: false,\r\n    straightEdges: true,\r\n  },\r\n  {\r\n    buttonText: \"Blob\",\r\n    position: config => positionNumToVector(config.layoutPosList[5]),\r\n    centerOffset: new Vector(50, 0),\r\n    forcePhysics: false,\r\n    straightEdges: true,\r\n    isUnlocked: () => Themes.available().map(t => t.name).includes(\"S11\"),\r\n  }\r\n];\r\n\r\nexport const PerkNetwork = {\r\n  container: undefined,\r\n  network: undefined,\r\n  nodes: undefined,\r\n  minScale: 0.2,\r\n  maxScale: 4,\r\n  lastPerkNotation: \"\",\r\n  pulseTimer: 0,\r\n  initialStabilization: false,\r\n  currentLayout: {},\r\n  initializeIfNeeded() {\r\n    const notation = Notations.current.name;\r\n    if (this.container !== undefined && notation === this.lastPerkNotation) return;\r\n    this.lastPerkNotation = notation;\r\n\r\n    this.makeNetwork();\r\n\r\n    this.network.on(\"click\", params => {\r\n      const id = params.nodes[0];\r\n      if (!isFinite(id)) return;\r\n      Perks.find(id).purchase();\r\n      this.updatePerkColor();\r\n      this.updatePerkSize();\r\n    });\r\n\r\n    this.network.on(\"dragStart\", () => {\r\n      const tooltip = this.container.getElementsByClassName(\"vis-tooltip\")[0];\r\n      if (tooltip !== undefined) {\r\n        tooltip.style.visibility = \"hidden\";\r\n      }\r\n      if (!this.initialStabilization) {\r\n        this.setPhysics(player.options.perkPhysicsEnabled);\r\n        this.initialStabilization = true;\r\n      }\r\n    });\r\n\r\n    // Change node side while dragging on Cancer theme, but skip the method otherwise because it's mildly intensive\r\n    this.network.on(\"dragging\", () => {\r\n      SecretAchievement(45).tryUnlock();\r\n      if (Theme.current().name === \"S4\") PerkNetwork.updatePerkSize();\r\n    });\r\n\r\n    this.network.on(\"zoom\", () => {\r\n      const scale = this.network.getScale();\r\n      const clampedScale = Math.clamp(scale, this.minScale, this.maxScale);\r\n      if (scale !== clampedScale) {\r\n        this.network.moveTo({ scale: clampedScale });\r\n      }\r\n    });\r\n\r\n    this.network.on(\"stabilizationIterationsDone\", () => {\r\n      // Centering the perk tree doesn't work until the physics-based movement has stopped after the initial creation\r\n      if (!this.initialStabilization) {\r\n        this.resetPosition(false);\r\n        this.initialStabilization = true;\r\n      }\r\n      this.setPhysics(player.options.perkPhysicsEnabled);\r\n    });\r\n  },\r\n  makeNetwork() {\r\n    // Need to do some html to be able to apply some css for when in doomed\r\n    function htmlTitle(html) {\r\n      const container = document.createElement(\"div\");\r\n      container.innerHTML = html;\r\n      return container;\r\n    }\r\n    // Just for a bit of fun, tangle it up a bit unless the player specifically chooses not to\r\n    const isDisabled = perk => Pelle.isDoomed && Pelle.uselessPerks.includes(perk.id);\r\n    const selectPos = config => PerkLayouts[player.options.perkLayout].position(config);\r\n    this.nodes = new DataSet(Perks.all.map(perk => ({\r\n      id: perk.id,\r\n      label: perk.config.label,\r\n      shape: perk.config.automatorPoints ? \"diamond\" : \"dot\",\r\n      // As far as I am aware, vis.js doesn't support arbitrary CSS styling; nevertheless, we still want the original\r\n      // description to be visible instead of being hidden by disable/lock text\r\n      title: (isDisabled(perk)\r\n        ? htmlTitle(\r\n          `<span style='text-decoration: line-through;'>${perk.config.description}</span>`\r\n        )\r\n        : `${perk.config.description} ${perk.config.automatorPoints && !isDisabled(perk)\r\n          ? `(+${formatInt(perk.config.automatorPoints)} AP)`\r\n          : \"\"}`\r\n      ),\r\n      x: selectPos(perk.config).x,\r\n      y: selectPos(perk.config).y,\r\n    })));\r\n\r\n    const edges = [];\r\n    for (const perk of Perks.all) {\r\n      for (const connectedPerk of perk.connectedPerks) {\r\n        const from = Math.min(perk.id, connectedPerk.id);\r\n        const to = Math.max(perk.id, connectedPerk.id);\r\n        if (edges.find(edge => edge.from === from && edge.to === to)) continue;\r\n        edges.push({ from, to });\r\n      }\r\n    }\r\n\r\n    const nodeData = {\r\n      nodes: this.nodes,\r\n      edges\r\n    };\r\n\r\n    const nodeOptions = {\r\n      interaction: {\r\n        hover: true,\r\n        hoverConnectedEdges: false,\r\n        selectConnectedEdges: false,\r\n        tooltipDelay: 0,\r\n      },\r\n      nodes: {\r\n        shape: \"dot\",\r\n        size: 18,\r\n        font: {\r\n          size: 0\r\n        },\r\n        borderWidth: 2,\r\n        shadow: true\r\n      },\r\n      edges: {\r\n        width: 4,\r\n        shadow: true,\r\n        hoverWidth: width => width,\r\n        selectionWidth: width => width,\r\n        color: {\r\n          inherit: \"both\"\r\n        },\r\n        hidden: ui.view.theme === \"S9\"\r\n      },\r\n    };\r\n\r\n    const container = document.createElement(\"div\");\r\n    container.className = \"c-wide-canvas-element vis-network c-perk-network\";\r\n    container.tabIndex = 900;\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.className = \"c-perk-network__canvas\";\r\n    container.appendChild(canvas);\r\n    this.container = container;\r\n\r\n    this.network = new Network(container, nodeData, nodeOptions);\r\n  },\r\n  setPhysics(state) {\r\n    const newState = this.currentLayout.forcePhysics === undefined ? state : this.currentLayout.forcePhysics;\r\n    this.network.setOptions({ physics: { enabled: newState } });\r\n  },\r\n  setEdgeCurve(state) {\r\n    const newState = this.currentLayout.straightEdges === undefined ? state : !this.currentLayout.straightEdges;\r\n    this.network.setOptions({ edges: { smooth: { enabled: newState } } });\r\n  },\r\n  moveToDefaultLayoutPositions(layoutIndex) {\r\n    // Things go wonky if we don't turn these off before moving\r\n    this.setPhysics(false);\r\n    this.setEdgeCurve(false);\r\n\r\n    for (const key of Object.keys(PerkNetwork.network.getPositions())) {\r\n      const id = Number(key);\r\n      const config = Perks.all.find(p => p.id === id).config;\r\n      const target = PerkLayouts[layoutIndex].position(config);\r\n      this.network.moveNode(id, target.x, target.y);\r\n    }\r\n\r\n    // Properly set attributes and window after all the movement\r\n    this.initialStabilization = false;\r\n    this.resetPosition(false);\r\n    this.setEdgeCurve(true);\r\n  },\r\n  forceNetworkRemake() {\r\n    this.container = undefined;\r\n    this.initializeIfNeeded();\r\n    // Tangled trees use physics to bring it to a semi-usable state; it gets set properly again after stabilization\r\n    this.setPhysics(true);\r\n  },\r\n  resetPosition(centerOnStart) {\r\n    const center = centerOnStart\r\n      ? PerkNetwork.network.body.nodes[GameDatabase.reality.perks.firstPerk.id]\r\n      : (PerkLayouts[player.options.perkLayout].centerOffset ?? new Vector(0, 0));\r\n    this.network.moveTo({ position: { x: center.x, y: center.y }, scale: 0.4, offset: { x: 0, y: 0 } });\r\n  },\r\n  setLabelVisibility(areVisible) {\r\n    const options = {\r\n      nodes: {\r\n        font: {\r\n          size: areVisible ? 20 : 0,\r\n          color: Theme.current().isDark() ? \"#DDDDDD\" : \"#222222\",\r\n        }\r\n      }\r\n    };\r\n    this.network.setOptions(options);\r\n  },\r\n  updatePerkColor() {\r\n    this.perkColorList = this.perkColorList ?? perkColors();\r\n    const perkColorList = this.perkColorList;\r\n\r\n    function nodeColor(perk) {\r\n      const perkColor = perkColorList[perk.config.family];\r\n      const primaryColor = perkColor.primary;\r\n      const secondaryColor = perkColor.secondary;\r\n\r\n      const pelleUseless = Pelle.isDoomed && Pelle.uselessPerks.includes(perk.id);\r\n      if (pelleUseless) {\r\n        const backgroundColor = \"#00bcd4\";\r\n        const hoverColor = \"crimson\";\r\n        const borderColor = secondaryColor;\r\n        return {\r\n          background: backgroundColor,\r\n          border: borderColor,\r\n          hover: {\r\n            background: hoverColor,\r\n            border: borderColor\r\n          },\r\n          highlight: {\r\n            background: backgroundColor,\r\n            border: borderColor\r\n          }\r\n        };\r\n      }\r\n      const canBeBought = perk.canBeBought;\r\n      const isBought = perk.isBought;\r\n\r\n      let backgroundColor;\r\n      if (canBeBought) {\r\n        if (Theme.current().isDark()) backgroundColor = \"#EEEEEE\";\r\n        else backgroundColor = \"#111111\";\r\n      } else if (isBought) backgroundColor = primaryColor;\r\n      else if (Theme.current().isDark()) backgroundColor = \"#333333\";\r\n      else backgroundColor = \"#CCCCCC\";\r\n\r\n      const hoverColor = canBeBought || isBought ? primaryColor : \"#656565\";\r\n      const borderColor = secondaryColor;\r\n\r\n      return {\r\n        background: backgroundColor,\r\n        border: borderColor,\r\n        hover: {\r\n          background: hoverColor,\r\n          border: borderColor\r\n        },\r\n        highlight: {\r\n          background: backgroundColor,\r\n          border: borderColor\r\n        }\r\n      };\r\n    }\r\n\r\n    const data = Perks.all\r\n      .map(perk => ({ id: perk.id, color: nodeColor(perk) }));\r\n    this.nodes.update(data);\r\n  },\r\n  updatePerkSize() {\r\n    function nodeSize(perk) {\r\n      PerkNetwork.pulseTimer += 0.1;\r\n      // Make the nodes pulse continuously on Cancer theme\r\n      const mod = Theme.current().name === \"S4\"\r\n        ? 10 * Math.sin(5 * PerkNetwork.pulseTimer + 0.1 * perk._config.id)\r\n        : 0;\r\n      if (perk._config.label === \"START\") return 35 + mod;\r\n      if (perk.isBought) return 25 + mod;\r\n      if (perk.canBeBought) return 20 + mod;\r\n      return 12 + mod;\r\n    }\r\n\r\n    const data = Perks.all\r\n      .map(perk => ({ id: perk.id, size: nodeSize(perk) }));\r\n    this.nodes.update(data);\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    ref=\"tab\"\r\n    class=\"c-perk-tab\"\r\n  >\r\n    <PerkPointLabel />\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}