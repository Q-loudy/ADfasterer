{"remainingRequest":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\modals\\options\\BackupEntry.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\modals\\options\\BackupEntry.vue","mtime":1745241596929},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\babel-loader\\lib\\index.js","mtime":1745242219290},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745242214069},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1745242220175}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgUHJpbWFyeUJ1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvUHJpbWFyeUJ1dHRvbiI7DQoNCmltcG9ydCB7IEJBQ0tVUF9TTE9UX1RZUEUgfSBmcm9tICJAL2NvcmUvc3RvcmFnZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkJhY2t1cEVudHJ5IiwNCiAgY29tcG9uZW50czogew0KICAgIFByaW1hcnlCdXR0b24NCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBzbG90RGF0YTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGN1cnJUaW1lOiAwLA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgc2F2ZSgpIHsNCiAgICAgIHJldHVybiBHYW1lU3RvcmFnZS5sb2FkRnJvbUJhY2t1cCh0aGlzLnNsb3REYXRhLmlkKTsNCiAgICB9LA0KICAgIHByb2dyZXNzU3RyKCkgew0KICAgICAgaWYgKCF0aGlzLnNhdmUpIHJldHVybiAiKEVtcHR5KSI7DQoNCiAgICAgIC8vIFRoZXNlIHdpbGwgYmUgY2hlY2tlZCBpbiBvcmRlcjsgdGhlIGZpcnN0IG5vbnplcm8gcmVzb3VyY2Ugd2lsbCBiZSByZXR1cm5lZA0KICAgICAgY29uc3QgcmVzb3VyY2VzID0gW3RoaXMuc2F2ZS5jZWxlc3RpYWxzLnBlbGxlLnJlYWxpdHlTaGFyZHMsDQogICAgICAgIHRoaXMuc2F2ZS5yZWFsaXR5LmlNQ2FwLA0KICAgICAgICB0aGlzLnNhdmUucmVhbGl0eS5yZWFsaXR5TWFjaGluZXMsDQogICAgICAgIHRoaXMuc2F2ZS5ldGVybml0eVBvaW50cywNCiAgICAgICAgdGhpcy5zYXZlLmluZmluaXR5UG9pbnRzLA0KICAgICAgICB0aGlzLnNhdmUuYW50aW1hdHRlcg0KICAgICAgXTsNCiAgICAgIGNvbnN0IG5hbWVzID0gWyJSZWFsaXR5IFNoYXJkcyIsDQogICAgICAgICJJbWFnaW5hcnkgTWFjaGluZSBDYXAiLA0KICAgICAgICAiUmVhbGl0eSBNYWNoaW5lcyIsDQogICAgICAgICJFdGVybml0eSBQb2ludHMiLA0KICAgICAgICAiSW5maW5pdHkgUG9pbnRzIiwNCiAgICAgICAgIkFudGltYXR0ZXIiXTsNCg0KICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJlc291cmNlcy5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgY29uc3QgdmFsID0gbmV3IERlY2ltYWwocmVzb3VyY2VzW2luZGV4XSk7DQogICAgICAgIGlmICh2YWwuZ3QoMCkpIHJldHVybiBgJHtuYW1lc1tpbmRleF19OiAke2Zvcm1hdFBvc3RCcmVhayh2YWwsIDIpfWA7DQogICAgICB9DQoNCiAgICAgIC8vIEluIHByYWN0aWNlIHRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbiwgdW5sZXNzIGEgc2F2ZSB0cmlnZ2VycyBvbiB0aGUgc2FtZSB0aWNrIHRoZSB2ZXJ5IGZpcnN0IEFEMSBpcyBib3VnaHQNCiAgICAgIHJldHVybiAiTm8gcmVzb3VyY2VzIjsNCiAgICB9LA0KICAgIHNsb3RUeXBlKCkgew0KICAgICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IHRoaXMuc2xvdERhdGEuaW50ZXJ2YWxTdHI/LigpOw0KICAgICAgc3dpdGNoICh0aGlzLnNsb3REYXRhLnR5cGUpIHsNCiAgICAgICAgY2FzZSBCQUNLVVBfU0xPVF9UWVBFLk9OTElORToNCiAgICAgICAgICByZXR1cm4gYFNhdmVzIGV2ZXJ5ICR7Zm9ybWF0dGVkVGltZX0gb25saW5lYDsNCiAgICAgICAgY2FzZSBCQUNLVVBfU0xPVF9UWVBFLk9GRkxJTkU6DQogICAgICAgICAgcmV0dXJuIGBTYXZlcyBhZnRlciAke2Zvcm1hdHRlZFRpbWV9IG9mZmxpbmVgOw0KICAgICAgICBjYXNlIEJBQ0tVUF9TTE9UX1RZUEUuUkVTRVJWRToNCiAgICAgICAgICByZXR1cm4gIlByZS1sb2FkaW5nIHNhdmUiOw0KICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIGJhY2t1cCBzYXZlIHR5cGUiKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGxhc3RTYXZlZCgpIHsNCiAgICAgIGNvbnN0IGxhc3RTYXZlID0gR2FtZVN0b3JhZ2UubGFzdEJhY2t1cFRpbWVzW3RoaXMuc2xvdERhdGEuaWRdPy5kYXRlID8/IDA7DQogICAgICByZXR1cm4gbGFzdFNhdmUNCiAgICAgICAgPyBgTGFzdCBzYXZlZDogJHtUaW1lU3Bhbi5mcm9tTWlsbGlzZWNvbmRzKHRoaXMuY3VyclRpbWUgLSBsYXN0U2F2ZSl9IGFnb2ANCiAgICAgICAgOiAiU2xvdCBub3QgY3VycmVudGx5IGluIHVzZSI7DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHVwZGF0ZSgpIHsNCiAgICAgIHRoaXMuY3VyclRpbWUgPSBEYXRlLm5vdygpOw0KICAgIH0sDQogICAgbG9hZCgpIHsNCiAgICAgIGlmICghdGhpcy5zYXZlKSByZXR1cm47DQogICAgICAvLyBUaGlzIHNlZW1zIHRvIGJlIHRoZSBvbmx5IHdheSB0byBwcm9wZXJseSBoaWRlIHRoZSBtb2RhbCBhZnRlciB0aGUgc2F2ZSBpcyBwcm9wZXJseSBsb2FkZWQsDQogICAgICAvLyBzaW5jZSB0aGUgb2ZmbGluZSBwcm9ncmVzcyBtb2RhbCBhcHBlYXJzIG5lYXJseSBpbW1lZGlhdGVseSBhZnRlciBjbGlja2luZyB0aGUgYnV0dG9uDQogICAgICBNb2RhbC5oaWRlKCk7DQoNCiAgICAgIC8vIFdlIHN0aWxsIHNhdmUgdG8gdGhlIHJlc2VydmUgc2xvdCBldmVuIGlmIHdlJ3JlIGxvYWRpbmcgZnJvbSBpdCwgc28gd2UgdGVtcG9yYXJpbHkgc3RvcmUgdGhlDQogICAgICAvLyBzYXZlLXRvLWJlLWxvYWRlZCBpbnRvIGEgc3RyaW5nIGluIHRoaXMgc2NvcGUgc28gdGhhdCBpdCBkb2Vzbid0IGdldCBvdmVyd3JpdHRlbiBieSB0aGUgY3VycmVudCBzYXZlDQogICAgICBjb25zdCB0b0xvYWQgPSB0aGlzLnNhdmU7DQogICAgICBHYW1lU3RvcmFnZS5zYXZlVG9SZXNlcnZlU2xvdCgpOw0KDQogICAgICBHYW1lU3RvcmFnZS5pZ25vcmVCYWNrdXBUaW1lciA9IHRydWU7DQogICAgICBHYW1lU3RvcmFnZS5vZmZsaW5lRW5hYmxlZCA9IHBsYXllci5vcHRpb25zLmxvYWRCYWNrdXBXaXRob3V0T2ZmbGluZSA/IGZhbHNlIDogdW5kZWZpbmVkOw0KICAgICAgR2FtZVN0b3JhZ2Uub2xkQmFja3VwVGltZXIgPSBwbGF5ZXIuYmFja3VwVGltZXI7DQogICAgICBHYW1lU3RvcmFnZS5sb2FkUGxheWVyT2JqZWN0KHRvTG9hZCk7DQogICAgICBHYW1lVUkubm90aWZ5LmluZm8oYEdhbWUgbG9hZGVkIGZyb20gYmFja3VwIHNsb3QgIyR7dGhpcy5zbG90RGF0YS5pZH1gKTsNCiAgICAgIEdhbWVTdG9yYWdlLmxvYWRCYWNrdXBUaW1lcygpOw0KICAgICAgR2FtZVN0b3JhZ2UuaWdub3JlQmFja3VwVGltZXIgPSBmYWxzZTsNCiAgICAgIEdhbWVTdG9yYWdlLm9mZmxpbmVFbmFibGVkID0gdW5kZWZpbmVkOw0KICAgICAgR2FtZVN0b3JhZ2UucmVzZXRCYWNrdXBUaW1lcigpOw0KICAgICAgR2FtZVN0b3JhZ2Uuc2F2ZSh0cnVlKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["BackupEntry.vue"],"names":[],"mappings":";AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BackupEntry.vue","sourceRoot":"src/components/modals/options","sourcesContent":["<script>\r\nimport PrimaryButton from \"@/components/PrimaryButton\";\r\n\r\nimport { BACKUP_SLOT_TYPE } from \"@/core/storage\";\r\n\r\nexport default {\r\n  name: \"BackupEntry\",\r\n  components: {\r\n    PrimaryButton\r\n  },\r\n  props: {\r\n    slotData: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currTime: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    save() {\r\n      return GameStorage.loadFromBackup(this.slotData.id);\r\n    },\r\n    progressStr() {\r\n      if (!this.save) return \"(Empty)\";\r\n\r\n      // These will be checked in order; the first nonzero resource will be returned\r\n      const resources = [this.save.celestials.pelle.realityShards,\r\n        this.save.reality.iMCap,\r\n        this.save.reality.realityMachines,\r\n        this.save.eternityPoints,\r\n        this.save.infinityPoints,\r\n        this.save.antimatter\r\n      ];\r\n      const names = [\"Reality Shards\",\r\n        \"Imaginary Machine Cap\",\r\n        \"Reality Machines\",\r\n        \"Eternity Points\",\r\n        \"Infinity Points\",\r\n        \"Antimatter\"];\r\n\r\n      for (let index = 0; index < resources.length; index++) {\r\n        const val = new Decimal(resources[index]);\r\n        if (val.gt(0)) return `${names[index]}: ${formatPostBreak(val, 2)}`;\r\n      }\r\n\r\n      // In practice this should never happen, unless a save triggers on the same tick the very first AD1 is bought\r\n      return \"No resources\";\r\n    },\r\n    slotType() {\r\n      const formattedTime = this.slotData.intervalStr?.();\r\n      switch (this.slotData.type) {\r\n        case BACKUP_SLOT_TYPE.ONLINE:\r\n          return `Saves every ${formattedTime} online`;\r\n        case BACKUP_SLOT_TYPE.OFFLINE:\r\n          return `Saves after ${formattedTime} offline`;\r\n        case BACKUP_SLOT_TYPE.RESERVE:\r\n          return \"Pre-loading save\";\r\n        default:\r\n          throw new Error(\"Unrecognized backup save type\");\r\n      }\r\n    },\r\n    lastSaved() {\r\n      const lastSave = GameStorage.lastBackupTimes[this.slotData.id]?.date ?? 0;\r\n      return lastSave\r\n        ? `Last saved: ${TimeSpan.fromMilliseconds(this.currTime - lastSave)} ago`\r\n        : \"Slot not currently in use\";\r\n    },\r\n  },\r\n  methods: {\r\n    update() {\r\n      this.currTime = Date.now();\r\n    },\r\n    load() {\r\n      if (!this.save) return;\r\n      // This seems to be the only way to properly hide the modal after the save is properly loaded,\r\n      // since the offline progress modal appears nearly immediately after clicking the button\r\n      Modal.hide();\r\n\r\n      // We still save to the reserve slot even if we're loading from it, so we temporarily store the\r\n      // save-to-be-loaded into a string in this scope so that it doesn't get overwritten by the current save\r\n      const toLoad = this.save;\r\n      GameStorage.saveToReserveSlot();\r\n\r\n      GameStorage.ignoreBackupTimer = true;\r\n      GameStorage.offlineEnabled = player.options.loadBackupWithoutOffline ? false : undefined;\r\n      GameStorage.oldBackupTimer = player.backupTimer;\r\n      GameStorage.loadPlayerObject(toLoad);\r\n      GameUI.notify.info(`Game loaded from backup slot #${this.slotData.id}`);\r\n      GameStorage.loadBackupTimes();\r\n      GameStorage.ignoreBackupTimer = false;\r\n      GameStorage.offlineEnabled = undefined;\r\n      GameStorage.resetBackupTimer();\r\n      GameStorage.save(true);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-bordered-entry\">\r\n    <h3>Slot #{{ slotData.id }}:</h3>\r\n    <span>{{ progressStr }}</span>\r\n    <span>\r\n      {{ slotType }}\r\n    </span>\r\n    <span class=\"c-fixed-height\">{{ lastSaved }}</span>\r\n    <PrimaryButton\r\n      class=\"o-primary-btn--width-medium\"\r\n      :class=\"{ 'o-primary-btn--disabled' : !save }\"\r\n      @click=\"load()\"\r\n    >\r\n      Load\r\n    </PrimaryButton>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.c-bordered-entry {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  font-size: 1.1rem;\r\n  border: var(--var-border-width, 0.2rem) solid;\r\n  border-radius: var(--var-border-radius, 0.4rem);\r\n  padding: 0.5rem 0.3rem;\r\n  margin: 0.3rem;\r\n}\r\n\r\n.c-fixed-height {\r\n  height: 4rem;\r\n}\r\n</style>\r\n"]}]}