{"remainingRequest":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\modals\\ImportFilterModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\modals\\ImportFilterModal.vue","mtime":1745241596820},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\babel-loader\\lib\\index.js","mtime":1745242219290},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745242214069},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1745242220175}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgSW1wb3J0RmlsdGVyU2luZ2xlVHlwZSBmcm9tICIuL0ltcG9ydEZpbHRlclNpbmdsZVR5cGUiOw0KaW1wb3J0IE1vZGFsV3JhcHBlckNob2ljZSBmcm9tICJAL2NvbXBvbmVudHMvbW9kYWxzL01vZGFsV3JhcHBlckNob2ljZSI7DQppbXBvcnQgUHJpbWFyeUJ1dHRvbiBmcm9tICJAL2NvbXBvbmVudHMvUHJpbWFyeUJ1dHRvbiI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkltcG9ydEZpbHRlck1vZGFsIiwNCiAgY29tcG9uZW50czogew0KICAgIE1vZGFsV3JhcHBlckNob2ljZSwNCiAgICBQcmltYXJ5QnV0dG9uLA0KICAgIEltcG9ydEZpbHRlclNpbmdsZVR5cGUNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY3VycmVudFNldHRpbmdzOiB7fSwNCiAgICAgIGlucHV0OiAiIiwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGlucHV0SXNWYWxpZCgpIHsNCiAgICAgIGxldCBkZWNvZGVkOw0KICAgICAgdHJ5IHsNCiAgICAgICAgZGVjb2RlZCA9IEdhbWVTYXZlU2VyaWFsaXplci5kZWNvZGVUZXh0KHRoaXMuaW5wdXQsICJnbHlwaCBmaWx0ZXIiKTsNCiAgICAgICAgcmV0dXJuIGRlY29kZWQubGVuZ3RoID4gMCAmJiBkZWNvZGVkLm1hdGNoKC9eWzAtOSwufC8tXSokL3UpICE9PSBudWxsOw0KICAgICAgfSBjYXRjaCB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHBhcnNlZFNldHRpbmdzKCkgew0KICAgICAgaWYgKCF0aGlzLmlucHV0SXNWYWxpZCkgcmV0dXJuIG51bGw7DQoNCiAgICAgIGNvbnN0IGRlY29kZWQgPSBHYW1lU2F2ZVNlcmlhbGl6ZXIuZGVjb2RlVGV4dCh0aGlzLmlucHV0LCAiZ2x5cGggZmlsdGVyIik7DQogICAgICBjb25zdCBwYXJ0cyA9IGRlY29kZWQuc3BsaXQoInwiKTsNCiAgICAgIGNvbnN0IHR5cGVJbmZvID0ge307DQogICAgICBsZXQgcGFydEluZGV4ID0gMzsNCiAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBBTENIRU1ZX0JBU0lDX0dMWVBIX1RZUEVTKSB7DQogICAgICAgIGlmICghdHlwZSkgY29udGludWU7DQogICAgICAgIGNvbnN0IHN1YnBhcnRzID0gcGFydHNbcGFydEluZGV4XS5zcGxpdCgiLCIpOw0KICAgICAgICB0eXBlSW5mb1t0eXBlXSA9IHsNCiAgICAgICAgICByYXJpdHk6IE51bWJlcihzdWJwYXJ0c1swXSksDQogICAgICAgICAgc2NvcmU6IE51bWJlcihzdWJwYXJ0c1sxXSksDQogICAgICAgICAgZWZmZWN0Q291bnQ6IE51bWJlcihzdWJwYXJ0c1syXSksDQogICAgICAgICAgc3BlY2lmaWVkTWFzazogTnVtYmVyKHN1YnBhcnRzWzNdKSwNCiAgICAgICAgICBlZmZlY3RTY29yZXM6IHN1YnBhcnRzWzRdLnNwbGl0KCIvIikubWFwKHMgPT4gTnVtYmVyKHMpKSwNCiAgICAgICAgfTsNCiAgICAgICAgcGFydEluZGV4Kys7DQogICAgICB9DQoNCiAgICAgIHJldHVybiB7DQogICAgICAgIHNlbGVjdDogTnVtYmVyKHBhcnRzWzBdKSwNCiAgICAgICAgc2ltcGxlOiBOdW1iZXIocGFydHNbMV0pLA0KICAgICAgICB0cmFzaDogTnVtYmVyKHBhcnRzWzJdKSwNCiAgICAgICAgdHlwZXM6IHR5cGVJbmZvLA0KICAgICAgfTsNCiAgICB9LA0KICAgIHNlbGVjdFN0cigpIHsNCiAgICAgIHJldHVybiB0aGlzLmNoYW5nZWRWYWx1ZSh0aGlzLnBhcnNlZFNldHRpbmdzLnNlbGVjdCwgdGhpcy5jdXJyZW50U2V0dGluZ3Muc2VsZWN0LA0KICAgICAgICB4ID0+IEF1dG9HbHlwaFByb2Nlc3Nvci5maWx0ZXJNb2RlTmFtZSh4KSk7DQogICAgfSwNCiAgICBiYXNpY0NvdW50U3RyKCkgew0KICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlZFZhbHVlKHRoaXMucGFyc2VkU2V0dGluZ3Muc2ltcGxlLCB0aGlzLmN1cnJlbnRTZXR0aW5ncy5zaW1wbGUsIGZvcm1hdEludCk7DQogICAgfSwNCiAgICB0cmFzaFN0cigpIHsNCiAgICAgIHJldHVybiB0aGlzLmNoYW5nZWRWYWx1ZSh0aGlzLnBhcnNlZFNldHRpbmdzLnRyYXNoLCB0aGlzLmN1cnJlbnRTZXR0aW5ncy50cmFzaCwNCiAgICAgICAgeCA9PiBBdXRvR2x5cGhQcm9jZXNzb3IudHJhc2hNb2RlRGVzYyh4KSk7DQogICAgfSwNCiAgICAvLyBIaWRlIGVmZmFyaWcgaWYgaXQgaGFzbid0IGJlZW4gdW5sb2NrZWQgeWV0DQogICAgYXZhaWxhYmxlVHlwZXMoKSB7DQogICAgICByZXR1cm4gQUxDSEVNWV9CQVNJQ19HTFlQSF9UWVBFUy5maWx0ZXIodCA9PiAhR2x5cGhUeXBlcy5sb2NrZWQubWFwKGUgPT4gZS5pZCkuaW5jbHVkZXModCkpOw0KICAgIH0sDQogICAgc2V0dGluZ1Rvb2x0aXBUZXh0KCkgew0KICAgICAgcmV0dXJuIGBNb3VzZW92ZXIgZWFjaCBib3ggZm9yIG1vcmUgZGV0YWlscy4g4pyUIGFuZCDinJggc3ltYm9scyBkZW5vdGUgYW4gZWZmZWN0DQogICAgICAgIHNlbGVjdGVkL3Vuc2VsZWN0ZWQgZm9yIFNwZWNpZmllZCBFZmZlY3QgbW9kZS5gOw0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLiRyZWZzLmlucHV0LnNlbGVjdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgdXBkYXRlKCkgew0KICAgICAgdGhpcy5jdXJyZW50U2V0dGluZ3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBsYXllci5yZWFsaXR5LmdseXBocy5maWx0ZXIpKTsNCiAgICB9LA0KICAgIGNoYW5nZWRWYWx1ZShvbGRWYWwsIG5ld1ZhbCwgYXBwbHlGbikgew0KICAgICAgaWYgKG9sZFZhbCA9PT0gbmV3VmFsKSByZXR1cm4gIihObyBjaGFuZ2UpIjsNCiAgICAgIHJldHVybiBgJHthcHBseUZuKG9sZFZhbCl9IOKenCAke2FwcGx5Rm4obmV3VmFsKX1gOw0KICAgIH0sDQogICAgaW1wb3J0RmlsdGVyKCkgew0KICAgICAgaWYgKHRoaXMucGFyc2VkU2V0dGluZ3MgPT09IG51bGwpIHJldHVybjsNCiAgICAgIHRoaXMuZW1pdENsb3NlKCk7DQogICAgICBwbGF5ZXIucmVhbGl0eS5nbHlwaHMuZmlsdGVyID0gdGhpcy5wYXJzZWRTZXR0aW5nczsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["ImportFilterModal.vue"],"names":[],"mappings":";AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ImportFilterModal.vue","sourceRoot":"src/components/modals","sourcesContent":["<script>\r\nimport ImportFilterSingleType from \"./ImportFilterSingleType\";\r\nimport ModalWrapperChoice from \"@/components/modals/ModalWrapperChoice\";\r\nimport PrimaryButton from \"@/components/PrimaryButton\";\r\n\r\nexport default {\r\n  name: \"ImportFilterModal\",\r\n  components: {\r\n    ModalWrapperChoice,\r\n    PrimaryButton,\r\n    ImportFilterSingleType\r\n  },\r\n  data() {\r\n    return {\r\n      currentSettings: {},\r\n      input: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    inputIsValid() {\r\n      let decoded;\r\n      try {\r\n        decoded = GameSaveSerializer.decodeText(this.input, \"glyph filter\");\r\n        return decoded.length > 0 && decoded.match(/^[0-9,.|/-]*$/u) !== null;\r\n      } catch {\r\n        return false;\r\n      }\r\n    },\r\n    parsedSettings() {\r\n      if (!this.inputIsValid) return null;\r\n\r\n      const decoded = GameSaveSerializer.decodeText(this.input, \"glyph filter\");\r\n      const parts = decoded.split(\"|\");\r\n      const typeInfo = {};\r\n      let partIndex = 3;\r\n      for (const type of ALCHEMY_BASIC_GLYPH_TYPES) {\r\n        if (!type) continue;\r\n        const subparts = parts[partIndex].split(\",\");\r\n        typeInfo[type] = {\r\n          rarity: Number(subparts[0]),\r\n          score: Number(subparts[1]),\r\n          effectCount: Number(subparts[2]),\r\n          specifiedMask: Number(subparts[3]),\r\n          effectScores: subparts[4].split(\"/\").map(s => Number(s)),\r\n        };\r\n        partIndex++;\r\n      }\r\n\r\n      return {\r\n        select: Number(parts[0]),\r\n        simple: Number(parts[1]),\r\n        trash: Number(parts[2]),\r\n        types: typeInfo,\r\n      };\r\n    },\r\n    selectStr() {\r\n      return this.changedValue(this.parsedSettings.select, this.currentSettings.select,\r\n        x => AutoGlyphProcessor.filterModeName(x));\r\n    },\r\n    basicCountStr() {\r\n      return this.changedValue(this.parsedSettings.simple, this.currentSettings.simple, formatInt);\r\n    },\r\n    trashStr() {\r\n      return this.changedValue(this.parsedSettings.trash, this.currentSettings.trash,\r\n        x => AutoGlyphProcessor.trashModeDesc(x));\r\n    },\r\n    // Hide effarig if it hasn't been unlocked yet\r\n    availableTypes() {\r\n      return ALCHEMY_BASIC_GLYPH_TYPES.filter(t => !GlyphTypes.locked.map(e => e.id).includes(t));\r\n    },\r\n    settingTooltipText() {\r\n      return `Mouseover each box for more details. ✔ and ✘ symbols denote an effect\r\n        selected/unselected for Specified Effect mode.`;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$refs.input.select();\r\n  },\r\n  methods: {\r\n    update() {\r\n      this.currentSettings = JSON.parse(JSON.stringify(player.reality.glyphs.filter));\r\n    },\r\n    changedValue(oldVal, newVal, applyFn) {\r\n      if (oldVal === newVal) return \"(No change)\";\r\n      return `${applyFn(oldVal)} ➜ ${applyFn(newVal)}`;\r\n    },\r\n    importFilter() {\r\n      if (this.parsedSettings === null) return;\r\n      this.emitClose();\r\n      player.reality.glyphs.filter = this.parsedSettings;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <ModalWrapperChoice\r\n    :show-cancel=\"!inputIsValid\"\r\n    :show-confirm=\"false\"\r\n  >\r\n    <template #header>\r\n      Import Glyph filter settings\r\n    </template>\r\n    Note: Importing Glyph filter options will overwrite settings\r\n    <br>\r\n    in all filter modes, not just the currently-selected one.\r\n    <input\r\n      ref=\"input\"\r\n      v-model=\"input\"\r\n      type=\"text\"\r\n      class=\"c-modal-input c-modal-import__input\"\r\n      @keyup.enter=\"importSave\"\r\n      @keyup.esc=\"emitClose\"\r\n    >\r\n    <div class=\"c-modal-import__save-info\">\r\n      <div v-if=\"!input\" />\r\n      <div v-else-if=\"inputIsValid\">\r\n        <b>Selection mode:</b> {{ selectStr }}\r\n        <br>\r\n        <b>Effect Count (\"Number of Effects\"):</b> {{ basicCountStr }}\r\n        <br>\r\n        <b>Rejected Glyphs:</b> {{ trashStr }}\r\n        <br>\r\n        <u><b>Type-specific Settings</b></u> <span :ach-tooltip=\"settingTooltipText\">\r\n          <i class=\"fas fa-question-circle\" />\r\n        </span>\r\n        <br>\r\n        <ImportFilterSingleType\r\n          v-for=\"type in availableTypes\"\r\n          :key=\"type\"\r\n          class=\"c-single-type\"\r\n          :type=\"type\"\r\n          :curr-settings=\"currentSettings.types[type]\"\r\n          :new-settings=\"parsedSettings.types[type]\"\r\n        />\r\n      </div>\r\n      <div v-else>\r\n        Not a valid Glyph filter string\r\n      </div>\r\n    </div>\r\n\r\n    <PrimaryButton\r\n      v-if=\"inputIsValid\"\r\n      class=\"o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn\"\r\n      @click=\"importFilter\"\r\n    >\r\n      Import\r\n    </PrimaryButton>\r\n  </ModalWrapperChoice>\r\n</template>\r\n\r\n<style scoped>\r\n.c-single-type {\r\n  left: 0;\r\n  text-align: left;\r\n  padding: 0.5rem;\r\n}\r\n</style>\r\n"]}]}