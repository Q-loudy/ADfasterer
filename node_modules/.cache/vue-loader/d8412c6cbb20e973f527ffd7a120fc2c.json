{"remainingRequest":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\automator\\AutomatorBlockSingleRow.vue?vue&type=style&index=0&id=4422917d&scoped=true&lang=css&","dependencies":[{"path":"C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\automator\\AutomatorBlockSingleRow.vue","mtime":1745241597062},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\css-loader\\dist\\cjs.js","mtime":1745242216572},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\loaders\\stylePostLoader.js","mtime":1745242222796},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\postcss-loader\\dist\\cjs.js","mtime":1745242214022},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745242214069},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1745242220175}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmMtYXV0b21hdG9yLWJsb2NrLXJvdy0tY29udGFpbmVyIHsNCiAgbWFyZ2luOiAtMC4wMDJyZW07DQogIC8qIFRoZSBvbmx5IHB1cnBvc2Ugb2YgdGhpcyBpcyB0byBwcmV2ZW50IG1hcmdpbiBvdmVybGFwcGluZyBzbyB0aGUgbmVzdGVkIGJsb2NrcyBjYW4gZml0IG5pY2VyICovDQogIHBhZGRpbmc6IDAuMDAycmVtOw0KfQ0KDQoubC1hdXRvbWF0b3ItbmVzdGVkLWJsb2NrIHsNCiAgd2lkdGg6IGZpdC1jb250ZW50Ow0KICBtaW4td2lkdGg6IDMwcmVtOw0KICBtaW4taGVpZ2h0OiAzLjY1cmVtOw0KICBib3JkZXI6IDAuMXJlbSBkb3R0ZWQgIzU1ZmY1NTsNCiAgbWFyZ2luOiAtMC4xcmVtIDAgLTAuMXJlbSAzcmVtOw0KICBwYWRkaW5nOiAwIDAuNXJlbTsNCn0NCg=="},{"version":3,"sources":["AutomatorBlockSingleRow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AutomatorBlockSingleRow.vue","sourceRoot":"src/components/tabs/automator","sourcesContent":["<script>\r\nimport draggable from \"vuedraggable\";\r\n\r\nimport AutomatorBlockSingleInput from \"./AutomatorBlockSingleInput\";\r\n\r\nexport default {\r\n  name: \"AutomatorBlockSingleRow\",\r\n  components: {\r\n    draggable,\r\n    AutomatorBlockSingleInput\r\n  },\r\n  props: {\r\n    block: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    updateBlock: {\r\n      type: Function,\r\n      required: true\r\n    },\r\n    deleteBlock: {\r\n      type: Function,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      b: {},\r\n      activeLine: -1,\r\n      eventLine: -1,\r\n      errorLine: -1,\r\n    };\r\n  },\r\n  computed: {\r\n    lineNumber() {\r\n      return BlockAutomator.lineNumberFromBlockID(this.b.id);\r\n    },\r\n    isActiveLine() {\r\n      return this.lineNumber === this.activeLine;\r\n    },\r\n    isEventLine() {\r\n      return this.lineNumber === this.eventLine;\r\n    },\r\n    isErrorLine() {\r\n      return this.lineNumber === this.errorLine;\r\n    },\r\n  },\r\n  created() {\r\n    this.recalculateErrorCount();\r\n  },\r\n  destroyed() {\r\n    this.recalculateErrorCount();\r\n  },\r\n  mounted() {\r\n    this.b = this.block;\r\n  },\r\n  methods: {\r\n    update() {\r\n      const lines = AutomatorHighlighter.lines;\r\n      this.activeLine = lines.active;\r\n      this.eventLine = lines.event;\r\n      this.errorLine = lines.error;\r\n    },\r\n    parseRequest() {\r\n      BlockAutomator.parseTextFromBlocks();\r\n    },\r\n    deleteBlockFromNest(id) {\r\n      const idx = this.b.nest.findIndex(x => x.id === id);\r\n      this.b.nest.splice(idx, 1);\r\n    },\r\n    updateBlockFromNest(block, id) {\r\n      this.$set(this.b.nest, this.b.nest.findIndex(x => x.id === id), block);\r\n      this.parseRequest();\r\n    },\r\n\r\n    // Not entirely sure why, but updating error count only seems to work if it's done exactly here in the execution\r\n    // stack; moving it to the definition of updateBlock seems to stop it from working\r\n    removeBlock(block, id) {\r\n      this.deleteBlock(block, id);\r\n      this.recalculateErrorCount();\r\n    },\r\n\r\n    // This gets called whenever blocks are changed, but we also need to halt execution if the currently visible script\r\n    // is also the one being run\r\n    recalculateErrorCount() {\r\n      AutomatorData.recalculateErrors();\r\n      if (AutomatorBackend.currentEditingScript.id === AutomatorBackend.currentRunningScript.id) {\r\n        AutomatorBackend.stop();\r\n      }\r\n    },\r\n\r\n    highlightClass() {\r\n      return {\r\n        \"c-automator-block-row-active\": this.isActiveLine,\r\n        \"c-automator-block-row-event\": this.isEventLine,\r\n        \"c-automator-block-row-error\": this.isErrorLine\r\n      };\r\n    },\r\n    // The target value is either a String or some kind of a number - we need to force it to be a String for the\r\n    // component type-checking (Numbers are implicitly cast, but Decimals are not)\r\n    nextSelection() {\r\n      const val = this.b.targets ? this.b[this.b.targets[0]] : \"\";\r\n      return val;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"c-automator-block-row--container\">\r\n    <div\r\n      class=\"c-automator-block-row\"\r\n      :class=\"highlightClass()\"\r\n    >\r\n      <AutomatorBlockSingleInput\r\n        :constant=\"b.alias ? b.alias : b.cmd\"\r\n        :block=\"b\"\r\n        :update-function=\"updateBlock\"\r\n      />\r\n      <AutomatorBlockSingleInput\r\n        v-if=\"b.canWait\"\r\n        :block=\"b\"\r\n        block-target=\"nowait\"\r\n        :initial-selection=\"b.nowait ? 'NOWAIT' : ''\"\r\n        :update-function=\"updateBlock\"\r\n      />\r\n      <AutomatorBlockSingleInput\r\n        v-if=\"b.canRespec\"\r\n        :block=\"b\"\r\n        block-target=\"respec\"\r\n        :initial-selection=\"b.respec ? 'RESPEC' : ''\"\r\n        :update-function=\"updateBlock\"\r\n      />\r\n      <AutomatorBlockSingleInput\r\n        v-if=\"b.allowedPatterns\"\r\n        :block=\"b\"\r\n        :block-target=\"b.targets[0]\"\r\n        :patterns=\"b.allowedPatterns\"\r\n        :initial-selection=\"nextSelection()\"\r\n        :update-function=\"updateBlock\"\r\n        :recursive=\"true\"\r\n      />\r\n      <div\r\n        class=\"o-automator-block-delete\"\r\n        @click=\"removeBlock(b.id)\"\r\n      >\r\n        X\r\n      </div>\r\n    </div>\r\n    <draggable\r\n      v-if=\"block.nested\"\r\n      v-model=\"block.nest\"\r\n      class=\"l-automator-nested-block\"\r\n      group=\"code-blocks\"\r\n    >\r\n      <AutomatorBlockSingleRow\r\n        v-for=\"subblock in block.nest\"\r\n        :key=\"subblock.id\"\r\n        :block=\"subblock\"\r\n        :update-block=\"updateBlockFromNest\"\r\n        :delete-block=\"deleteBlockFromNest\"\r\n      />\r\n    </draggable>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.c-automator-block-row--container {\r\n  margin: -0.002rem;\r\n  /* The only purpose of this is to prevent margin overlapping so the nested blocks can fit nicer */\r\n  padding: 0.002rem;\r\n}\r\n\r\n.l-automator-nested-block {\r\n  width: fit-content;\r\n  min-width: 30rem;\r\n  min-height: 3.65rem;\r\n  border: 0.1rem dotted #55ff55;\r\n  margin: -0.1rem 0 -0.1rem 3rem;\r\n  padding: 0 0.5rem;\r\n}\r\n</style>\r\n"]}]}