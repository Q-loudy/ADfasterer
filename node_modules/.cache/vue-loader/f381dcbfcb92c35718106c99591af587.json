{"remainingRequest":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\time-studies\\TimeStudiesTab.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Games\\ADFasterer\\ADfasterer\\src\\components\\tabs\\time-studies\\TimeStudiesTab.vue","mtime":1745241597469},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\babel-loader\\lib\\index.js","mtime":1745242219290},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745242214069},{"path":"C:\\Games\\ADFasterer\\ADfasterer\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1745242220175}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBTVFVEWV9UUkVFX0xBWU9VVF9UWVBFLCBUaW1lU3R1ZHlUcmVlTGF5b3V0IH0gZnJvbSAiLi90aW1lLXN0dWR5LXRyZWUtbGF5b3V0IjsNCg0KaW1wb3J0IERpbGF0aW9uVGltZVN0dWR5IGZyb20gIi4vRGlsYXRpb25UaW1lU3R1ZHkiOw0KaW1wb3J0IEVDVGltZVN0dWR5IGZyb20gIi4vRUNUaW1lU3R1ZHkiOw0KaW1wb3J0IEVuc2xhdmVkVGltZVN0dWR5IGZyb20gIi4vRW5zbGF2ZWRUaW1lU3R1ZHkiOw0KaW1wb3J0IEhpZGRlblRpbWVTdHVkeUNvbm5lY3Rpb24gZnJvbSAiLi9IaWRkZW5UaW1lU3R1ZHlDb25uZWN0aW9uIjsNCmltcG9ydCBOb3JtYWxUaW1lU3R1ZHkgZnJvbSAiLi9Ob3JtYWxUaW1lU3R1ZHkiOw0KaW1wb3J0IFByaW1hcnlCdXR0b24gZnJvbSAiQC9jb21wb25lbnRzL1ByaW1hcnlCdXR0b24iOw0KaW1wb3J0IFNlY3JldFRpbWVTdHVkeSBmcm9tICIuL1NlY3JldFRpbWVTdHVkeSI7DQppbXBvcnQgVGltZVN0dWR5Q29ubmVjdGlvbiBmcm9tICIuL1RpbWVTdHVkeUNvbm5lY3Rpb24iOw0KaW1wb3J0IFRyaWFkVGltZVN0dWR5IGZyb20gIi4vVHJpYWRUaW1lU3R1ZHkiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJUaW1lU3R1ZGllc1RhYiIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBQcmltYXJ5QnV0dG9uLA0KICAgIE5vcm1hbFRpbWVTdHVkeSwNCiAgICBFQ1RpbWVTdHVkeSwNCiAgICBFbnNsYXZlZFRpbWVTdHVkeSwNCiAgICBEaWxhdGlvblRpbWVTdHVkeSwNCiAgICBUcmlhZFRpbWVTdHVkeSwNCiAgICBTZWNyZXRUaW1lU3R1ZHksDQogICAgVGltZVN0dWR5Q29ubmVjdGlvbiwNCiAgICBIaWRkZW5UaW1lU3R1ZHlDb25uZWN0aW9uDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHJlc3BlYzogcGxheWVyLnJlc3BlYywNCiAgICAgIGxheW91dFR5cGU6IFNUVURZX1RSRUVfTEFZT1VUX1RZUEUuTk9STUFMLA0KICAgICAgdkxldmVsOiAwLA0KICAgICAgcmVuZGVyZWRTdHVkeUNvdW50OiAwLA0KICAgICAgcmVuZGVyZWRDb25uZWN0aW9uQ291bnQ6IDAsDQogICAgICBpc0Vuc2xhdmVkOiBmYWxzZSwNCiAgICAgIGRlbGF5VGltZXI6IDAsDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBsYXlvdXQoKSB7DQogICAgICByZXR1cm4gVGltZVN0dWR5VHJlZUxheW91dC5jcmVhdGUodGhpcy5sYXlvdXRUeXBlKTsNCiAgICB9LA0KICAgIGFsbFN0dWRpZXMoKSB7DQogICAgICByZXR1cm4gdGhpcy5sYXlvdXQuc3R1ZGllczsNCiAgICB9LA0KICAgIHN0dWRpZXMoKSB7DQogICAgICByZXR1cm4gdGhpcy5hbGxTdHVkaWVzLnNsaWNlKDAsIHRoaXMucmVuZGVyZWRTdHVkeUNvdW50KTsNCiAgICB9LA0KICAgIGFsbENvbm5lY3Rpb25zKCkgew0KICAgICAgcmV0dXJuIHRoaXMubGF5b3V0LmNvbm5lY3Rpb25zOw0KICAgIH0sDQogICAgY29ubmVjdGlvbnMoKSB7DQogICAgICByZXR1cm4gdGhpcy5hbGxDb25uZWN0aW9ucy5zbGljZSgwLCB0aGlzLnJlbmRlcmVkQ29ubmVjdGlvbkNvdW50KTsNCiAgICB9LA0KICAgIHRyZWVTdHlsZU9iamVjdCgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHdpZHRoOiBgJHt0aGlzLmxheW91dC53aWR0aH1yZW1gLA0KICAgICAgICBoZWlnaHQ6IGAke3RoaXMubGF5b3V0LmhlaWdodH1yZW1gDQogICAgICB9Ow0KICAgIH0sDQogICAgcmVzcGVjQ2xhc3NPYmplY3QoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICAiby1wcmltYXJ5LWJ0bi0tc3VidGFiLW9wdGlvbiI6IHRydWUsDQogICAgICAgICJvLXByaW1hcnktYnRuLS1yZXNwZWMtYWN0aXZlIjogdGhpcy5yZXNwZWMNCiAgICAgIH07DQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIHJlc3BlYyhuZXdWYWx1ZSkgew0KICAgICAgcGxheWVyLnJlc3BlYyA9IG5ld1ZhbHVlOw0KICAgIH0sDQogICAgdkxldmVsKCkgew0KICAgICAgLy8gV2hlbiB2TGV2ZWwgY2hhbmdlcywgd2UgcmVjb21wdXRlIHRoZSBzdHVkeSB0cmVlIGJlY2F1c2Ugb2YgdHJpYWQgc3R1ZGllcw0KICAgICAgdGhpcy4kcmVjb21wdXRlKCJsYXlvdXQiKTsNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgY29uc3QgaW5jcmVtZW50UmVuZGVyZWRDb3VudCA9ICgpID0+IHsNCiAgICAgIGxldCBzaG91bGRSZXF1ZXN0TmV4dEZyYW1lID0gZmFsc2U7DQogICAgICBpZiAodGhpcy5yZW5kZXJlZFN0dWR5Q291bnQgPCB0aGlzLmFsbFN0dWRpZXMubGVuZ3RoKSB7DQogICAgICAgIHRoaXMucmVuZGVyZWRTdHVkeUNvdW50ICs9IDI7DQogICAgICAgIHNob3VsZFJlcXVlc3ROZXh0RnJhbWUgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMucmVuZGVyZWRDb25uZWN0aW9uQ291bnQgPCB0aGlzLmFsbENvbm5lY3Rpb25zLmxlbmd0aCkgew0KICAgICAgICB0aGlzLnJlbmRlcmVkQ29ubmVjdGlvbkNvdW50ICs9IDI7DQogICAgICAgIHNob3VsZFJlcXVlc3ROZXh0RnJhbWUgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgaWYgKHNob3VsZFJlcXVlc3ROZXh0RnJhbWUpIHsNCiAgICAgICAgdGhpcy5yZW5kZXJBbmltYXRpb25JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShpbmNyZW1lbnRSZW5kZXJlZENvdW50KTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIGluY3JlbWVudFJlbmRlcmVkQ291bnQoKTsNCg0KICAgIC8vIENTUyBjb250cm9sbGluZyB0aGUgZmFkZSBpbi9vdXQgZm9yIHRoZSBFbnNsYXZlZCBzdHVkeSBpcyBhbiBhbmltYXRpb24gaGFwcGVuaW5nIG92ZXIgdGhlIGNvdXJzZSBvZiAxIHNlY29uZC4NCiAgICAvLyBSZW1vdmluZyBpdCBub3JtYWxseSB2aWEga2V5LXN3aXRjaGluZyBlbmRzIHVwIGdldHRpbmcgcmlkIG9mIGl0IGltbWVkaWF0ZWx5IHdpdGhvdXQgYW5pbWF0aW5nLCB3aGljaCB3ZSBkbyBpZiBpdA0KICAgIC8vIHdhc24ndCBwdXJjaGFzZWQgLSBvdGhlcndpc2UgaXQgYW5pbWF0ZXMgdG8gdGhlIHVuYm91Z2h0IHN0YXRlIGFuZCB0aGVuIHJlbW92ZSBpdCBhZnRlciB0aGUgYW5pbWF0aW9uIGZpbmlzaGVzLg0KICAgIHRoaXMub24kKEdBTUVfRVZFTlQuUkVBTElUWV9SRVNFVF9BRlRFUiwgKCkgPT4gew0KICAgICAgdGhpcy5kZWxheVRpbWVyID0gcGxheWVyLmNlbGVzdGlhbHMuZW5zbGF2ZWQuaGFzU2VjcmV0U3R1ZHkNCiAgICAgICAgPyBEYXRlLm5vdygpDQogICAgICAgIDogMDsNCiAgICB9KTsNCg0KICAgIC8vIFNjcm9sbCB0byB0b3AgYmVjYXVzZSB0aW1lIHN0dWRpZXMgdGFiIGlzIHJlbmRlcmVkIHByb2dyZXNzaXZlbHkNCiAgICAvLyBhbmQgd2UgZG9uJ3Qgd2FudCB0aGUgcGxheWVyIHRvIHNlZSBlbXB0eSBzcGFjZSB3aGlsZSBpdCdzIGxvYWRpbmcuDQogICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSAwOw0KICB9LA0KICBiZWZvcmVEZXN0cm95KCkgew0KICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyQW5pbWF0aW9uSWQpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgdXBkYXRlKCkgew0KICAgICAgdGhpcy5yZXNwZWMgPSBwbGF5ZXIucmVzcGVjOw0KICAgICAgdGhpcy5sYXlvdXRUeXBlID0gU1RVRFlfVFJFRV9MQVlPVVRfVFlQRS5jdXJyZW50Ow0KICAgICAgdGhpcy52TGV2ZWwgPSBSYS5wZXRzLnYubGV2ZWw7DQogICAgICB0aGlzLmlzRW5zbGF2ZWQgPSBFbnNsYXZlZC5pc1J1bm5pbmcgfHwgRGF0ZS5ub3coKSAtIHRoaXMuZGVsYXlUaW1lciA8IDEwMDA7DQogICAgfSwNCiAgICBzdHVkeUNvbXBvbmVudChzdHVkeSkgew0KICAgICAgc3dpdGNoIChzdHVkeS50eXBlKSB7DQogICAgICAgIGNhc2UgVElNRV9TVFVEWV9UWVBFLk5PUk1BTDogcmV0dXJuIE5vcm1hbFRpbWVTdHVkeTsNCiAgICAgICAgY2FzZSBUSU1FX1NUVURZX1RZUEUuRVRFUk5JVFlfQ0hBTExFTkdFOiByZXR1cm4gRUNUaW1lU3R1ZHk7DQogICAgICAgIGNhc2UgVElNRV9TVFVEWV9UWVBFLkRJTEFUSU9OOiByZXR1cm4gRGlsYXRpb25UaW1lU3R1ZHk7DQogICAgICAgIGNhc2UgVElNRV9TVFVEWV9UWVBFLlRSSUFEOiByZXR1cm4gVHJpYWRUaW1lU3R1ZHk7DQogICAgICB9DQogICAgICB0aHJvdyAiVW5rbm93biBUaW1lIFN0dWR5IHR5cGUiOw0KICAgIH0sDQogICAgZXhwb3J0U3R1ZHlUcmVlKCkgew0KICAgICAgaWYgKHBsYXllci50aW1lc3R1ZHkuc3R1ZGllcy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgR2FtZVVJLm5vdGlmeS5lcnJvcigiWW91IGNhbm5vdCBleHBvcnQgYW4gZW1wdHkgVGltZSBTdHVkeSBUcmVlISIpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY29weVRvQ2xpcGJvYXJkKEdhbWVDYWNoZS5jdXJyZW50U3R1ZHlUcmVlLnZhbHVlLmV4cG9ydFN0cmluZyk7DQogICAgICAgIEdhbWVVSS5ub3RpZnkuaW5mbygiRXhwb3J0ZWQgY3VycmVudCBUaW1lIFN0dWRpZXMgdG8geW91ciBjbGlwYm9hcmQiKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["TimeStudiesTab.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TimeStudiesTab.vue","sourceRoot":"src/components/tabs/time-studies","sourcesContent":["<script>\r\nimport { STUDY_TREE_LAYOUT_TYPE, TimeStudyTreeLayout } from \"./time-study-tree-layout\";\r\n\r\nimport DilationTimeStudy from \"./DilationTimeStudy\";\r\nimport ECTimeStudy from \"./ECTimeStudy\";\r\nimport EnslavedTimeStudy from \"./EnslavedTimeStudy\";\r\nimport HiddenTimeStudyConnection from \"./HiddenTimeStudyConnection\";\r\nimport NormalTimeStudy from \"./NormalTimeStudy\";\r\nimport PrimaryButton from \"@/components/PrimaryButton\";\r\nimport SecretTimeStudy from \"./SecretTimeStudy\";\r\nimport TimeStudyConnection from \"./TimeStudyConnection\";\r\nimport TriadTimeStudy from \"./TriadTimeStudy\";\r\n\r\nexport default {\r\n  name: \"TimeStudiesTab\",\r\n  components: {\r\n    PrimaryButton,\r\n    NormalTimeStudy,\r\n    ECTimeStudy,\r\n    EnslavedTimeStudy,\r\n    DilationTimeStudy,\r\n    TriadTimeStudy,\r\n    SecretTimeStudy,\r\n    TimeStudyConnection,\r\n    HiddenTimeStudyConnection\r\n  },\r\n  data() {\r\n    return {\r\n      respec: player.respec,\r\n      layoutType: STUDY_TREE_LAYOUT_TYPE.NORMAL,\r\n      vLevel: 0,\r\n      renderedStudyCount: 0,\r\n      renderedConnectionCount: 0,\r\n      isEnslaved: false,\r\n      delayTimer: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    layout() {\r\n      return TimeStudyTreeLayout.create(this.layoutType);\r\n    },\r\n    allStudies() {\r\n      return this.layout.studies;\r\n    },\r\n    studies() {\r\n      return this.allStudies.slice(0, this.renderedStudyCount);\r\n    },\r\n    allConnections() {\r\n      return this.layout.connections;\r\n    },\r\n    connections() {\r\n      return this.allConnections.slice(0, this.renderedConnectionCount);\r\n    },\r\n    treeStyleObject() {\r\n      return {\r\n        width: `${this.layout.width}rem`,\r\n        height: `${this.layout.height}rem`\r\n      };\r\n    },\r\n    respecClassObject() {\r\n      return {\r\n        \"o-primary-btn--subtab-option\": true,\r\n        \"o-primary-btn--respec-active\": this.respec\r\n      };\r\n    }\r\n  },\r\n  watch: {\r\n    respec(newValue) {\r\n      player.respec = newValue;\r\n    },\r\n    vLevel() {\r\n      // When vLevel changes, we recompute the study tree because of triad studies\r\n      this.$recompute(\"layout\");\r\n    }\r\n  },\r\n  created() {\r\n    const incrementRenderedCount = () => {\r\n      let shouldRequestNextFrame = false;\r\n      if (this.renderedStudyCount < this.allStudies.length) {\r\n        this.renderedStudyCount += 2;\r\n        shouldRequestNextFrame = true;\r\n      }\r\n      if (this.renderedConnectionCount < this.allConnections.length) {\r\n        this.renderedConnectionCount += 2;\r\n        shouldRequestNextFrame = true;\r\n      }\r\n      if (shouldRequestNextFrame) {\r\n        this.renderAnimationId = requestAnimationFrame(incrementRenderedCount);\r\n      }\r\n    };\r\n    incrementRenderedCount();\r\n\r\n    // CSS controlling the fade in/out for the Enslaved study is an animation happening over the course of 1 second.\r\n    // Removing it normally via key-switching ends up getting rid of it immediately without animating, which we do if it\r\n    // wasn't purchased - otherwise it animates to the unbought state and then remove it after the animation finishes.\r\n    this.on$(GAME_EVENT.REALITY_RESET_AFTER, () => {\r\n      this.delayTimer = player.celestials.enslaved.hasSecretStudy\r\n        ? Date.now()\r\n        : 0;\r\n    });\r\n\r\n    // Scroll to top because time studies tab is rendered progressively\r\n    // and we don't want the player to see empty space while it's loading.\r\n    document.body.scrollTop = 0;\r\n  },\r\n  beforeDestroy() {\r\n    cancelAnimationFrame(this.renderAnimationId);\r\n  },\r\n  methods: {\r\n    update() {\r\n      this.respec = player.respec;\r\n      this.layoutType = STUDY_TREE_LAYOUT_TYPE.current;\r\n      this.vLevel = Ra.pets.v.level;\r\n      this.isEnslaved = Enslaved.isRunning || Date.now() - this.delayTimer < 1000;\r\n    },\r\n    studyComponent(study) {\r\n      switch (study.type) {\r\n        case TIME_STUDY_TYPE.NORMAL: return NormalTimeStudy;\r\n        case TIME_STUDY_TYPE.ETERNITY_CHALLENGE: return ECTimeStudy;\r\n        case TIME_STUDY_TYPE.DILATION: return DilationTimeStudy;\r\n        case TIME_STUDY_TYPE.TRIAD: return TriadTimeStudy;\r\n      }\r\n      throw \"Unknown Time Study type\";\r\n    },\r\n    exportStudyTree() {\r\n      if (player.timestudy.studies.length === 0) {\r\n        GameUI.notify.error(\"You cannot export an empty Time Study Tree!\");\r\n      } else {\r\n        copyToClipboard(GameCache.currentStudyTree.value.exportString);\r\n        GameUI.notify.info(\"Exported current Time Studies to your clipboard\");\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"l-time-studies-tab\">\r\n    <div class=\"c-subtab-option-container\">\r\n      <PrimaryButton\r\n        class=\"o-primary-btn--subtab-option\"\r\n        @click=\"exportStudyTree\"\r\n      >\r\n        Export tree\r\n      </PrimaryButton>\r\n      <PrimaryButton\r\n        :class=\"respecClassObject\"\r\n        @click=\"respec = !respec\"\r\n      >\r\n        Respec Time Studies on next Eternity\r\n      </PrimaryButton>\r\n      <PrimaryButton\r\n        class=\"o-primary-btn--subtab-option\"\r\n        onclick=\"Modal.studyString.show({ id: -1 })\"\r\n      >\r\n        Import tree\r\n      </PrimaryButton>\r\n    </div>\r\n    <div\r\n      class=\"l-time-study-tree l-time-studies-tab__tree\"\r\n      :style=\"treeStyleObject\"\r\n    >\r\n      <component\r\n        :is=\"studyComponent(setup.study)\"\r\n        v-for=\"(setup) in studies\"\r\n        :key=\"setup.study.type.toString() + setup.study.id.toString()\"\r\n        :setup=\"setup\"\r\n      />\r\n      <SecretTimeStudy :setup=\"layout.secretStudy\" />\r\n      <EnslavedTimeStudy\r\n        v-if=\"isEnslaved\"\r\n        :setup=\"layout.enslavedStudy\"\r\n      />\r\n      <svg\r\n        :style=\"treeStyleObject\"\r\n        class=\"l-time-study-connection\"\r\n      >\r\n        <TimeStudyConnection\r\n          v-for=\"(setup, index) in connections\"\r\n          :key=\"'connection' + index\"\r\n          :setup=\"setup\"\r\n        />\r\n        <HiddenTimeStudyConnection :setup=\"layout.secretStudyConnection\" />\r\n        <HiddenTimeStudyConnection\r\n          v-if=\"isEnslaved\"\r\n          :setup=\"layout.enslavedStudyConnection\"\r\n          :is-enslaved=\"isEnslaved\"\r\n        />\r\n      </svg>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}