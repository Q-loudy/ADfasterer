{"ast":null,"code":"export default {\n  name: \"PopupModal\",\n  props: {\n    modal: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data() {\n    return {\n      showModal: false,\n      positionStyle: {}\n    };\n  },\n\n  created() {\n    this.on$(GAME_EVENT.CLOSE_MODAL, this.hide);\n  },\n\n  mounted() {\n    this.updatePositionStyles();\n  },\n\n  destroyed() {\n    document.activeElement.blur();\n  },\n\n  methods: {\n    update() {\n      const oldShowModal = this.showModal; // 2.5 is the cutoff point where the screen starts fading (interactivity disabled). However, we specifically\n      // want to allow glyph customization to appear at the very end (and nothing else)\n\n      this.showModal = GameEnd.endState <= END_STATE_MARKERS.INTERACTIVITY_DISABLED || this.modal.component.name === \"CosmeticSetChoiceModal\";\n      if (this.showModal !== oldShowModal) this.$nextTick(() => this.updatePositionStyles());\n      this.updatePositionStyles();\n    },\n\n    updatePositionStyles() {\n      if (!this.$refs.modal) return;\n\n      if (!this.showModal || this.$viewModel.theme !== \"S12\") {\n        this.positionStyle = {};\n        return;\n      }\n\n      const w = this.$refs.modal.offsetWidth,\n            h = this.$refs.modal.offsetHeight; // We need to set position style specifically for S12 because using a transform messes things up and\n      // makes everything really blurry\n\n      this.positionStyle = {\n        left: `${Math.round(innerWidth / 2 - w / 2)}px`,\n        top: `${Math.round(innerHeight / 2 - h / 2)}px`,\n        transform: \"none\"\n      };\n    },\n\n    hide() {\n      if (!this.modal.isOpen) return;\n      if (this.modal.hide) this.modal.hide();else Modal.hide();\n    }\n\n  }\n};","map":{"version":3,"sources":["PopupModal.vue"],"names":[],"mappings":"AACA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GAFA;;AAQA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,KADA;AAEA,MAAA,aAAA,EAAA;AAFA,KAAA;AAIA,GAbA;;AAcA,EAAA,OAAA,GAAA;AACA,SAAA,GAAA,CAAA,UAAA,CAAA,WAAA,EAAA,KAAA,IAAA;AACA,GAhBA;;AAiBA,EAAA,OAAA,GAAA;AACA,SAAA,oBAAA;AACA,GAnBA;;AAoBA,EAAA,SAAA,GAAA;AACA,IAAA,QAAA,CAAA,aAAA,CAAA,IAAA;AACA,GAtBA;;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,GAAA;AACA,YAAA,YAAA,GAAA,KAAA,SAAA,CADA,CAEA;AACA;;AACA,WAAA,SAAA,GAAA,OAAA,CAAA,QAAA,IAAA,iBAAA,CAAA,sBAAA,IACA,KAAA,KAAA,CAAA,SAAA,CAAA,IAAA,KAAA,wBADA;AAEA,UAAA,KAAA,SAAA,KAAA,YAAA,EAAA,KAAA,SAAA,CAAA,MAAA,KAAA,oBAAA,EAAA;AACA,WAAA,oBAAA;AACA,KATA;;AAUA,IAAA,oBAAA,GAAA;AACA,UAAA,CAAA,KAAA,KAAA,CAAA,KAAA,EAAA;;AACA,UAAA,CAAA,KAAA,SAAA,IAAA,KAAA,UAAA,CAAA,KAAA,KAAA,KAAA,EAAA;AACA,aAAA,aAAA,GAAA,EAAA;AACA;AACA;;AACA,YAAA,CAAA,GAAA,KAAA,KAAA,CAAA,KAAA,CAAA,WAAA;AAAA,YAAA,CAAA,GAAA,KAAA,KAAA,CAAA,KAAA,CAAA,YAAA,CANA,CAOA;AACA;;AACA,WAAA,aAAA,GAAA;AACA,QAAA,IAAA,EAAA,GAAA,IAAA,CAAA,KAAA,CAAA,UAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,CAAA,IADA;AAEA,QAAA,GAAA,EAAA,GAAA,IAAA,CAAA,KAAA,CAAA,WAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,CAAA,IAFA;AAGA,QAAA,SAAA,EAAA;AAHA,OAAA;AAKA,KAxBA;;AAyBA,IAAA,IAAA,GAAA;AACA,UAAA,CAAA,KAAA,KAAA,CAAA,MAAA,EAAA;AACA,UAAA,KAAA,KAAA,CAAA,IAAA,EAAA,KAAA,KAAA,CAAA,IAAA,GAAA,KACA,KAAA,CAAA,IAAA;AACA;;AA7BA;AAvBA,CAAA","sourcesContent":["<script>\r\nexport default {\r\n  name: \"PopupModal\",\r\n  props: {\r\n    modal: {\r\n      type: Object,\r\n      required: true,\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      showModal: false,\r\n      positionStyle: {},\r\n    };\r\n  },\r\n  created() {\r\n    this.on$(GAME_EVENT.CLOSE_MODAL, this.hide);\r\n  },\r\n  mounted() {\r\n    this.updatePositionStyles();\r\n  },\r\n  destroyed() {\r\n    document.activeElement.blur();\r\n  },\r\n  methods: {\r\n    update() {\r\n      const oldShowModal = this.showModal;\r\n      // 2.5 is the cutoff point where the screen starts fading (interactivity disabled). However, we specifically\r\n      // want to allow glyph customization to appear at the very end (and nothing else)\r\n      this.showModal = GameEnd.endState <= END_STATE_MARKERS.INTERACTIVITY_DISABLED ||\r\n        this.modal.component.name === \"CosmeticSetChoiceModal\";\r\n      if (this.showModal !== oldShowModal) this.$nextTick(() => this.updatePositionStyles());\r\n      this.updatePositionStyles();\r\n    },\r\n    updatePositionStyles() {\r\n      if (!this.$refs.modal) return;\r\n      if (!this.showModal || this.$viewModel.theme !== \"S12\") {\r\n        this.positionStyle = {};\r\n        return;\r\n      }\r\n      const w = this.$refs.modal.offsetWidth, h = this.$refs.modal.offsetHeight;\r\n      // We need to set position style specifically for S12 because using a transform messes things up and\r\n      // makes everything really blurry\r\n      this.positionStyle = {\r\n        left: `${Math.round(innerWidth / 2 - w / 2)}px`,\r\n        top: `${Math.round(innerHeight / 2 - h / 2)}px`,\r\n        transform: \"none\",\r\n      };\r\n    },\r\n    hide() {\r\n      if (!this.modal.isOpen) return;\r\n      if (this.modal.hide) this.modal.hide();\r\n      else Modal.hide();\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    v-if=\"showModal\"\r\n    ref=\"modal\"\r\n    class=\"c-modal l-modal\"\r\n    :style=\"positionStyle\"\r\n  >\r\n    <component\r\n      :is=\"modal.component\"\r\n      v-bind=\"modal.props\"\r\n      @close=\"hide\"\r\n    />\r\n  </div>\r\n</template>\r\n"],"sourceRoot":"src/components/modals"},"metadata":{},"sourceType":"module"}