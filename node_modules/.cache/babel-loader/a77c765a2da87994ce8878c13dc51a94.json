{"ast":null,"code":"import BackupEntry from \"@/components/modals/options/BackupEntry\";\nimport ModalWrapper from \"@/components/modals/ModalWrapper\";\nimport PrimaryButton from \"@/components/PrimaryButton\";\nimport { AutoBackupSlots } from \"@/core/storage\";\nimport { STEAM } from \"@/env\";\nexport default {\n  name: \"BackupWindowModal\",\n  components: {\n    ModalWrapper,\n    BackupEntry,\n    PrimaryButton\n  },\n\n  data() {\n    return {\n      // Used to force a key-swap whenever a save happens, to make unused slots immediately update\n      nextSave: 0,\n      ignoreOffline: false\n    };\n  },\n\n  computed: {\n    backupSlots: () => AutoBackupSlots,\n    deleteText: () => STEAM ? \"fully uninstalling the game\" : \"clearing your browser cookies\"\n  },\n  watch: {\n    ignoreOffline(newValue) {\n      player.options.loadBackupWithoutOffline = newValue;\n    }\n\n  },\n  methods: {\n    update() {\n      this.nextSave = Object.values(GameStorage.lastBackupTimes).map(t => t && t.backupTimer).sum();\n      this.ignoreOffline = player.options.loadBackupWithoutOffline;\n    },\n\n    offlineOptionClass() {\n      return {\n        \"c-modal__confirmation-toggle__checkbox\": true,\n        \"c-modal__confirmation-toggle__checkbox--active\": this.ignoreOffline\n      };\n    },\n\n    toggleOffline() {\n      this.ignoreOffline = !this.ignoreOffline;\n    },\n\n    importAsFile(event) {\n      // This happens if the file dialog is canceled instead of a file being selected\n      if (event.target.files.length === 0) return;\n      const reader = new FileReader();\n\n      reader.onload = function () {\n        GameStorage.importBackupsFromFile(reader.result);\n      };\n\n      reader.readAsText(event.target.files[0]);\n    }\n\n  }\n};","map":{"version":3,"sources":["BackupWindowModal.vue"],"names":[],"mappings":"AACA,OAAA,WAAA,MAAA,yCAAA;AACA,OAAA,YAAA,MAAA,kCAAA;AACA,OAAA,aAAA,MAAA,4BAAA;AAEA,SAAA,eAAA,QAAA,gBAAA;AACA,SAAA,KAAA,QAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,mBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,YADA;AAEA,IAAA,WAFA;AAGA,IAAA;AAHA,GAFA;;AAOA,EAAA,IAAA,GAAA;AACA,WAAA;AACA;AACA,MAAA,QAAA,EAAA,CAFA;AAGA,MAAA,aAAA,EAAA;AAHA,KAAA;AAKA,GAbA;;AAcA,EAAA,QAAA,EAAA;AACA,IAAA,WAAA,EAAA,MAAA,eADA;AAEA,IAAA,UAAA,EAAA,MAAA,KAAA,GAAA,6BAAA,GAAA;AAFA,GAdA;AAkBA,EAAA,KAAA,EAAA;AACA,IAAA,aAAA,CAAA,QAAA,EAAA;AACA,MAAA,MAAA,CAAA,OAAA,CAAA,wBAAA,GAAA,QAAA;AACA;;AAHA,GAlBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,GAAA;AACA,WAAA,QAAA,GAAA,MAAA,CAAA,MAAA,CAAA,WAAA,CAAA,eAAA,EAAA,GAAA,CAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,WAAA,EAAA,GAAA,EAAA;AACA,WAAA,aAAA,GAAA,MAAA,CAAA,OAAA,CAAA,wBAAA;AACA,KAJA;;AAKA,IAAA,kBAAA,GAAA;AACA,aAAA;AACA,kDAAA,IADA;AAEA,0DAAA,KAAA;AAFA,OAAA;AAIA,KAVA;;AAWA,IAAA,aAAA,GAAA;AACA,WAAA,aAAA,GAAA,CAAA,KAAA,aAAA;AACA,KAbA;;AAcA,IAAA,YAAA,CAAA,KAAA,EAAA;AACA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AAEA,YAAA,MAAA,GAAA,IAAA,UAAA,EAAA;;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,YAAA;AACA,QAAA,WAAA,CAAA,qBAAA,CAAA,MAAA,CAAA,MAAA;AACA,OAFA;;AAGA,MAAA,MAAA,CAAA,UAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA;;AAvBA;AAvBA,CAAA","sourcesContent":["<script>\r\nimport BackupEntry from \"@/components/modals/options/BackupEntry\";\r\nimport ModalWrapper from \"@/components/modals/ModalWrapper\";\r\nimport PrimaryButton from \"@/components/PrimaryButton\";\r\n\r\nimport { AutoBackupSlots } from \"@/core/storage\";\r\nimport { STEAM } from \"@/env\";\r\n\r\nexport default {\r\n  name: \"BackupWindowModal\",\r\n  components: {\r\n    ModalWrapper,\r\n    BackupEntry,\r\n    PrimaryButton\r\n  },\r\n  data() {\r\n    return {\r\n      // Used to force a key-swap whenever a save happens, to make unused slots immediately update\r\n      nextSave: 0,\r\n      ignoreOffline: false,\r\n    };\r\n  },\r\n  computed: {\r\n    backupSlots: () => AutoBackupSlots,\r\n    deleteText: () => (STEAM ? \"fully uninstalling the game\" : \"clearing your browser cookies\"),\r\n  },\r\n  watch: {\r\n    ignoreOffline(newValue) {\r\n      player.options.loadBackupWithoutOffline = newValue;\r\n    },\r\n  },\r\n  methods: {\r\n    update() {\r\n      this.nextSave = Object.values(GameStorage.lastBackupTimes).map(t => t && t.backupTimer).sum();\r\n      this.ignoreOffline = player.options.loadBackupWithoutOffline;\r\n    },\r\n    offlineOptionClass() {\r\n      return {\r\n        \"c-modal__confirmation-toggle__checkbox\": true,\r\n        \"c-modal__confirmation-toggle__checkbox--active\": this.ignoreOffline\r\n      };\r\n    },\r\n    toggleOffline() {\r\n      this.ignoreOffline = !this.ignoreOffline;\r\n    },\r\n    importAsFile(event) {\r\n      // This happens if the file dialog is canceled instead of a file being selected\r\n      if (event.target.files.length === 0) return;\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = function() {\r\n        GameStorage.importBackupsFromFile(reader.result);\r\n      };\r\n      reader.readAsText(event.target.files[0]);\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <ModalWrapper>\r\n    <template #header>\r\n      Automatic Backup Saves\r\n    </template>\r\n    <div class=\"c-info c-modal--short\">\r\n      The game makes automatic backups based on time you have spent online or offline.\r\n      Timers for online backups only run when the game is open, and offline backups only save to the slot\r\n      with the longest applicable timer.\r\n      Additionally, your current save is saved into the last slot any time a backup from here is loaded.\r\n      <div\r\n        class=\"c-modal__confirmation-toggle\"\r\n        @click=\"toggleOffline\"\r\n      >\r\n        <div :class=\"offlineOptionClass()\">\r\n          <span\r\n            v-if=\"ignoreOffline\"\r\n            class=\"fas fa-check\"\r\n          />\r\n        </div>\r\n        <span class=\"c-modal__confirmation-toggle__text\">\r\n          Load with offline progress disabled\r\n        </span>\r\n      </div>\r\n      <div class=\"c-entry-container\">\r\n        <BackupEntry\r\n          v-for=\"slot in backupSlots\"\r\n          :key=\"nextSave + slot.id\"\r\n          class=\"l-backup-entry\"\r\n          :slot-data=\"slot\"\r\n        />\r\n      </div>\r\n      These backups are still stored in the same place as your game save and can still be lost if you do anything\r\n      external to the game which would delete your save itself, such as {{ deleteText }}. You can import/export\r\n      all backups at once as files, using these buttons:\r\n      <div class=\"c-backup-file-ops\">\r\n        <PrimaryButton\r\n          class=\"o-btn-file-ops\"\r\n          onclick=\"GameStorage.exportBackupsAsFile()\"\r\n        >\r\n          Export as file\r\n        </PrimaryButton>\r\n        <PrimaryButton class=\"o-btn-file-ops\">\r\n          <input\r\n            class=\"c-file-import\"\r\n            type=\"file\"\r\n            accept=\".txt\"\r\n            @change=\"importAsFile\"\r\n          >\r\n          <label for=\"file\">Import from file</label>\r\n        </PrimaryButton>\r\n      </div>\r\n      Each of your three save slots has its own separate set of backups.\r\n    </div>\r\n  </ModalWrapper>\r\n</template>\r\n\r\n<style scoped>\r\n.c-info {\r\n  width: 60rem;\r\n  overflow-x: hidden;\r\n  padding-right: 1rem;\r\n}\r\n\r\n.c-info::-webkit-scrollbar {\r\n  width: 1rem;\r\n}\r\n\r\n.c-info::-webkit-scrollbar-thumb {\r\n  border: none;\r\n}\r\n\r\n.s-base--metro .c-info::-webkit-scrollbar-thumb {\r\n  border-radius: 0;\r\n}\r\n\r\n.c-backup-file-ops {\r\n  margin: 0.5rem;\r\n}\r\n\r\n.o-btn-file-ops {\r\n  margin: 0 0.5rem;\r\n}\r\n\r\n.c-entry-container {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.l-backup-entry {\r\n  width: calc(50% - 0.6rem);\r\n  height: calc(25% - 0.6rem);\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/modals/options"},"metadata":{},"sourceType":"module"}