{"ast":null,"code":"import { GameMechanicState } from \"./game-mechanic\";\n/**\r\n * @abstract\r\n */\n\nexport class RebuyableMechanicState extends GameMechanicState {\n  /**\r\n   * @abstract\r\n   */\n  get currency() {\n    throw new NotImplementedError();\n  }\n\n  get isAffordable() {\n    return this.currency.gte(this.cost);\n  }\n\n  get cost() {\n    return this.config.cost();\n  }\n\n  get isAvailableForPurchase() {\n    return true;\n  }\n\n  get isCapped() {\n    return false;\n  }\n\n  get isRebuyable() {\n    return true;\n  }\n  /**\r\n   * @abstract\r\n   */\n\n\n  get boughtAmount() {\n    throw new NotImplementedError();\n  }\n  /**\r\n   * @abstract\r\n   */\n\n\n  set boughtAmount(value) {\n    throw new NotImplementedError();\n  }\n\n  get isEffectActive() {\n    return this.boughtAmount > 0;\n  }\n\n  get canBeBought() {\n    return this.isAffordable && this.isAvailableForPurchase && !this.isCapped;\n  }\n\n  purchase() {\n    if (!this.canBeBought) return false;\n    if (GameEnd.creditsEverClosed) return false;\n    this.currency.subtract(this.cost);\n    this.boughtAmount++;\n    this.onPurchased();\n    GameUI.update();\n    return true;\n  } // eslint-disable-next-line no-empty-function\n\n\n  onPurchased() {}\n\n}","map":{"version":3,"sources":["C:/Games/ADFasterer/ADfasterer/src/core/game-mechanics/rebuyable.js"],"names":["GameMechanicState","RebuyableMechanicState","currency","NotImplementedError","isAffordable","gte","cost","config","isAvailableForPurchase","isCapped","isRebuyable","boughtAmount","value","isEffectActive","canBeBought","purchase","GameEnd","creditsEverClosed","subtract","onPurchased","GameUI","update"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,iBAAlC;AAEA;AACA;AACA;;AACA,OAAO,MAAMC,sBAAN,SAAqCD,iBAArC,CAAuD;AAC5D;AACF;AACA;AACc,MAARE,QAAQ,GAAG;AAAE,UAAM,IAAIC,mBAAJ,EAAN;AAAkC;;AAEnC,MAAZC,YAAY,GAAG;AACjB,WAAO,KAAKF,QAAL,CAAcG,GAAd,CAAkB,KAAKC,IAAvB,CAAP;AACD;;AAEO,MAAJA,IAAI,GAAG;AACT,WAAO,KAAKC,MAAL,CAAYD,IAAZ,EAAP;AACD;;AAEyB,MAAtBE,sBAAsB,GAAG;AAC3B,WAAO,IAAP;AACD;;AAEW,MAARC,QAAQ,GAAG;AACb,WAAO,KAAP;AACD;;AAEc,MAAXC,WAAW,GAAG;AAChB,WAAO,IAAP;AACD;AAED;AACF;AACA;;;AACkB,MAAZC,YAAY,GAAG;AAAE,UAAM,IAAIR,mBAAJ,EAAN;AAAkC;AAEvD;AACF;AACA;;;AACkB,MAAZQ,YAAY,CAACC,KAAD,EAAQ;AAAE,UAAM,IAAIT,mBAAJ,EAAN;AAAkC;;AAE1C,MAAdU,cAAc,GAAG;AACnB,WAAO,KAAKF,YAAL,GAAoB,CAA3B;AACD;;AAEc,MAAXG,WAAW,GAAG;AAChB,WAAO,KAAKV,YAAL,IAAqB,KAAKI,sBAA1B,IAAoD,CAAC,KAAKC,QAAjE;AACD;;AAEDM,EAAAA,QAAQ,GAAG;AACT,QAAI,CAAC,KAAKD,WAAV,EAAuB,OAAO,KAAP;AACvB,QAAIE,OAAO,CAACC,iBAAZ,EAA+B,OAAO,KAAP;AAC/B,SAAKf,QAAL,CAAcgB,QAAd,CAAuB,KAAKZ,IAA5B;AACA,SAAKK,YAAL;AACA,SAAKQ,WAAL;AACAC,IAAAA,MAAM,CAACC,MAAP;AACA,WAAO,IAAP;AACD,GApD2D,CAsD5D;;;AACAF,EAAAA,WAAW,GAAG,CAAG;;AAvD2C","sourcesContent":["import { GameMechanicState } from \"./game-mechanic\";\r\n\r\n/**\r\n * @abstract\r\n */\r\nexport class RebuyableMechanicState extends GameMechanicState {\r\n  /**\r\n   * @abstract\r\n   */\r\n  get currency() { throw new NotImplementedError(); }\r\n\r\n  get isAffordable() {\r\n    return this.currency.gte(this.cost);\r\n  }\r\n\r\n  get cost() {\r\n    return this.config.cost();\r\n  }\r\n\r\n  get isAvailableForPurchase() {\r\n    return true;\r\n  }\r\n\r\n  get isCapped() {\r\n    return false;\r\n  }\r\n\r\n  get isRebuyable() {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * @abstract\r\n   */\r\n  get boughtAmount() { throw new NotImplementedError(); }\r\n\r\n  /**\r\n   * @abstract\r\n   */\r\n  set boughtAmount(value) { throw new NotImplementedError(); }\r\n\r\n  get isEffectActive() {\r\n    return this.boughtAmount > 0;\r\n  }\r\n\r\n  get canBeBought() {\r\n    return this.isAffordable && this.isAvailableForPurchase && !this.isCapped;\r\n  }\r\n\r\n  purchase() {\r\n    if (!this.canBeBought) return false;\r\n    if (GameEnd.creditsEverClosed) return false;\r\n    this.currency.subtract(this.cost);\r\n    this.boughtAmount++;\r\n    this.onPurchased();\r\n    GameUI.update();\r\n    return true;\r\n  }\r\n\r\n  // eslint-disable-next-line no-empty-function\r\n  onPurchased() { }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}