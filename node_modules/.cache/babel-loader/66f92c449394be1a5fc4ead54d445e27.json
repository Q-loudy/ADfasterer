{"ast":null,"code":"import \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { TimeStudy } from \"./normal-time-study\";\nimport { TimeStudyState } from \"./time-studies\";\nexport class DilationTimeStudyState extends TimeStudyState {\n  constructor(config) {\n    super(config, TIME_STUDY_TYPE.DILATION);\n  }\n\n  get isBought() {\n    return player.dilation.studies.includes(this.id);\n  }\n\n  get canBeBought() {\n    return this.isAffordable && this.config.requirement();\n  }\n\n  get description() {\n    return this.config.description;\n  }\n\n  get cost() {\n    return typeof this.config.cost === \"function\" ? this.config.cost() : this.config.cost;\n  }\n\n  get totalTimeTheoremRequirement() {\n    return this.id === 1 ? 12900 : 0;\n  }\n\n  purchase(quiet = false) {\n    if (this.isBought || !this.canBeBought) return false;\n\n    if (this.id === 1) {\n      // ID 1 is the dilation unlock study\n      if (!quiet) {\n        Tab.eternity.dilation.show();\n      }\n\n      if (Perk.autounlockDilation1.canBeApplied) {\n        for (const id of [4, 5, 6]) player.dilation.upgrades.add(id);\n      }\n\n      if (Perk.autounlockDilation2.canBeApplied) {\n        for (const id of [7, 8, 9]) player.dilation.upgrades.add(id);\n      }\n\n      if (!Pelle.isDoomed) Currency.tachyonParticles.bumpTo(Perk.startTP.effectOrDefault(0));\n\n      if (Ra.unlocks.unlockDilationStartingTP.canBeApplied && !isInCelestialReality() && !Pelle.isDoomed) {\n        Currency.tachyonParticles.bumpTo(getTP(Ra.unlocks.unlockDilationStartingTP.effectOrDefault(0), false));\n      }\n\n      TabNotification.dilationAfterUnlock.tryTrigger();\n    }\n\n    if (this.id === 6) {\n      // ID 6 is the reality unlock study\n      if (!PlayerProgress.realityUnlocked()) {\n        Modal.message.show(`Reality Machine gain for your first Reality is reduced above ${format(\"1e6000\")} Eternity\n          Points and capped at ${format(\"1e8000\")} Eternity Points. This is due to balance changes made in the Reality\n          update which affect the difficulty of reaching those amounts, such as the increased Time Dimension cost\n          scaling above ${format(\"1e6000\")}.`, {}, 3);\n        EventHub.dispatch(GAME_EVENT.REALITY_FIRST_UNLOCKED);\n      }\n\n      if (!Perk.autounlockReality.isBought) Tab.reality.glyphs.show();\n    }\n\n    player.dilation.studies.push(this.id);\n    Currency.timeTheorems.subtract(this.cost);\n    return true;\n  }\n\n}\nDilationTimeStudyState.studies = mapGameData(GameDatabase.eternity.timeStudies.dilation, config => new DilationTimeStudyState(config));\n/**\r\n * @type {DilationTimeStudyState}\r\n */\n\nTimeStudy.dilation = DilationTimeStudyState.studies[1];\n/**\r\n * @param {number} tier\r\n * @returns {DilationTimeStudyState}\r\n */\n\nTimeStudy.timeDimension = function (tier) {\n  return DilationTimeStudyState.studies[tier - 3];\n};\n/**\r\n * @type {DilationTimeStudyState}\r\n */\n\n\nTimeStudy.reality = DilationTimeStudyState.studies[6];\n\nTimeStudy.boughtDilationTS = function () {\n  return player.dilation.studies.map(id => DilationTimeStudyState.studies[id]);\n};","map":{"version":3,"sources":["C:/Games/ADFasterer/ADfasterer/src/core/time-studies/dilation-time-study.js"],"names":["TimeStudy","TimeStudyState","DilationTimeStudyState","constructor","config","TIME_STUDY_TYPE","DILATION","isBought","player","dilation","studies","includes","id","canBeBought","isAffordable","requirement","description","cost","totalTimeTheoremRequirement","purchase","quiet","Tab","eternity","show","Perk","autounlockDilation1","canBeApplied","upgrades","add","autounlockDilation2","Pelle","isDoomed","Currency","tachyonParticles","bumpTo","startTP","effectOrDefault","Ra","unlocks","unlockDilationStartingTP","isInCelestialReality","getTP","TabNotification","dilationAfterUnlock","tryTrigger","PlayerProgress","realityUnlocked","Modal","message","format","EventHub","dispatch","GAME_EVENT","REALITY_FIRST_UNLOCKED","autounlockReality","reality","glyphs","push","timeTheorems","subtract","mapGameData","GameDatabase","timeStudies","timeDimension","tier","boughtDilationTS","map"],"mappings":"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","sourcesContent":["import { TimeStudy } from \"./normal-time-study\";\r\nimport { TimeStudyState } from \"./time-studies\";\r\n\r\nexport class DilationTimeStudyState extends TimeStudyState {\r\n  constructor(config) {\r\n    super(config, TIME_STUDY_TYPE.DILATION);\r\n  }\r\n\r\n  get isBought() {\r\n    return player.dilation.studies.includes(this.id);\r\n  }\r\n\r\n  get canBeBought() {\r\n    return this.isAffordable && this.config.requirement();\r\n  }\r\n\r\n  get description() {\r\n    return this.config.description;\r\n  }\r\n\r\n  get cost() {\r\n    return typeof this.config.cost === \"function\" ? this.config.cost() : this.config.cost;\r\n  }\r\n\r\n  get totalTimeTheoremRequirement() {\r\n    return this.id === 1 ? 12900 : 0;\r\n  }\r\n\r\n  purchase(quiet = false) {\r\n    if (this.isBought || !this.canBeBought) return false;\r\n    if (this.id === 1) {\r\n      // ID 1 is the dilation unlock study\r\n      if (!quiet) {\r\n        Tab.eternity.dilation.show();\r\n      }\r\n      if (Perk.autounlockDilation1.canBeApplied) {\r\n        for (const id of [4, 5, 6]) player.dilation.upgrades.add(id);\r\n      }\r\n      if (Perk.autounlockDilation2.canBeApplied) {\r\n        for (const id of [7, 8, 9]) player.dilation.upgrades.add(id);\r\n      }\r\n      if (!Pelle.isDoomed) Currency.tachyonParticles.bumpTo(Perk.startTP.effectOrDefault(0));\r\n      if (Ra.unlocks.unlockDilationStartingTP.canBeApplied && !isInCelestialReality() && !Pelle.isDoomed) {\r\n        Currency.tachyonParticles.bumpTo(getTP(Ra.unlocks.unlockDilationStartingTP.effectOrDefault(0), false));\r\n      }\r\n      TabNotification.dilationAfterUnlock.tryTrigger();\r\n    }\r\n    if (this.id === 6) {\r\n      // ID 6 is the reality unlock study\r\n      if (!PlayerProgress.realityUnlocked()) {\r\n        Modal.message.show(`Reality Machine gain for your first Reality is reduced above ${format(\"1e6000\")} Eternity\r\n          Points and capped at ${format(\"1e8000\")} Eternity Points. This is due to balance changes made in the Reality\r\n          update which affect the difficulty of reaching those amounts, such as the increased Time Dimension cost\r\n          scaling above ${format(\"1e6000\")}.`, {}, 3);\r\n        EventHub.dispatch(GAME_EVENT.REALITY_FIRST_UNLOCKED);\r\n      }\r\n      if (!Perk.autounlockReality.isBought) Tab.reality.glyphs.show();\r\n    }\r\n\r\n    player.dilation.studies.push(this.id);\r\n    Currency.timeTheorems.subtract(this.cost);\r\n    return true;\r\n  }\r\n}\r\n\r\nDilationTimeStudyState.studies = mapGameData(\r\n  GameDatabase.eternity.timeStudies.dilation,\r\n  config => new DilationTimeStudyState(config)\r\n);\r\n\r\n/**\r\n * @type {DilationTimeStudyState}\r\n */\r\nTimeStudy.dilation = DilationTimeStudyState.studies[1];\r\n\r\n/**\r\n * @param {number} tier\r\n * @returns {DilationTimeStudyState}\r\n */\r\nTimeStudy.timeDimension = function(tier) {\r\n  return DilationTimeStudyState.studies[tier - 3];\r\n};\r\n\r\n/**\r\n * @type {DilationTimeStudyState}\r\n */\r\nTimeStudy.reality = DilationTimeStudyState.studies[6];\r\n\r\nTimeStudy.boughtDilationTS = function() {\r\n  return player.dilation.studies.map(id => DilationTimeStudyState.studies[id]);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}