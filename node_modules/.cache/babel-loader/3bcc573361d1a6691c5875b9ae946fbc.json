{"ast":null,"code":"import \"core-js/modules/es.array.reduce.js\";\nimport { S12Windows } from \"./windows\";\nexport default {\n  name: \"S12Subtabs\",\n  props: {\n    tab: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data() {\n    return {\n      isAvailable: true,\n      isHidden: false,\n      subtabVisibilities: [],\n      tabName: \"\",\n      S12Windows,\n      windowWidth: 0,\n      left: \"0px\",\n      useCompact: false\n    };\n  },\n\n  methods: {\n    update() {\n      this.isAvailable = this.tab.isAvailable;\n      this.isHidden = this.tab.isHidden;\n      this.subtabVisibilities = this.tab.subtabs.map(x => x.isAvailable);\n      this.windowWidth = window.innerWidth;\n      this.useCompact = this.subtabVisibilities.reduce((a, v) => a + v) * 180 > window.innerWidth - 10;\n      this.left = this.getSubtabsPosition();\n    },\n\n    isCurrentSubtab(id) {\n      return player.options.lastOpenSubtab[this.tab.id] === id && !S12Windows.isMinimised;\n    },\n\n    getSubtabsPosition() {\n      if (!this.$refs.subtabs) return \"0px\";\n      const centerPt = S12Windows.tabs.tabButtonPositions[this.tab.id];\n      const subtabsWidth = this.$refs.subtabs.offsetWidth;\n      const minLeft = 5 + subtabsWidth / 2,\n            maxLeft = this.windowWidth - minLeft; // Reference isAvailable and isHidden so this gets updated correctly\n\n      return this.isAvailable, this.isHidden, `${Math.clamp(centerPt, minLeft, maxLeft)}px`;\n    }\n\n  }\n};","map":{"version":3,"sources":["S12Subtabs.vue"],"names":[],"mappings":";AACA,SAAA,UAAA,QAAA,WAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GAFA;;AAQA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,IADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,kBAAA,EAAA,EAHA;AAIA,MAAA,OAAA,EAAA,EAJA;AAKA,MAAA,UALA;AAMA,MAAA,WAAA,EAAA,CANA;AAOA,MAAA,IAAA,EAAA,KAPA;AAQA,MAAA,UAAA,EAAA;AARA,KAAA;AAUA,GAnBA;;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,GAAA;AACA,WAAA,WAAA,GAAA,KAAA,GAAA,CAAA,WAAA;AACA,WAAA,QAAA,GAAA,KAAA,GAAA,CAAA,QAAA;AACA,WAAA,kBAAA,GAAA,KAAA,GAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA,IAAA,CAAA,CAAA,WAAA,CAAA;AACA,WAAA,WAAA,GAAA,MAAA,CAAA,UAAA;AACA,WAAA,UAAA,GAAA,KAAA,kBAAA,CAAA,MAAA,CAAA,CAAA,CAAA,EAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,GAAA,GAAA,MAAA,CAAA,UAAA,GAAA,EAAA;AAEA,WAAA,IAAA,GAAA,KAAA,kBAAA,EAAA;AACA,KATA;;AAUA,IAAA,eAAA,CAAA,EAAA,EAAA;AACA,aAAA,MAAA,CAAA,OAAA,CAAA,cAAA,CAAA,KAAA,GAAA,CAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,CAAA,WAAA;AACA,KAZA;;AAaA,IAAA,kBAAA,GAAA;AACA,UAAA,CAAA,KAAA,KAAA,CAAA,OAAA,EAAA,OAAA,KAAA;AACA,YAAA,QAAA,GAAA,UAAA,CAAA,IAAA,CAAA,kBAAA,CAAA,KAAA,GAAA,CAAA,EAAA,CAAA;AACA,YAAA,YAAA,GAAA,KAAA,KAAA,CAAA,OAAA,CAAA,WAAA;AACA,YAAA,OAAA,GAAA,IAAA,YAAA,GAAA,CAAA;AAAA,YAAA,OAAA,GAAA,KAAA,WAAA,GAAA,OAAA,CAJA,CAKA;;AACA,aAAA,KAAA,WAAA,EAAA,KAAA,QAAA,EAAA,GAAA,IAAA,CAAA,KAAA,CAAA,QAAA,EAAA,OAAA,EAAA,OAAA,CAAA,IAAA;AACA;;AApBA;AApBA,CAAA","sourcesContent":["<script>\r\nimport { S12Windows } from \"./windows\";\r\n\r\nexport default {\r\n  name: \"S12Subtabs\",\r\n  props: {\r\n    tab: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isAvailable: true,\r\n      isHidden: false,\r\n      subtabVisibilities: [],\r\n      tabName: \"\",\r\n      S12Windows,\r\n      windowWidth: 0,\r\n      left: \"0px\",\r\n      useCompact: false,\r\n    };\r\n  },\r\n  methods: {\r\n    update() {\r\n      this.isAvailable = this.tab.isAvailable;\r\n      this.isHidden = this.tab.isHidden;\r\n      this.subtabVisibilities = this.tab.subtabs.map(x => x.isAvailable);\r\n      this.windowWidth = window.innerWidth;\r\n      this.useCompact = this.subtabVisibilities.reduce((a, v) => a + v) * 180 > window.innerWidth - 10;\r\n\r\n      this.left = this.getSubtabsPosition();\r\n    },\r\n    isCurrentSubtab(id) {\r\n      return player.options.lastOpenSubtab[this.tab.id] === id && !S12Windows.isMinimised;\r\n    },\r\n    getSubtabsPosition() {\r\n      if (!this.$refs.subtabs) return \"0px\";\r\n      const centerPt = S12Windows.tabs.tabButtonPositions[this.tab.id];\r\n      const subtabsWidth = this.$refs.subtabs.offsetWidth;\r\n      const minLeft = 5 + subtabsWidth / 2, maxLeft = this.windowWidth - minLeft;\r\n      // Reference isAvailable and isHidden so this gets updated correctly\r\n      return (this.isAvailable, this.isHidden, `${Math.clamp(centerPt, minLeft, maxLeft)}px`);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    ref=\"subtabs\"\r\n    class=\"c-s12-subtabs\"\r\n    :class=\"{\r\n      'c-s12-subtabs--show': S12Windows.tabs.hoveringTab === tab.id,\r\n      'c-s12-subtabs--compact': useCompact,\r\n    }\"\r\n    :style=\"{ left }\"\r\n    @mouseenter=\"S12Windows.tabs.setHoveringTab(tab)\"\r\n    @mouseleave=\"S12Windows.tabs.unsetHoveringTab()\"\r\n  >\r\n    <template\r\n      v-for=\"(subtab, index) in tab.subtabs\"\r\n    >\r\n      <div\r\n        v-if=\"subtabVisibilities[index]\"\r\n        :key=\"index\"\r\n        class=\"c-s12-subtab-btn\"\r\n        :class=\"{ 'c-s12-subtab-btn--active': isCurrentSubtab(subtab.id) }\"\r\n        @click=\"subtab.show(true); S12Windows.isMinimised = false; S12Windows.tabs.unsetHoveringTab(true);\"\r\n      >\r\n        <span class=\"c-s12-subtab-btn__text\">\r\n          <span\r\n            v-if=\"useCompact\"\r\n            class=\"c-s12-subtab-btn__symbol--small\"\r\n            v-html=\"subtab.symbol\"\r\n          />\r\n          {{ subtab.name }}\r\n        </span>\r\n        <span\r\n          v-if=\"!useCompact\"\r\n          class=\"c-s12-subtab-btn__symbol\"\r\n          v-html=\"subtab.symbol\"\r\n        />\r\n        <div\r\n          v-if=\"subtab.hasNotification\"\r\n          class=\"fas fa-circle-exclamation l-notification-icon\"\r\n        />\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.c-s12-subtabs {\r\n  display: flex;\r\n  visibility: hidden;\r\n  position: absolute;\r\n  bottom: calc(var(--s12-taskbar-height) + 0.5rem);\r\n  z-index: 6;\r\n  opacity: 0;\r\n  background-color: rgba(120, 120, 120, 0.7);\r\n  background-image: var(--s12-background-gradient);\r\n  border: 0.15rem solid var(--s12-border-color);\r\n  border-radius: 0.5rem;\r\n  box-shadow: 0 0 1rem 0.2rem var(--s12-border-color),\r\n    inset 0 0 0.4rem 0.1rem rgba(255, 255, 255, 0.7);\r\n  transform: translate(-50%, 20%);\r\n  transition: transform 0.2s, opacity 0.2s, visibility 0.2s;\r\n  pointer-events: none;\r\n\r\n  /* If anyone can figure out why these two aren't working that would be great */\r\n  -webkit-backdrop-filter: blur(0.3rem);\r\n  backdrop-filter: blur(0.3rem);\r\n}\r\n\r\n.c-s12-subtabs--compact {\r\n  flex-direction: column;\r\n  padding: 0.5rem;\r\n  padding-bottom: 0;\r\n}\r\n\r\n.c-s12-subtabs--show {\r\n  visibility: visible;\r\n  opacity: 1;\r\n  transform: translate(-50%, 0);\r\n  pointer-events: auto;\r\n}\r\n\r\n.c-s12-subtab-btn {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 17rem;\r\n  height: 12rem;\r\n  position: relative;\r\n  border: 0.1rem solid transparent;\r\n  border-radius: 0.5rem;\r\n  margin: 0.5rem;\r\n  padding: 0.3rem;\r\n  transition: background-color 0.5s, border 0.5s;\r\n  user-select: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.c-s12-subtabs--compact .c-s12-subtab-btn {\r\n  height: auto;\r\n  margin: 0;\r\n  margin-bottom: 0.5rem;\r\n  padding: 0.6rem;\r\n}\r\n\r\n.c-s12-subtab-btn:hover {\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n  border: 0.1rem solid rgba(255, 255, 255, 0.5);\r\n}\r\n\r\n.c-s12-subtab-btn--active {\r\n  background-color: rgba(255, 255, 255, 0.4);\r\n  border: 0.1rem solid white;\r\n}\r\n\r\n.c-s12-subtab-btn--active:hover {\r\n  background-color: rgba(255, 255, 255, 0.6);\r\n}\r\n\r\n.c-s12-subtab-btn__text {\r\n  display: flex;\r\n  align-self: flex-start;\r\n  color: white;\r\n  text-shadow: 0 0 0.5rem var(--s12-border-color);\r\n}\r\n\r\n.c-s12-subtab-btn__symbol {\r\n  display: flex;\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  align-self: center;\r\n  font-size: 6rem;\r\n  color: white;\r\n  text-shadow: 0 0 0.5rem var(--s12-border-color);\r\n}\r\n\r\n.c-s12-subtab-btn__symbol--small {\r\n  width: 1.4rem;\r\n  margin-right: 0.5rem;\r\n}\r\n</style>"],"sourceRoot":"src/components/ui-modes/s12"},"metadata":{},"sourceType":"module"}