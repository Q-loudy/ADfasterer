{"ast":null,"code":"import { DEV } from \"@/env\";\nwindow.NotImplementedError = class NotImplementedError extends Error {\n  constructor() {\n    super(\"The method is not implemented.\");\n    this.name = \"NotImplementedError\";\n  }\n\n};\nwindow.GlobalErrorHandler = {\n  handled: false,\n  cleanStart: false,\n\n  onerror(event) {\n    if (this.handled) return;\n    this.handled = true;\n\n    if (!this.cleanStart) {\n      document.getElementById(\"loading\").style.display = \"none\";\n      requestAnimationFrame(() => this.crash(event));\n      return;\n    }\n\n    this.stopGame();\n    this.crash(event);\n  },\n\n  stopGame() {\n    GameKeyboard.disable();\n    GameIntervals.stop();\n\n    function clearHandles(set, clear) {\n      // eslint-disable-next-line no-empty-function\n      let id = set(() => {}, 9999);\n\n      while (id--) {\n        clear(id);\n      }\n    }\n\n    clearHandles(setInterval, clearInterval);\n    clearHandles(setTimeout, clearTimeout);\n    clearHandles(requestAnimationFrame, cancelAnimationFrame);\n  },\n\n  crash(message) {\n    if (window.GameUI !== undefined && GameUI.initialized) {\n      Modal.message.show(`${message}<br>Check the console for more details`, {}, 3);\n    } // eslint-disable-next-line no-debugger\n\n\n    debugger;\n  }\n\n};\n\nwindow.onerror = (event, source) => {\n  if (!source.endsWith(\".js\")) return;\n  GlobalErrorHandler.onerror(event);\n};","map":{"version":3,"sources":["C:/Games/ADFasterer/ADfasterer/src/core/crash.js"],"names":["DEV","window","NotImplementedError","Error","constructor","name","GlobalErrorHandler","handled","cleanStart","onerror","event","document","getElementById","style","display","requestAnimationFrame","crash","stopGame","GameKeyboard","disable","GameIntervals","stop","clearHandles","set","clear","id","setInterval","clearInterval","setTimeout","clearTimeout","cancelAnimationFrame","message","GameUI","undefined","initialized","Modal","show","source","endsWith"],"mappings":"AAAA,SAASA,GAAT,QAAoB,OAApB;AAEAC,MAAM,CAACC,mBAAP,GAA6B,MAAMA,mBAAN,SAAkCC,KAAlC,CAAwC;AACnEC,EAAAA,WAAW,GAAG;AACZ,UAAM,gCAAN;AACA,SAAKC,IAAL,GAAY,qBAAZ;AACD;;AAJkE,CAArE;AAOAJ,MAAM,CAACK,kBAAP,GAA4B;AAC1BC,EAAAA,OAAO,EAAE,KADiB;AAE1BC,EAAAA,UAAU,EAAE,KAFc;;AAG1BC,EAAAA,OAAO,CAACC,KAAD,EAAQ;AACb,QAAI,KAAKH,OAAT,EAAkB;AAClB,SAAKA,OAAL,GAAe,IAAf;;AACA,QAAI,CAAC,KAAKC,UAAV,EAAsB;AACpBG,MAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCC,OAAzC,GAAmD,MAAnD;AACAC,MAAAA,qBAAqB,CAAC,MAAM,KAAKC,KAAL,CAAWN,KAAX,CAAP,CAArB;AACA;AACD;;AACD,SAAKO,QAAL;AACA,SAAKD,KAAL,CAAWN,KAAX;AACD,GAbyB;;AAc1BO,EAAAA,QAAQ,GAAG;AACTC,IAAAA,YAAY,CAACC,OAAb;AACAC,IAAAA,aAAa,CAACC,IAAd;;AACA,aAASC,YAAT,CAAsBC,GAAtB,EAA2BC,KAA3B,EAAkC;AAChC;AACA,UAAIC,EAAE,GAAGF,GAAG,CAAC,MAAM,CAAE,CAAT,EAAW,IAAX,CAAZ;;AACA,aAAOE,EAAE,EAAT,EAAa;AACXD,QAAAA,KAAK,CAACC,EAAD,CAAL;AACD;AACF;;AACDH,IAAAA,YAAY,CAACI,WAAD,EAAcC,aAAd,CAAZ;AACAL,IAAAA,YAAY,CAACM,UAAD,EAAaC,YAAb,CAAZ;AACAP,IAAAA,YAAY,CAACP,qBAAD,EAAwBe,oBAAxB,CAAZ;AACD,GA3ByB;;AA4B1Bd,EAAAA,KAAK,CAACe,OAAD,EAAU;AACb,QAAI9B,MAAM,CAAC+B,MAAP,KAAkBC,SAAlB,IAA+BD,MAAM,CAACE,WAA1C,EAAuD;AACrDC,MAAAA,KAAK,CAACJ,OAAN,CAAcK,IAAd,CAAoB,GAAEL,OAAQ,wCAA9B,EAAuE,EAAvE,EAA2E,CAA3E;AACD,KAHY,CAIb;;;AACA;AACD;;AAlCyB,CAA5B;;AAqCA9B,MAAM,CAACQ,OAAP,GAAiB,CAACC,KAAD,EAAQ2B,MAAR,KAAmB;AAClC,MAAI,CAACA,MAAM,CAACC,QAAP,CAAgB,KAAhB,CAAL,EAA6B;AAC7BhC,EAAAA,kBAAkB,CAACG,OAAnB,CAA2BC,KAA3B;AACD,CAHD","sourcesContent":["import { DEV } from \"@/env\";\r\n\r\nwindow.NotImplementedError = class NotImplementedError extends Error {\r\n  constructor() {\r\n    super(\"The method is not implemented.\");\r\n    this.name = \"NotImplementedError\";\r\n  }\r\n};\r\n\r\nwindow.GlobalErrorHandler = {\r\n  handled: false,\r\n  cleanStart: false,\r\n  onerror(event) {\r\n    if (this.handled) return;\r\n    this.handled = true;\r\n    if (!this.cleanStart) {\r\n      document.getElementById(\"loading\").style.display = \"none\";\r\n      requestAnimationFrame(() => this.crash(event));\r\n      return;\r\n    }\r\n    this.stopGame();\r\n    this.crash(event);\r\n  },\r\n  stopGame() {\r\n    GameKeyboard.disable();\r\n    GameIntervals.stop();\r\n    function clearHandles(set, clear) {\r\n      // eslint-disable-next-line no-empty-function\r\n      let id = set(() => {}, 9999);\r\n      while (id--) {\r\n        clear(id);\r\n      }\r\n    }\r\n    clearHandles(setInterval, clearInterval);\r\n    clearHandles(setTimeout, clearTimeout);\r\n    clearHandles(requestAnimationFrame, cancelAnimationFrame);\r\n  },\r\n  crash(message) {\r\n    if (window.GameUI !== undefined && GameUI.initialized) {\r\n      Modal.message.show(`${message}<br>Check the console for more details`, {}, 3);\r\n    }\r\n    // eslint-disable-next-line no-debugger\r\n    debugger;\r\n  }\r\n};\r\n\r\nwindow.onerror = (event, source) => {\r\n  if (!source.endsWith(\".js\")) return;\r\n  GlobalErrorHandler.onerror(event);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}