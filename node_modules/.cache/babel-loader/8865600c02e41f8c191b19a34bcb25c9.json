{"ast":null,"code":"import CostDisplay from \"@/components/CostDisplay\";\nimport CustomizeableTooltip from \"@/components/CustomizeableTooltip\";\nimport DescriptionDisplay from \"@/components/DescriptionDisplay\";\nimport EffectDisplay from \"@/components/EffectDisplay\";\nimport PrimaryToggleButton from \"@/components/PrimaryToggleButton\";\nexport default {\n  name: \"DilationUpgradeButton\",\n  components: {\n    PrimaryToggleButton,\n    DescriptionDisplay,\n    EffectDisplay,\n    CostDisplay,\n    CustomizeableTooltip\n  },\n  props: {\n    upgrade: {\n      type: Object,\n      required: true\n    },\n    isRebuyable: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    showTooltip: {\n      type: Boolean,\n      required: true\n    }\n  },\n\n  data() {\n    return {\n      isBought: false,\n      isCapped: false,\n      isAffordable: false,\n      isAutoUnlocked: false,\n      isAutobuyerOn: false,\n      boughtAmount: 0,\n      currentDT: new Decimal(0),\n      currentDTGain: new Decimal(0),\n      timeEstimate: \"\",\n      isHovering: false,\n      hideEstimate: false\n    };\n  },\n\n  computed: {\n    classObject() {\n      if (this.isUseless) {\n        // A lot of people did not understand the old way of handling TP mult (3) so we now permanently disable it\n        // and adjust the rift formula to come up for the lack of purchasable upgrade. Therefore we mark both upgrades\n        // similar to the rest of the game - as strictly disabled.\n        return {\n          \"o-dilation-upgrade o-pelle-disabled-pointer\": true,\n          \"o-pelle-disabled o-dilation-upgrade--useless\": this.upgrade.id === 7 || this.upgrade.id === 3\n        };\n      }\n\n      return {\n        \"o-dilation-upgrade\": true,\n        \"o-dilation-upgrade--rebuyable\": this.isRebuyable,\n        \"o-dilation-upgrade--available\": !this.isBought && !this.isCapped && this.isAffordable,\n        \"o-dilation-upgrade--unavailable\": !this.isBought && !this.isCapped && !this.isAffordable,\n        \"o-dilation-upgrade--bought\": this.isBought,\n        \"o-dilation-upgrade--capped\": this.isCapped\n      };\n    },\n\n    isUseless() {\n      const tpip = this.upgrade.id === 3 || this.upgrade.id === 7;\n      return Pelle.isDoomed && tpip;\n    }\n\n  },\n  watch: {\n    isAutobuyerOn(newValue) {\n      Autobuyer.dilationUpgrade(this.upgrade.id).isActive = newValue;\n    }\n\n  },\n  methods: {\n    update() {\n      const upgrade = this.upgrade;\n      this.currentDT.copyFrom(Currency.dilatedTime.value);\n      this.currentDTGain.copyFrom(getDilationGainPerSecond());\n      this.hideEstimate = this.isAffordable || this.isCapped || this.upgrade.isBought || this.isUseless;\n      this.timeEstimate = this.hideEstimate ? null : getDilationTimeEstimate(this.upgrade.cost);\n\n      if (this.isRebuyable) {\n        this.isAffordable = upgrade.isAffordable;\n        this.isCapped = upgrade.isCapped;\n        const autobuyer = Autobuyer.dilationUpgrade(upgrade.id);\n        this.boughtAmount = upgrade.boughtAmount;\n        if (!autobuyer) return;\n        this.isAutoUnlocked = autobuyer.isUnlocked;\n        this.isAutobuyerOn = autobuyer.isActive;\n        return;\n      }\n\n      this.isBought = upgrade.isBought;\n\n      if (!this.isBought) {\n        this.isAffordable = upgrade.isAffordable;\n      }\n    }\n\n  }\n};","map":{"version":3,"sources":["DilationUpgradeButton.vue"],"names":[],"mappings":"AACA,OAAA,WAAA,MAAA,0BAAA;AACA,OAAA,oBAAA,MAAA,mCAAA;AACA,OAAA,kBAAA,MAAA,iCAAA;AACA,OAAA,aAAA,MAAA,4BAAA;AACA,OAAA,mBAAA,MAAA,kCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,uBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,mBADA;AAEA,IAAA,kBAFA;AAGA,IAAA,aAHA;AAIA,IAAA,WAJA;AAKA,IAAA;AALA,GAFA;AASA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KALA;AAUA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,QAAA,EAAA;AAFA;AAVA,GATA;;AAwBA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,YAAA,EAAA,KAHA;AAIA,MAAA,cAAA,EAAA,KAJA;AAKA,MAAA,aAAA,EAAA,KALA;AAMA,MAAA,YAAA,EAAA,CANA;AAOA,MAAA,SAAA,EAAA,IAAA,OAAA,CAAA,CAAA,CAPA;AAQA,MAAA,aAAA,EAAA,IAAA,OAAA,CAAA,CAAA,CARA;AASA,MAAA,YAAA,EAAA,EATA;AAUA,MAAA,UAAA,EAAA,KAVA;AAWA,MAAA,YAAA,EAAA;AAXA,KAAA;AAaA,GAtCA;;AAuCA,EAAA,QAAA,EAAA;AACA,IAAA,WAAA,GAAA;AACA,UAAA,KAAA,SAAA,EAAA;AACA;AACA;AACA;AACA,eAAA;AACA,yDAAA,IADA;AAEA,0DAAA,KAAA,OAAA,CAAA,EAAA,KAAA,CAAA,IAAA,KAAA,OAAA,CAAA,EAAA,KAAA;AAFA,SAAA;AAIA;;AACA,aAAA;AACA,8BAAA,IADA;AAEA,yCAAA,KAAA,WAFA;AAGA,yCAAA,CAAA,KAAA,QAAA,IAAA,CAAA,KAAA,QAAA,IAAA,KAAA,YAHA;AAIA,2CAAA,CAAA,KAAA,QAAA,IAAA,CAAA,KAAA,QAAA,IAAA,CAAA,KAAA,YAJA;AAKA,sCAAA,KAAA,QALA;AAMA,sCAAA,KAAA;AANA,OAAA;AAQA,KAnBA;;AAoBA,IAAA,SAAA,GAAA;AACA,YAAA,IAAA,GAAA,KAAA,OAAA,CAAA,EAAA,KAAA,CAAA,IAAA,KAAA,OAAA,CAAA,EAAA,KAAA,CAAA;AACA,aAAA,KAAA,CAAA,QAAA,IAAA,IAAA;AACA;;AAvBA,GAvCA;AAgEA,EAAA,KAAA,EAAA;AACA,IAAA,aAAA,CAAA,QAAA,EAAA;AACA,MAAA,SAAA,CAAA,eAAA,CAAA,KAAA,OAAA,CAAA,EAAA,EAAA,QAAA,GAAA,QAAA;AACA;;AAHA,GAhEA;AAqEA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,GAAA;AACA,YAAA,OAAA,GAAA,KAAA,OAAA;AACA,WAAA,SAAA,CAAA,QAAA,CAAA,QAAA,CAAA,WAAA,CAAA,KAAA;AACA,WAAA,aAAA,CAAA,QAAA,CAAA,wBAAA,EAAA;AACA,WAAA,YAAA,GAAA,KAAA,YAAA,IAAA,KAAA,QAAA,IAAA,KAAA,OAAA,CAAA,QAAA,IAAA,KAAA,SAAA;AACA,WAAA,YAAA,GAAA,KAAA,YAAA,GAAA,IAAA,GAAA,uBAAA,CAAA,KAAA,OAAA,CAAA,IAAA,CAAA;;AACA,UAAA,KAAA,WAAA,EAAA;AACA,aAAA,YAAA,GAAA,OAAA,CAAA,YAAA;AACA,aAAA,QAAA,GAAA,OAAA,CAAA,QAAA;AACA,cAAA,SAAA,GAAA,SAAA,CAAA,eAAA,CAAA,OAAA,CAAA,EAAA,CAAA;AACA,aAAA,YAAA,GAAA,OAAA,CAAA,YAAA;AACA,YAAA,CAAA,SAAA,EAAA;AACA,aAAA,cAAA,GAAA,SAAA,CAAA,UAAA;AACA,aAAA,aAAA,GAAA,SAAA,CAAA,QAAA;AACA;AACA;;AACA,WAAA,QAAA,GAAA,OAAA,CAAA,QAAA;;AACA,UAAA,CAAA,KAAA,QAAA,EAAA;AACA,aAAA,YAAA,GAAA,OAAA,CAAA,YAAA;AACA;AACA;;AArBA;AArEA,CAAA","sourcesContent":["<script>\r\nimport CostDisplay from \"@/components/CostDisplay\";\r\nimport CustomizeableTooltip from \"@/components/CustomizeableTooltip\";\r\nimport DescriptionDisplay from \"@/components/DescriptionDisplay\";\r\nimport EffectDisplay from \"@/components/EffectDisplay\";\r\nimport PrimaryToggleButton from \"@/components/PrimaryToggleButton\";\r\n\r\nexport default {\r\n  name: \"DilationUpgradeButton\",\r\n  components: {\r\n    PrimaryToggleButton,\r\n    DescriptionDisplay,\r\n    EffectDisplay,\r\n    CostDisplay,\r\n    CustomizeableTooltip\r\n  },\r\n  props: {\r\n    upgrade: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    isRebuyable: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false\r\n    },\r\n    showTooltip: {\r\n      type: Boolean,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isBought: false,\r\n      isCapped: false,\r\n      isAffordable: false,\r\n      isAutoUnlocked: false,\r\n      isAutobuyerOn: false,\r\n      boughtAmount: 0,\r\n      currentDT: new Decimal(0),\r\n      currentDTGain: new Decimal(0),\r\n      timeEstimate: \"\",\r\n      isHovering: false,\r\n      hideEstimate: false,\r\n    };\r\n  },\r\n  computed: {\r\n    classObject() {\r\n      if (this.isUseless) {\r\n        // A lot of people did not understand the old way of handling TP mult (3) so we now permanently disable it\r\n        // and adjust the rift formula to come up for the lack of purchasable upgrade. Therefore we mark both upgrades\r\n        // similar to the rest of the game - as strictly disabled.\r\n        return {\r\n          \"o-dilation-upgrade o-pelle-disabled-pointer\": true,\r\n          \"o-pelle-disabled o-dilation-upgrade--useless\": this.upgrade.id === 7 || this.upgrade.id === 3,\r\n        };\r\n      }\r\n      return {\r\n        \"o-dilation-upgrade\": true,\r\n        \"o-dilation-upgrade--rebuyable\": this.isRebuyable,\r\n        \"o-dilation-upgrade--available\": !this.isBought && !this.isCapped && this.isAffordable,\r\n        \"o-dilation-upgrade--unavailable\": !this.isBought && !this.isCapped && !this.isAffordable,\r\n        \"o-dilation-upgrade--bought\": this.isBought,\r\n        \"o-dilation-upgrade--capped\": this.isCapped,\r\n      };\r\n    },\r\n    isUseless() {\r\n      const tpip = this.upgrade.id === 3 || this.upgrade.id === 7;\r\n      return Pelle.isDoomed && tpip;\r\n    }\r\n  },\r\n  watch: {\r\n    isAutobuyerOn(newValue) {\r\n      Autobuyer.dilationUpgrade(this.upgrade.id).isActive = newValue;\r\n    }\r\n  },\r\n  methods: {\r\n    update() {\r\n      const upgrade = this.upgrade;\r\n      this.currentDT.copyFrom(Currency.dilatedTime.value);\r\n      this.currentDTGain.copyFrom(getDilationGainPerSecond());\r\n      this.hideEstimate = this.isAffordable || this.isCapped || this.upgrade.isBought || this.isUseless;\r\n      this.timeEstimate = this.hideEstimate ? null : getDilationTimeEstimate(this.upgrade.cost);\r\n      if (this.isRebuyable) {\r\n        this.isAffordable = upgrade.isAffordable;\r\n        this.isCapped = upgrade.isCapped;\r\n        const autobuyer = Autobuyer.dilationUpgrade(upgrade.id);\r\n        this.boughtAmount = upgrade.boughtAmount;\r\n        if (!autobuyer) return;\r\n        this.isAutoUnlocked = autobuyer.isUnlocked;\r\n        this.isAutobuyerOn = autobuyer.isActive;\r\n        return;\r\n      }\r\n      this.isBought = upgrade.isBought;\r\n      if (!this.isBought) {\r\n        this.isAffordable = upgrade.isAffordable;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"l-spoon-btn-group\">\r\n    <button\r\n      :ach-tooltip=\"timeEstimate\"\r\n      :class=\"classObject\"\r\n      @click=\"upgrade.purchase()\"\r\n      @mouseover=\"isHovering = true\"\r\n      @mouseleave=\"isHovering = false\"\r\n    >\r\n      <CustomizeableTooltip\r\n        v-if=\"timeEstimate\"\r\n        :show=\"showTooltip && !isHovering && !hideEstimate\"\r\n        left=\"50%\"\r\n        top=\"0\"\r\n      >\r\n        <template #tooltipContent>\r\n          {{ timeEstimate }}\r\n        </template>\r\n      </CustomizeableTooltip>\r\n      <span>\r\n        <DescriptionDisplay\r\n          :config=\"upgrade.config\"\r\n          :length=\"70\"\r\n          name=\"o-dilation-upgrade__description\"\r\n        />\r\n        <EffectDisplay\r\n          :key=\"boughtAmount\"\r\n          br\r\n          :config=\"upgrade.config\"\r\n        />\r\n      </span>\r\n      <CostDisplay\r\n        v-if=\"!isBought && !isCapped\"\r\n        br\r\n        :config=\"upgrade.config\"\r\n        name=\"Dilated Time\"\r\n      />\r\n    </button>\r\n    <PrimaryToggleButton\r\n      v-if=\"isRebuyable && isAutoUnlocked\"\r\n      v-model=\"isAutobuyerOn\"\r\n      label=\"Auto:\"\r\n      class=\"l--spoon-btn-group__little-spoon o-primary-btn--dilation-upgrade-toggle\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.o-dilation-upgrade {\r\n  width: 19rem;\r\n  height: 9rem;\r\n  font-family: Typewriter, serif;\r\n  font-size: 1rem;\r\n  font-weight: bold;\r\n  background: black;\r\n  border: 0.1rem solid;\r\n  border-radius: var(--var-border-radius, 0.4rem);\r\n  transition-duration: 0.2s;\r\n}\r\n\r\n.o-dilation-upgrade--available {\r\n  color: var(--color-dilation);\r\n  border-color: var(--color-dilation);\r\n  animation: a-dilation-btn-glow 10s infinite;\r\n  cursor: pointer;\r\n}\r\n\r\n.o-dilation-upgrade--rebuyable.o-dilation-upgrade--available {\r\n  color: #64ddad;\r\n  border-color: #64ddad;\r\n}\r\n\r\n.o-dilation-upgrade--available:hover {\r\n  background-color: white;\r\n}\r\n\r\n.o-dilation-upgrade--bought,\r\n.o-dilation-upgrade--capped {\r\n  color: black;\r\n  background-color: var(--color-dilation);\r\n  border-color: black;\r\n}\r\n\r\n.o-dilation-upgrade--useless {\r\n  color: black;\r\n  background-color: var(--color-pelle--base);\r\n  filter: grayscale(50%);\r\n}\r\n\r\n.o-dilation-upgrade--unavailable {\r\n  color: #181818;\r\n  background-color: #5f5f5f;\r\n  border-color: #3e8a0f;\r\n}\r\n\r\n.o-dilation-upgrade--rebuyable.o-dilation-upgrade--unavailable {\r\n  border-color: #64ddad;\r\n}\r\n\r\n.o-dilation-upgrade--unavailable:hover {\r\n  color: #1d1d1d;\r\n  background-color: #660000;\r\n}\r\n\r\n.o-dilation-upgrade__description--small-text {\r\n  font-size: 0.95rem;\r\n}\r\n\r\n.s-base--metro .o-dilation-upgrade--unavailable,\r\n.t-s1 .o-dilation-upgrade--unavailable {\r\n  color: black;\r\n  background-color: #9e9e9e;\r\n  border: none;\r\n  box-shadow: 0.1rem 0.1rem 0.1rem 0 black;\r\n}\r\n\r\n.s-base--metro .o-dilation-upgrade--unavailable:hover {\r\n  background-color: #ef5350;\r\n}\r\n\r\n.t-s1 .o-dilation-upgrade--unavailable:hover {\r\n  background-color: #d72621;\r\n}\r\n\r\n.t-dark .o-dilation-upgrade--available:hover,\r\n.t-s6 .o-dilation-upgrade--available:hover,\r\n.t-s10 .o-dilation-upgrade--available:hover {\r\n  color: var(--color-dilation);\r\n  background-color: white;\r\n}\r\n\r\n.t-dark .o-dilation-upgrade--rebuyable.o-dilation-upgrade--available:hover,\r\n.t-s6 .o-dilation-upgrade--rebuyable.o-dilation-upgrade--available:hover,\r\n.t-s10 .o-dilation-upgrade--rebuyable.o-dilation-upgrade--available:hover {\r\n  color: #64ddad;\r\n}\r\n\r\n.t-dark .o-dilation-upgrade--bought,\r\n.t-dark .o-dilation-upgrade--capped {\r\n  background-color: var(--color-dilation);\r\n}\r\n\r\n.t-s6 .o-dilation-upgrade--unavailable,\r\n.t-s10 .o-dilation-upgrade--unavailable {\r\n  color: gray;\r\n  background-color: black;\r\n}\r\n\r\n.t-dark .o-dilation-upgrade--unavailable {\r\n  color: black;\r\n  background-color: #23292a;\r\n}\r\n\r\n.t-dark .o-dilation-upgrade--unavailable:hover,\r\n.t-s6 .o-dilation-upgrade--unavailable:hover,\r\n.t-s10 .o-dilation-upgrade--unavailable:hover {\r\n  color: black;\r\n  background-color: var(--color-bad);\r\n  border-color: var(--color-bad);\r\n}\r\n\r\n.t-s4 .o-dilation-upgrade--available {\r\n  animation: a-dilation-btn-glow--cancer 10s infinite;\r\n}\r\n\r\n.t-s6 .o-dilation-upgrade--bought,\r\n.t-s6 .o-dilation-upgrade--capped,\r\n.t-s10 .o-dilation-upgrade--bought,\r\n.t-s10 .o-dilation-upgrade--capped {\r\n  background: var(--color-dilation);\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/tabs/time-dilation"},"metadata":{},"sourceType":"module"}