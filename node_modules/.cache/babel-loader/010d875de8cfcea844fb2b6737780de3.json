{"ast":null,"code":"import \"core-js/modules/web.dom-collections.iterator.js\";\nimport { TimeStudyConnectionSetup } from \"./TimeStudyConnection\";\nimport { TimeStudySetup } from \"./TimeStudyButton\";\n\nclass TimeStudyRow {\n  constructor(layout, items, isWide) {\n    this.layout = layout;\n    this.items = items;\n    this.isWide = isWide;\n  }\n\n  get width() {\n    const itemCount = this.items.length;\n    const layout = this.layout;\n    return itemCount * layout.itemWidth + (itemCount - 1) * layout.spacing;\n  }\n\n  itemPosition(column, treeLayout) {\n    const layout = this.layout;\n    const treeWidth = treeLayout.width;\n    const rowLeft = (treeWidth - this.width) / 2;\n    return rowLeft + column * layout.itemWidth + column * layout.spacing;\n  }\n\n}\n\nclass TimeStudyRowLayout {\n  constructor(props) {\n    this.itemWidth = props.itemWidth;\n    this.itemHeight = props.itemHeight;\n    this.spacing = props.spacing;\n  }\n\n}\n\nexport class TimeStudyTreeLayout {\n  constructor(type, scaling = 1) {\n    this.spacing = 4 * scaling;\n    const normalRowLayout = new TimeStudyRowLayout({\n      itemWidth: 18 * scaling,\n      itemHeight: 10 * scaling,\n      spacing: 3 * scaling\n    });\n    const wideRowLayout = new TimeStudyRowLayout({\n      itemWidth: 12 * scaling,\n      itemHeight: 10 * scaling,\n      spacing: 0.6 * scaling\n    });\n\n    const normalRow = (...items) => new TimeStudyRow(normalRowLayout, items);\n\n    const wideRow = (...items) => new TimeStudyRow(wideRowLayout, items, true);\n\n    const TS = id => TimeStudy(id).isUnlocked ? TimeStudy(id) : null;\n\n    const EC = id => TimeStudy.eternityChallenge(id);\n    /**\r\n     * @type {TimeStudyRow[]}\r\n     */\n\n    /* eslint-disable no-multi-spaces, space-in-parens, func-call-spacing */\n\n\n    this.rows = [normalRow(null, TS(11), null), normalRow(TS(21), TS(22)), normalRow(null, TS(31), TS(32), TS(33))];\n\n    if (type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_62 || type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_62_181 || type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_TRIAD_STUDIES) {\n      this.rows.push(normalRow(null, TS(41), TS(42), EC(5)), normalRow(TS(51)));\n    } else {\n      this.rows.push(normalRow(TS(41), TS(42)), normalRow(null, TS(51), EC(5)));\n    }\n\n    this.rows.push(normalRow(null, TS(61), TS(62)), normalRow(TS(71), TS(72), TS(73)), normalRow(TS(81), TS(82), TS(83)), normalRow(TS(91), TS(92), TS(93)), normalRow(TS(101), TS(102), TS(103)), normalRow(EC(7), TS(111), null), normalRow(TS(121), TS(122), TS(123)), normalRow(EC(6), TS(131), TS(132), TS(133), EC(8)), normalRow(TS(141), TS(142), TS(143)), normalRow(null, EC(9), TS(151), null, EC(4)), normalRow(TS(161), TS(162)));\n\n    if (type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_181 || type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_62_181 || type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_TRIAD_STUDIES) {\n      this.rows.push(normalRow(null, TS(171), EC(2)), normalRow(EC(1), TS(181), EC(3)));\n    } else {\n      this.rows.push(normalRow(TS(171)), normalRow(EC(1), EC(2), EC(3)), normalRow(TS(181)));\n    }\n\n    this.rows.push(normalRow(EC(10)), normalRow(TS(191), TS(192), TS(193)), normalRow(TS(201)), normalRow(TS(211), TS(212), TS(213), TS(214)), wideRow(TS(221), TS(222), TS(223), TS(224), TS(225), TS(226), TS(227), TS(228)));\n\n    if (type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_TRIAD_STUDIES && !Pelle.isDoomed) {\n      this.rows.push(normalRow(TS(301), TS(302), TS(303), TS(304)));\n    }\n\n    this.rows.push(normalRow(TS(231), TS(232), TS(233), TS(234)), normalRow(EC(11), EC(12)), normalRow(TimeStudy.dilation), normalRow(TimeStudy.timeDimension(5), TimeStudy.timeDimension(6)), normalRow(TimeStudy.timeDimension(7), TimeStudy.timeDimension(8)), normalRow(TimeStudy.reality));\n    /* eslint-enable no-multi-spaces, space-in-parens, func-call-spacing */\n\n    /**\r\n     * @type {TimeStudySetup[]}\r\n     */\n\n    this.studies = [];\n\n    for (let rowIndex = 0; rowIndex < this.rows.length; rowIndex++) {\n      const row = this.rows[rowIndex];\n\n      for (let columnIndex = 0; columnIndex < row.items.length; columnIndex++) {\n        const study = row.items[columnIndex];\n        if (study === null) continue;\n        const setup = new TimeStudySetup({\n          study,\n          row: rowIndex,\n          column: columnIndex\n        });\n\n        if (row.isWide) {\n          setup.isSmall = true;\n        }\n\n        this.studies.push(setup);\n      }\n    }\n\n    const secretStudy = {};\n    this.secretStudy = new TimeStudySetup({\n      study: secretStudy,\n      row: 0,\n      column: 0\n    });\n    const enslavedStudy = {};\n    this.enslavedStudy = new TimeStudySetup({\n      study: enslavedStudy,\n      row: 0,\n      column: 2\n    });\n    /**\r\n     * @type {TimeStudyConnectionSetup[]}\r\n     */\n\n    this.connections = TimeStudy.allConnections.map(c => new TimeStudyConnectionSetup(c));\n    this.secretStudyConnection = new TimeStudyConnectionSetup(new TimeStudyConnection(TS(11), secretStudy));\n    this.enslavedStudyConnection = new TimeStudyConnectionSetup(new TimeStudyConnection(TS(11), enslavedStudy));\n    this.width = this.rows.map(row => row.width).max();\n    const heightNoSpacing = this.rows.map(r => r.layout.itemHeight).sum();\n    this.height = heightNoSpacing + (this.rows.length - 1) * this.spacing;\n\n    for (const study of this.studies) {\n      study.setPosition(this);\n    }\n\n    this.secretStudy.setPosition(this);\n    this.enslavedStudy.setPosition(this);\n\n    for (const connection of this.connections) {\n      connection.setPosition(this.studies, this.width, this.height);\n    }\n\n    this.secretStudyConnection.setPosition(this.studies.concat(this.secretStudy), this.width, this.height);\n    this.enslavedStudyConnection.setPosition(this.studies.concat(this.enslavedStudy), this.width, this.height);\n  }\n\n  itemPosition(row) {\n    const rows = this.rows.slice(0, row);\n    const heightNoSpacing = rows.map(r => r.layout.itemHeight).sum();\n    return heightNoSpacing + rows.length * this.spacing;\n  }\n\n  static create(type, scaling = 1) {\n    if (this._instances === undefined) {\n      this._instances = [];\n    }\n\n    const layout = new TimeStudyTreeLayout(type, scaling);\n    this._instances[`${type}__${scaling}`] = layout;\n    return layout;\n  }\n\n}\nexport const STUDY_TREE_LAYOUT_TYPE = {\n  NORMAL: 0,\n  ALTERNATIVE_62: 1,\n  ALTERNATIVE_181: 2,\n  ALTERNATIVE_62_181: 3,\n  ALTERNATIVE_TRIAD_STUDIES: 4,\n\n  get current() {\n    const alt62 = Perk.bypassEC5Lock.isBought;\n    const alt181 = Perk.bypassEC1Lock.isBought && Perk.bypassEC2Lock.isBought && Perk.bypassEC3Lock.isBought;\n    if (Ra.canBuyTriad) return this.ALTERNATIVE_TRIAD_STUDIES;\n    if (alt62 && alt181) return this.ALTERNATIVE_62_181;\n    if (alt62) return this.ALTERNATIVE_62;\n    if (alt181) return this.ALTERNATIVE_181;\n    return this.NORMAL;\n  }\n\n};","map":{"version":3,"sources":["C:/Games/ADFasterer/ADfasterer/src/components/tabs/time-studies/time-study-tree-layout.js"],"names":["TimeStudyConnectionSetup","TimeStudySetup","TimeStudyRow","constructor","layout","items","isWide","width","itemCount","length","itemWidth","spacing","itemPosition","column","treeLayout","treeWidth","rowLeft","TimeStudyRowLayout","props","itemHeight","TimeStudyTreeLayout","type","scaling","normalRowLayout","wideRowLayout","normalRow","wideRow","TS","id","TimeStudy","isUnlocked","EC","eternityChallenge","rows","STUDY_TREE_LAYOUT_TYPE","ALTERNATIVE_62","ALTERNATIVE_62_181","ALTERNATIVE_TRIAD_STUDIES","push","ALTERNATIVE_181","Pelle","isDoomed","dilation","timeDimension","reality","studies","rowIndex","row","columnIndex","study","setup","isSmall","secretStudy","enslavedStudy","connections","allConnections","map","c","secretStudyConnection","TimeStudyConnection","enslavedStudyConnection","max","heightNoSpacing","r","sum","height","setPosition","connection","concat","slice","create","_instances","undefined","NORMAL","current","alt62","Perk","bypassEC5Lock","isBought","alt181","bypassEC1Lock","bypassEC2Lock","bypassEC3Lock","Ra","canBuyTriad"],"mappings":"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","sourcesContent":["import { TimeStudyConnectionSetup } from \"./TimeStudyConnection\";\r\nimport { TimeStudySetup } from \"./TimeStudyButton\";\r\n\r\nclass TimeStudyRow {\r\n  constructor(layout, items, isWide) {\r\n    this.layout = layout;\r\n    this.items = items;\r\n    this.isWide = isWide;\r\n  }\r\n\r\n  get width() {\r\n    const itemCount = this.items.length;\r\n    const layout = this.layout;\r\n    return itemCount * layout.itemWidth + (itemCount - 1) * layout.spacing;\r\n  }\r\n\r\n  itemPosition(column, treeLayout) {\r\n    const layout = this.layout;\r\n    const treeWidth = treeLayout.width;\r\n    const rowLeft = (treeWidth - this.width) / 2;\r\n    return rowLeft + column * layout.itemWidth + column * layout.spacing;\r\n  }\r\n}\r\n\r\nclass TimeStudyRowLayout {\r\n  constructor(props) {\r\n    this.itemWidth = props.itemWidth;\r\n    this.itemHeight = props.itemHeight;\r\n    this.spacing = props.spacing;\r\n  }\r\n}\r\n\r\nexport class TimeStudyTreeLayout {\r\n  constructor(type, scaling = 1) {\r\n    this.spacing = 4 * scaling;\r\n\r\n    const normalRowLayout = new TimeStudyRowLayout({\r\n      itemWidth: 18 * scaling,\r\n      itemHeight: 10 * scaling,\r\n      spacing: 3 * scaling\r\n    });\r\n\r\n    const wideRowLayout = new TimeStudyRowLayout({\r\n      itemWidth: 12 * scaling,\r\n      itemHeight: 10 * scaling,\r\n      spacing: 0.6 * scaling\r\n    });\r\n    const normalRow = (...items) => new TimeStudyRow(normalRowLayout, items);\r\n    const wideRow = (...items) => new TimeStudyRow(wideRowLayout, items, true);\r\n\r\n    const TS = id => (TimeStudy(id).isUnlocked ? TimeStudy(id) : null);\r\n    const EC = id => TimeStudy.eternityChallenge(id);\r\n\r\n    /**\r\n     * @type {TimeStudyRow[]}\r\n     */\r\n    /* eslint-disable no-multi-spaces, space-in-parens, func-call-spacing */\r\n    this.rows = [\r\n      normalRow(                       null,   TS(11),   null                         ),\r\n      normalRow(                           TS(21), TS(22)                             ),\r\n      normalRow(                   null, TS(31), TS(32), TS(33)                       )\r\n    ];\r\n\r\n    if (type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_62 || type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_62_181 ||\r\n      type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_TRIAD_STUDIES) {\r\n      this.rows.push(\r\n        normalRow(                     null, TS(41), TS(42), EC(5)                      ),\r\n        normalRow(                               TS(51)                                 )\r\n      );\r\n    } else {\r\n      this.rows.push(\r\n        normalRow(                           TS(41), TS(42)                             ),\r\n        normalRow(                       null,   TS(51),  EC(5)                         )\r\n      );\r\n    }\r\n\r\n    this.rows.push(\r\n      normalRow(                       null,   TS(61),  TS(62)                        ),\r\n      normalRow(                      TS(71),  TS(72),  TS(73)                        ),\r\n      normalRow(                      TS(81),  TS(82),  TS(83)                        ),\r\n      normalRow(                      TS(91),  TS(92),  TS(93)                        ),\r\n      normalRow(                      TS(101), TS(102), TS(103)                       ),\r\n      normalRow(                       EC(7),  TS(111),  null                         ),\r\n      normalRow(                      TS(121), TS(122), TS(123)                       ),\r\n      normalRow(               EC(6), TS(131), TS(132), TS(133), EC(8)                ),\r\n      normalRow(                      TS(141), TS(142), TS(143)                       ),\r\n      normalRow(               null,   EC(9), TS(151),   null,   EC(4)                ),\r\n      normalRow(                          TS(161), TS(162)                            )\r\n    );\r\n\r\n    if (type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_181 || type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_62_181 ||\r\n      type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_TRIAD_STUDIES) {\r\n      this.rows.push(\r\n        normalRow(                         null, TS(171),  EC(2)                        ),\r\n        normalRow(                        EC(1), TS(181),  EC(3)                        )\r\n      );\r\n    } else {\r\n      this.rows.push(\r\n        normalRow(                               TS(171)                                ),\r\n        normalRow(                         EC(1), EC(2), EC(3)                          ),\r\n        normalRow(                               TS(181)                                )\r\n      );\r\n    }\r\n\r\n    this.rows.push(\r\n      normalRow(                               EC(10)                                 ),\r\n      normalRow(             TS(191),          TS(192),          TS(193)              ),\r\n      normalRow(                               TS(201)                                ),\r\n      normalRow(    TS(211),          TS(212),          TS(213),          TS(214)     ),\r\n      wideRow  (TS(221), TS(222), TS(223), TS(224), TS(225), TS(226), TS(227), TS(228))\r\n    );\r\n\r\n    if (type === STUDY_TREE_LAYOUT_TYPE.ALTERNATIVE_TRIAD_STUDIES && !Pelle.isDoomed) {\r\n      this.rows.push(\r\n        normalRow(                 TS(301), TS(302), TS(303), TS(304)                 )\r\n      );\r\n    }\r\n\r\n    this.rows.push(\r\n      normalRow(    TS(231),          TS(232),          TS(233),          TS(234)     ),\r\n      normalRow(              EC(11),                             EC(12)              ),\r\n      normalRow(                          TimeStudy.dilation                          ),\r\n      normalRow(          TimeStudy.timeDimension(5), TimeStudy.timeDimension(6)      ),\r\n      normalRow(          TimeStudy.timeDimension(7), TimeStudy.timeDimension(8)      ),\r\n      normalRow(                          TimeStudy.reality                           )\r\n    );\r\n    /* eslint-enable no-multi-spaces, space-in-parens, func-call-spacing */\r\n\r\n    /**\r\n     * @type {TimeStudySetup[]}\r\n     */\r\n    this.studies = [];\r\n    for (let rowIndex = 0; rowIndex < this.rows.length; rowIndex++) {\r\n      const row = this.rows[rowIndex];\r\n      for (let columnIndex = 0; columnIndex < row.items.length; columnIndex++) {\r\n        const study = row.items[columnIndex];\r\n        if (study === null) continue;\r\n        const setup = new TimeStudySetup({\r\n          study,\r\n          row: rowIndex,\r\n          column: columnIndex\r\n        });\r\n        if (row.isWide) {\r\n          setup.isSmall = true;\r\n        }\r\n        this.studies.push(setup);\r\n      }\r\n    }\r\n    const secretStudy = {};\r\n    this.secretStudy = new TimeStudySetup({\r\n      study: secretStudy,\r\n      row: 0,\r\n      column: 0\r\n    });\r\n\r\n    const enslavedStudy = {};\r\n    this.enslavedStudy = new TimeStudySetup({\r\n      study: enslavedStudy,\r\n      row: 0,\r\n      column: 2\r\n    });\r\n\r\n    /**\r\n     * @type {TimeStudyConnectionSetup[]}\r\n     */\r\n    this.connections = TimeStudy.allConnections\r\n      .map(c => new TimeStudyConnectionSetup(c));\r\n    this.secretStudyConnection = new TimeStudyConnectionSetup(\r\n      new TimeStudyConnection(TS(11), secretStudy)\r\n    );\r\n    this.enslavedStudyConnection = new TimeStudyConnectionSetup(\r\n      new TimeStudyConnection(TS(11), enslavedStudy)\r\n    );\r\n\r\n    this.width = this.rows.map(row => row.width).max();\r\n    const heightNoSpacing = this.rows.map(r => r.layout.itemHeight).sum();\r\n    this.height = heightNoSpacing + (this.rows.length - 1) * this.spacing;\r\n\r\n    for (const study of this.studies) {\r\n      study.setPosition(this);\r\n    }\r\n    this.secretStudy.setPosition(this);\r\n    this.enslavedStudy.setPosition(this);\r\n\r\n    for (const connection of this.connections) {\r\n      connection.setPosition(this.studies, this.width, this.height);\r\n    }\r\n    this.secretStudyConnection.setPosition(this.studies.concat(this.secretStudy), this.width, this.height);\r\n    this.enslavedStudyConnection.setPosition(this.studies.concat(this.enslavedStudy), this.width, this.height);\r\n  }\r\n\r\n  itemPosition(row) {\r\n    const rows = this.rows.slice(0, row);\r\n    const heightNoSpacing = rows.map(r => r.layout.itemHeight).sum();\r\n    return heightNoSpacing + rows.length * this.spacing;\r\n  }\r\n\r\n  static create(type, scaling = 1) {\r\n    if (this._instances === undefined) {\r\n      this._instances = [];\r\n    }\r\n    const layout = new TimeStudyTreeLayout(type, scaling);\r\n    this._instances[`${type}__${scaling}`] = layout;\r\n    return layout;\r\n  }\r\n}\r\n\r\nexport const STUDY_TREE_LAYOUT_TYPE = {\r\n  NORMAL: 0,\r\n  ALTERNATIVE_62: 1,\r\n  ALTERNATIVE_181: 2,\r\n  ALTERNATIVE_62_181: 3,\r\n  ALTERNATIVE_TRIAD_STUDIES: 4,\r\n  get current() {\r\n    const alt62 = Perk.bypassEC5Lock.isBought;\r\n    const alt181 = Perk.bypassEC1Lock.isBought && Perk.bypassEC2Lock.isBought && Perk.bypassEC3Lock.isBought;\r\n    if (Ra.canBuyTriad) return this.ALTERNATIVE_TRIAD_STUDIES;\r\n    if (alt62 && alt181) return this.ALTERNATIVE_62_181;\r\n    if (alt62) return this.ALTERNATIVE_62;\r\n    if (alt181) return this.ALTERNATIVE_181;\r\n    return this.NORMAL;\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}