{"ast":null,"code":"import ModalWrapperChoice from \"@/components/modals/ModalWrapperChoice\";\nimport SaveInfoEntry from \"@/components/modals/cloud/SaveInfoEntry\";\nexport default {\n  name: \"CloudLoadConflictModal\",\n  components: {\n    ModalWrapperChoice,\n    SaveInfoEntry\n  },\n  computed: {\n    conflict() {\n      return this.$viewModel.modal.cloudConflict;\n    },\n\n    older() {\n      return this.conflict.saveComparison.older === 1;\n    },\n\n    farther() {\n      return this.conflict.saveComparison.farther === 1;\n    },\n\n    hasDifferentName() {\n      return this.conflict.cloud.saveName !== this.conflict.local.saveName;\n    },\n\n    suggestionText() {\n      const goodStyle = `style=\"color: var(--color-good)\"`;\n      const badStyle = `style=\"color: var(--color-bad)\"`;\n      const suggestions = [\"Loading this Cloud save \"];\n      const cloudProg = this.conflict.cloud.compositeProgress,\n            localProg = this.conflict.local.compositeProgress;\n      const warnOverwrite = this.farther && Math.abs(cloudProg - localProg) > 0.15;\n      suggestions.push(warnOverwrite ? `<b ${badStyle}>would cause your local save to lose significant progress</b>` : `<b ${goodStyle}>is probably safe</b>`);\n\n      if (this.hasDifferentName) {\n        suggestions.push(`<br>${warnOverwrite ? \"Additionally\" : \"However\"}, the Cloud save\n          <b ${badStyle}>may be a save from a different device</b>.`);\n      }\n\n      if (warnOverwrite || this.hasDifferentName) {\n        suggestions.push(`<br><b ${badStyle}>Are you sure you wish to overwrite your local save?</b>`);\n      }\n\n      return suggestions.join(\"\");\n    }\n\n  },\n  methods: {\n    confirm() {\n      var _this$conflict$onAcce, _this$conflict;\n\n      (_this$conflict$onAcce = (_this$conflict = this.conflict).onAccept) === null || _this$conflict$onAcce === void 0 ? void 0 : _this$conflict$onAcce.call(_this$conflict);\n      EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);\n    }\n\n  }\n};","map":{"version":3,"sources":["CloudLoadConflictModal.vue"],"names":[],"mappings":"AACA,OAAA,kBAAA,MAAA,wCAAA;AACA,OAAA,aAAA,MAAA,yCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,wBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,kBADA;AAEA,IAAA;AAFA,GAFA;AAMA,EAAA,QAAA,EAAA;AACA,IAAA,QAAA,GAAA;AACA,aAAA,KAAA,UAAA,CAAA,KAAA,CAAA,aAAA;AACA,KAHA;;AAIA,IAAA,KAAA,GAAA;AACA,aAAA,KAAA,QAAA,CAAA,cAAA,CAAA,KAAA,KAAA,CAAA;AACA,KANA;;AAOA,IAAA,OAAA,GAAA;AACA,aAAA,KAAA,QAAA,CAAA,cAAA,CAAA,OAAA,KAAA,CAAA;AACA,KATA;;AAUA,IAAA,gBAAA,GAAA;AACA,aAAA,KAAA,QAAA,CAAA,KAAA,CAAA,QAAA,KAAA,KAAA,QAAA,CAAA,KAAA,CAAA,QAAA;AACA,KAZA;;AAaA,IAAA,cAAA,GAAA;AACA,YAAA,SAAA,GAAA,kCAAA;AACA,YAAA,QAAA,GAAA,iCAAA;AAEA,YAAA,WAAA,GAAA,CAAA,0BAAA,CAAA;AACA,YAAA,SAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;AAAA,YAAA,SAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,iBAAA;AACA,YAAA,aAAA,GAAA,KAAA,OAAA,IAAA,IAAA,CAAA,GAAA,CAAA,SAAA,GAAA,SAAA,IAAA,IAAA;AACA,MAAA,WAAA,CAAA,IAAA,CAAA,aAAA,GACA,MAAA,QAAA,+DADA,GAEA,MAAA,SAAA,uBAFA;;AAGA,UAAA,KAAA,gBAAA,EAAA;AACA,QAAA,WAAA,CAAA,IAAA,CAAA,OAAA,aAAA,GAAA,cAAA,GAAA,SAAA;AACA,eAAA,QAAA,6CADA;AAEA;;AACA,UAAA,aAAA,IAAA,KAAA,gBAAA,EAAA;AACA,QAAA,WAAA,CAAA,IAAA,CAAA,UAAA,QAAA,0DAAA;AACA;;AACA,aAAA,WAAA,CAAA,IAAA,CAAA,EAAA,CAAA;AACA;;AA/BA,GANA;AAuCA,EAAA,OAAA,EAAA;AACA,IAAA,OAAA,GAAA;AAAA;;AACA,sDAAA,QAAA,EAAA,QAAA;AACA,MAAA,QAAA,CAAA,QAAA,CAAA,UAAA,CAAA,WAAA;AACA;;AAJA;AAvCA,CAAA","sourcesContent":["<script>\r\nimport ModalWrapperChoice from \"@/components/modals/ModalWrapperChoice\";\r\nimport SaveInfoEntry from \"@/components/modals/cloud/SaveInfoEntry\";\r\n\r\nexport default {\r\n  name: \"CloudLoadConflictModal\",\r\n  components: {\r\n    ModalWrapperChoice,\r\n    SaveInfoEntry,\r\n  },\r\n  computed: {\r\n    conflict() {\r\n      return this.$viewModel.modal.cloudConflict;\r\n    },\r\n    older() {\r\n      return this.conflict.saveComparison.older === 1;\r\n    },\r\n    farther() {\r\n      return this.conflict.saveComparison.farther === 1;\r\n    },\r\n    hasDifferentName() {\r\n      return this.conflict.cloud.saveName !== this.conflict.local.saveName;\r\n    },\r\n    suggestionText() {\r\n      const goodStyle = `style=\"color: var(--color-good)\"`;\r\n      const badStyle = `style=\"color: var(--color-bad)\"`;\r\n\r\n      const suggestions = [\"Loading this Cloud save \"];\r\n      const cloudProg = this.conflict.cloud.compositeProgress, localProg = this.conflict.local.compositeProgress;\r\n      const warnOverwrite = this.farther && Math.abs(cloudProg - localProg) > 0.15;\r\n      suggestions.push(warnOverwrite\r\n        ? `<b ${badStyle}>would cause your local save to lose significant progress</b>`\r\n        : `<b ${goodStyle}>is probably safe</b>`);\r\n      if (this.hasDifferentName) {\r\n        suggestions.push(`<br>${warnOverwrite ? \"Additionally\" : \"However\"}, the Cloud save\r\n          <b ${badStyle}>may be a save from a different device</b>.`);\r\n      }\r\n      if (warnOverwrite || this.hasDifferentName) {\r\n        suggestions.push(`<br><b ${badStyle}>Are you sure you wish to overwrite your local save?</b>`);\r\n      }\r\n      return suggestions.join(\"\");\r\n    }\r\n  },\r\n  methods: {\r\n    confirm() {\r\n      this.conflict.onAccept?.();\r\n      EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <ModalWrapperChoice\r\n    class=\"c-modal-options__large\"\r\n    :cancel-class=\"'c-modal-message__okay-btn'\"\r\n    :confirm-class=\"'c-modal-message__okay-btn c-modal__confirm-btn'\"\r\n    :confirm-fn=\"confirm\"\r\n  >\r\n    <template #header>\r\n      Load Game from Cloud\r\n    </template>\r\n    <span v-if=\"hasDifferentName\">\r\n      Your Local and Cloud Saves have <b>different names</b>.\r\n    </span>\r\n    <span v-else-if=\"older\">\r\n      Loading from the Cloud would <b>load a save with less playtime</b>.\r\n    </span>\r\n    <span v-else-if=\"farther\">\r\n      Loading from the Cloud would <b>cause you to lose progress</b>.\r\n    </span>\r\n    <span v-else>\r\n      Your Local Save and Cloud Save <b>appear to have similar amounts of progress</b>.\r\n    </span>\r\n    Please select the save you want to load.\r\n    <br>\r\n    <br>\r\n    <SaveInfoEntry\r\n      :save-data=\"conflict.local\"\r\n      :other-data=\"conflict.cloud\"\r\n      :save-id=\"conflict.saveId\"\r\n      :show-name=\"hasDifferentName\"\r\n      save-type=\"Local Save\"\r\n    />\r\n    <SaveInfoEntry\r\n      :save-data=\"conflict.cloud\"\r\n      :other-data=\"conflict.local\"\r\n      :save-id=\"conflict.saveId\"\r\n      :show-name=\"hasDifferentName\"\r\n      save-type=\"Cloud Save\"\r\n    />\r\n    <span v-html=\"suggestionText\" />\r\n    <template #cancel-text>\r\n      Keep Local Save\r\n    </template>\r\n    <template #confirm-text>\r\n      Overwrite Local with Cloud Save\r\n    </template>\r\n  </ModalWrapperChoice>\r\n</template>"],"sourceRoot":"src/components/modals/cloud"},"metadata":{},"sourceType":"module"}