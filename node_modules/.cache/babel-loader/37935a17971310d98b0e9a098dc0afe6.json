{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { sha512_256 } from \"js-sha512\";\nexport const Theme = function Theme(name, config) {\n  this.name = name;\n\n  this.isDark = function () {\n    return this.isDefault() || name === \"S12\" ? player.options.newUI : config.isDark;\n  };\n\n  this.isMetro = config.isMetro;\n  this.isAnimated = config.isAnimated;\n  this.isSecret = config.isSecret;\n\n  this.isDefault = function () {\n    return name === \"Normal\";\n  };\n\n  this.isAvailable = function () {\n    if (!this.isSecret) return true; // Note: match[0] gets the full string of a match, here the initial S and number in a theme name.\n\n    return player.secretUnlocks.themes.some(theme => theme.match(/^S[0-9]*/)[0] === name);\n  };\n\n  this.displayName = function () {\n    if (!this.isSecret || !this.isAvailable()) return name; // Secret themes are stored as \"S9Whatever\", so we need to strip the SN part\n\n    return player.secretUnlocks.themes.find(theme => theme.match(/^S[0-9]*/)[0] === name).replace(/^S[0-9]*/, \"\");\n  };\n\n  this.set = function () {\n    // Remove all entries in the class list from the class list\n    document.body.classList.remove(...document.body.classList);\n    document.body.classList.add(this.cssClass());\n    if (this.isMetro) document.body.classList.add(\"s-base--metro\");\n    if (this.isDark()) document.body.classList.add(\"s-base--dark\");\n\n    if (this.isAnimated && player.options.animations.background) {\n      document.getElementById(\"background-animations\").style.display = \"block\";\n    } else {\n      document.getElementById(\"background-animations\").style.display = \"none\";\n    }\n\n    if (player.options.newUI) {\n      player.options.themeModern = name;\n    } else {\n      player.options.themeClassic = name;\n    }\n\n    ui.view.theme = name;\n    window.getSelection().removeAllRanges();\n    PerkNetwork.forceNetworkRemake();\n  };\n\n  this.cssClass = function () {\n    return `t-${this.name.replace(/[\\t-\\r \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF]+/g, \"-\").toLowerCase()}`;\n  };\n};\n\nTheme.currentName = function () {\n  return player.options.newUI ? player.options.themeModern : player.options.themeClassic;\n};\n\nTheme.current = function () {\n  return Themes.find(Theme.currentName());\n};\n\nTheme.set = function (name) {\n  const theme = Themes.find(name);\n  theme.set();\n  return theme;\n};\n\nTheme.secretThemeIndex = function (name) {\n  const secretThemes = [\"ef853879b60fa6755d9599fd756c94d112f987c0cd596abf48b08f33af5ff537\", \"078570d37e6ffbf06e079e07c3c7987814e03436d00a17230ef5f24b1cb93290\", \"a3d64c3d1e1749b60b2b3dba10ed5ae9425300e9600ca05bcbafe4df6c69941f\", \"530fac71cc0b151b24d966493a6f4a0817921b37e4d3e593439e624c214ab2b2\", \"cb72e4a679254df5f99110dc7a93924628b916d2e069e3ad206db92068cb0883\", \"c8fac64da08d674123c32c936b14115ab384fe556fd24e431eb184a8dde21137\", \"da3b3c152083f0c70245f104f06331497b97b52ac80edec05e26a33ee704cae7\", \"1bbc0800145e72dfea5bfb218eba824c52510488b3a05ee88feaaa6683322d19\", \"dba8336cd3224649d07952b00045a6ec3c8df277aa8a0a0e3e7c2aaa77f1fbb9\", \"73de8a7f9efa1cbffc80a8effc9891a799127cd204b3a8b023bea8f513ed4753\", \"f3a71114261b4af6517a53f89bf0c6b56bb81b6f0e931d0e0d71249eb196628c\", \"1248689171faaa0abb68279199a8d2eb232dba10d2dacb79a705f680b6862c0e\"];\n  const sha = sha512_256(name.toUpperCase());\n  return secretThemes.indexOf(sha);\n};\n\nTheme.isSecretTheme = function (name) {\n  return Theme.secretThemeIndex(name) !== -1;\n};\n\nTheme.animatedThemeUnlocked = function () {\n  return Themes.all.some(theme => theme.isAvailable && theme.isAnimated);\n};\n\nTheme.tryUnlock = function (name) {\n  const index = Theme.secretThemeIndex(name);\n\n  if (index === -1) {\n    return false;\n  }\n\n  const prefix = `S${index + 1}`;\n  const fullName = prefix + name.capitalize();\n  const isAlreadyUnlocked = player.secretUnlocks.themes.has(fullName);\n  player.secretUnlocks.themes.add(fullName);\n  Theme.set(prefix);\n  SecretAchievement(25).unlock();\n\n  if (!isAlreadyUnlocked) {\n    GameUI.notify.success(`You have unlocked the ${name.capitalize()} theme!`, 5000);\n\n    if (Theme.current().isAnimated) {\n      setTimeout(Modal.message.show(`This secret theme has animations. If they are giving you performance issues,\n        you can turn them off in the Options/Visual tab to reduce lag.`), 100);\n    }\n  }\n\n  return true;\n};\n\nTheme.create = function (name, settings) {\n  const config = {\n    isDark: false || settings.dark,\n    isMetro: false || settings.metro,\n    isAnimated: false || settings.animated,\n    isSecret: false || settings.secret\n  };\n  return new Theme(name, config);\n};\n\nexport const Themes = {\n  all: [\n  /* eslint-disable no-multi-spaces */\n  // Note that \"Normal\" is a special case where dark is overridden elsewhere with whether or not the UI is Modern\n  Theme.create(\"Normal\", {}), Theme.create(\"Metro\", {\n    metro: true\n  }), Theme.create(\"Dark\", {\n    dark: true\n  }), Theme.create(\"Dark Metro\", {\n    dark: true,\n    metro: true\n  }), Theme.create(\"Inverted\", {}), Theme.create(\"Inverted Metro\", {\n    metro: true\n  }), Theme.create(\"AMOLED\", {\n    dark: true\n  }), Theme.create(\"AMOLED Metro\", {\n    dark: true,\n    metro: true\n  }), Theme.create(\"S1\", {\n    animated: true,\n    secret: true\n  }), Theme.create(\"S2\", {\n    secret: true\n  }), Theme.create(\"S3\", {\n    secret: true\n  }), Theme.create(\"S4\", {\n    secret: true\n  }), Theme.create(\"S5\", {\n    secret: true\n  }), Theme.create(\"S6\", {\n    dark: true,\n    animated: true,\n    secret: true\n  }), Theme.create(\"S7\", {\n    metro: true,\n    secret: true\n  }), Theme.create(\"S8\", {\n    metro: true,\n    secret: true\n  }), Theme.create(\"S9\", {\n    secret: true\n  }), Theme.create(\"S10\", {\n    dark: true,\n    metro: true,\n    animated: true,\n    secret: true\n  }), Theme.create(\"S11\", {\n    dark: true,\n    animated: true,\n    secret: true\n  }), Theme.create(\"S12\", {\n    secret: true\n  })\n  /* eslint-enable no-multi-spaces */\n  ],\n\n  available() {\n    return Themes.all.filter(theme => theme.isAvailable());\n  },\n\n  find(name) {\n    return Themes.all.find(theme => theme.name === name);\n  }\n\n};","map":{"version":3,"sources":["C:/Games/ADFasterer/ADfasterer/src/core/themes.js"],"names":["sha512_256","Theme","name","config","isDark","isDefault","player","options","newUI","isMetro","isAnimated","isSecret","isAvailable","secretUnlocks","themes","some","theme","match","displayName","find","replace","set","document","body","classList","remove","add","cssClass","animations","background","getElementById","style","display","themeModern","themeClassic","ui","view","window","getSelection","removeAllRanges","PerkNetwork","forceNetworkRemake","toLowerCase","currentName","current","Themes","secretThemeIndex","secretThemes","sha","toUpperCase","indexOf","isSecretTheme","animatedThemeUnlocked","all","tryUnlock","index","prefix","fullName","capitalize","isAlreadyUnlocked","has","SecretAchievement","unlock","GameUI","notify","success","setTimeout","Modal","message","show","create","settings","dark","metro","animated","secret","available","filter"],"mappings":"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","sourcesContent":["import { sha512_256 } from \"js-sha512\";\r\n\r\nexport const Theme = function Theme(name, config) {\r\n  this.name = name;\r\n\r\n  this.isDark = function() {\r\n    return (this.isDefault() || name === \"S12\")\r\n      ? player.options.newUI\r\n      : config.isDark;\r\n  };\r\n\r\n  this.isMetro = config.isMetro;\r\n\r\n  this.isAnimated = config.isAnimated;\r\n\r\n  this.isSecret = config.isSecret;\r\n\r\n  this.isDefault = function() {\r\n    return name === \"Normal\";\r\n  };\r\n\r\n  this.isAvailable = function() {\r\n    if (!this.isSecret) return true;\r\n    // Note: match[0] gets the full string of a match, here the initial S and number in a theme name.\r\n    return player.secretUnlocks.themes.some(theme => theme.match(/^S[0-9]*/u)[0] === name);\r\n  };\r\n\r\n  this.displayName = function() {\r\n    if (!this.isSecret || !this.isAvailable()) return name;\r\n    // Secret themes are stored as \"S9Whatever\", so we need to strip the SN part\r\n    return player.secretUnlocks.themes.find(theme => theme.match(/^S[0-9]*/u)[0] === name).replace(/^S[0-9]*/u, \"\");\r\n  };\r\n\r\n  this.set = function() {\r\n    // Remove all entries in the class list from the class list\r\n    document.body.classList.remove(...document.body.classList);\r\n\r\n    document.body.classList.add(this.cssClass());\r\n    if (this.isMetro) document.body.classList.add(\"s-base--metro\");\r\n    if (this.isDark()) document.body.classList.add(\"s-base--dark\");\r\n\r\n    if (this.isAnimated && player.options.animations.background) {\r\n      document.getElementById(\"background-animations\").style.display = \"block\";\r\n    } else {\r\n      document.getElementById(\"background-animations\").style.display = \"none\";\r\n    }\r\n    if (player.options.newUI) {\r\n      player.options.themeModern = name;\r\n    } else {\r\n      player.options.themeClassic = name;\r\n    }\r\n    ui.view.theme = name;\r\n    window.getSelection().removeAllRanges();\r\n    PerkNetwork.forceNetworkRemake();\r\n  };\r\n\r\n  this.cssClass = function() {\r\n    return `t-${this.name.replace(/\\s+/gu, \"-\").toLowerCase()}`;\r\n  };\r\n};\r\n\r\nTheme.currentName = function() {\r\n  return player.options.newUI\r\n    ? player.options.themeModern\r\n    : player.options.themeClassic;\r\n};\r\n\r\nTheme.current = function() {\r\n  return Themes.find(Theme.currentName());\r\n};\r\n\r\nTheme.set = function(name) {\r\n  const theme = Themes.find(name);\r\n  theme.set();\r\n  return theme;\r\n};\r\n\r\nTheme.secretThemeIndex = function(name) {\r\n  const secretThemes = [\r\n    \"ef853879b60fa6755d9599fd756c94d112f987c0cd596abf48b08f33af5ff537\",\r\n    \"078570d37e6ffbf06e079e07c3c7987814e03436d00a17230ef5f24b1cb93290\",\r\n    \"a3d64c3d1e1749b60b2b3dba10ed5ae9425300e9600ca05bcbafe4df6c69941f\",\r\n    \"530fac71cc0b151b24d966493a6f4a0817921b37e4d3e593439e624c214ab2b2\",\r\n    \"cb72e4a679254df5f99110dc7a93924628b916d2e069e3ad206db92068cb0883\",\r\n    \"c8fac64da08d674123c32c936b14115ab384fe556fd24e431eb184a8dde21137\",\r\n    \"da3b3c152083f0c70245f104f06331497b97b52ac80edec05e26a33ee704cae7\",\r\n    \"1bbc0800145e72dfea5bfb218eba824c52510488b3a05ee88feaaa6683322d19\",\r\n    \"dba8336cd3224649d07952b00045a6ec3c8df277aa8a0a0e3e7c2aaa77f1fbb9\",\r\n    \"73de8a7f9efa1cbffc80a8effc9891a799127cd204b3a8b023bea8f513ed4753\",\r\n    \"f3a71114261b4af6517a53f89bf0c6b56bb81b6f0e931d0e0d71249eb196628c\",\r\n    \"1248689171faaa0abb68279199a8d2eb232dba10d2dacb79a705f680b6862c0e\",\r\n  ];\r\n  const sha = sha512_256(name.toUpperCase());\r\n  return secretThemes.indexOf(sha);\r\n};\r\n\r\nTheme.isSecretTheme = function(name) {\r\n  return Theme.secretThemeIndex(name) !== -1;\r\n};\r\n\r\nTheme.animatedThemeUnlocked = function() {\r\n  return Themes.all.some(theme => theme.isAvailable && theme.isAnimated);\r\n};\r\n\r\nTheme.tryUnlock = function(name) {\r\n  const index = Theme.secretThemeIndex(name);\r\n  if (index === -1) {\r\n    return false;\r\n  }\r\n  const prefix = `S${index + 1}`;\r\n  const fullName = prefix + name.capitalize();\r\n  const isAlreadyUnlocked = player.secretUnlocks.themes.has(fullName);\r\n  player.secretUnlocks.themes.add(fullName);\r\n  Theme.set(prefix);\r\n  SecretAchievement(25).unlock();\r\n  if (!isAlreadyUnlocked) {\r\n    GameUI.notify.success(`You have unlocked the ${name.capitalize()} theme!`, 5000);\r\n    if (Theme.current().isAnimated) {\r\n      setTimeout(Modal.message.show(`This secret theme has animations. If they are giving you performance issues,\r\n        you can turn them off in the Options/Visual tab to reduce lag.`), 100);\r\n    }\r\n  }\r\n  return true;\r\n};\r\n\r\nTheme.create = function(name, settings) {\r\n  const config = {\r\n    isDark: false || settings.dark,\r\n    isMetro: false || settings.metro,\r\n    isAnimated: false || settings.animated,\r\n    isSecret: false || settings.secret,\r\n  };\r\n  return new Theme(name, config);\r\n};\r\n\r\nexport const Themes = {\r\n  all: [\r\n    /* eslint-disable no-multi-spaces */\r\n    // Note that \"Normal\" is a special case where dark is overridden elsewhere with whether or not the UI is Modern\r\n    Theme.create(\"Normal\",          {                                                         }),\r\n    Theme.create(\"Metro\",           {              metro: true,                               }),\r\n    Theme.create(\"Dark\",            { dark: true,                                             }),\r\n    Theme.create(\"Dark Metro\",      { dark: true,  metro: true,                               }),\r\n    Theme.create(\"Inverted\",        {                                                         }),\r\n    Theme.create(\"Inverted Metro\",  {              metro: true,                               }),\r\n    Theme.create(\"AMOLED\",          { dark: true,                                             }),\r\n    Theme.create(\"AMOLED Metro\",    { dark: true,  metro: true,                               }),\r\n    Theme.create(\"S1\",              {                           animated: true, secret: true, }),\r\n    Theme.create(\"S2\",              {                                           secret: true, }),\r\n    Theme.create(\"S3\",              {                                           secret: true, }),\r\n    Theme.create(\"S4\",              {                                           secret: true, }),\r\n    Theme.create(\"S5\",              {                                           secret: true, }),\r\n    Theme.create(\"S6\",              { dark: true,               animated: true, secret: true, }),\r\n    Theme.create(\"S7\",              {              metro: true,                 secret: true, }),\r\n    Theme.create(\"S8\",              {              metro: true,                 secret: true, }),\r\n    Theme.create(\"S9\",              {                                           secret: true, }),\r\n    Theme.create(\"S10\",             { dark: true,  metro: true, animated: true, secret: true, }),\r\n    Theme.create(\"S11\",             { dark: true,               animated: true, secret: true, }),\r\n    Theme.create(\"S12\",             {                                           secret: true, }),\r\n    /* eslint-enable no-multi-spaces */\r\n  ],\r\n\r\n  available() {\r\n    return Themes.all\r\n      .filter(theme => theme.isAvailable());\r\n  },\r\n\r\n  find(name) {\r\n    return Themes.all\r\n      .find(theme => theme.name === name);\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}