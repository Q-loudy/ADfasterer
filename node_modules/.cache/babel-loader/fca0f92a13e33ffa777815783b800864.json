{"ast":null,"code":"import ModalWrapperChoice from \"@/components/modals/ModalWrapperChoice\";\nexport default {\n  name: \"SwitchAutomatorEditorModal\",\n  components: {\n    ModalWrapperChoice\n  },\n  props: {\n    callback: {\n      type: Function,\n      required: false,\n      default: () => ({})\n    },\n    lostBlocks: {\n      type: Number,\n      required: false,\n      default: 0\n    }\n  },\n\n  data() {\n    return {\n      errorCount: 0,\n      isCurrentlyBlocks: false\n    };\n  },\n\n  computed: {\n    currentScriptID: {\n      get() {\n        return this.$viewModel.tabs.reality.automator.editorScriptID;\n      },\n\n      set(value) {\n        this.$viewModel.tabs.reality.automator.editorScriptID = value;\n      }\n\n    },\n\n    otherMode() {\n      return this.isCurrentlyBlocks ? \"Text\" : \"Block\";\n    }\n\n  },\n  methods: {\n    update() {\n      this.errorCount = AutomatorData.currentErrors().length;\n      this.isCurrentlyBlocks = player.reality.automator.type === AUTOMATOR_TYPE.BLOCK;\n    },\n\n    toggleAutomatorMode() {\n      var _this$callback;\n\n      AutomatorBackend.changeModes(this.currentScriptID);\n      (_this$callback = this.callback) === null || _this$callback === void 0 ? void 0 : _this$callback.call(this);\n    }\n\n  }\n};","map":{"version":3,"sources":["SwitchAutomatorEditorModal.vue"],"names":[],"mappings":"AACA,OAAA,kBAAA,MAAA,wCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,4BADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA;AADA,GAFA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,QADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA,OAAA,EAAA;AAHA,KADA;AAMA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA;AANA,GALA;;AAiBA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,CADA;AAEA,MAAA,iBAAA,EAAA;AAFA,KAAA;AAIA,GAtBA;;AAuBA,EAAA,QAAA,EAAA;AACA,IAAA,eAAA,EAAA;AACA,MAAA,GAAA,GAAA;AACA,eAAA,KAAA,UAAA,CAAA,IAAA,CAAA,OAAA,CAAA,SAAA,CAAA,cAAA;AACA,OAHA;;AAIA,MAAA,GAAA,CAAA,KAAA,EAAA;AACA,aAAA,UAAA,CAAA,IAAA,CAAA,OAAA,CAAA,SAAA,CAAA,cAAA,GAAA,KAAA;AACA;;AANA,KADA;;AASA,IAAA,SAAA,GAAA;AACA,aAAA,KAAA,iBAAA,GAAA,MAAA,GAAA,OAAA;AACA;;AAXA,GAvBA;AAoCA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,GAAA;AACA,WAAA,UAAA,GAAA,aAAA,CAAA,aAAA,GAAA,MAAA;AACA,WAAA,iBAAA,GAAA,MAAA,CAAA,OAAA,CAAA,SAAA,CAAA,IAAA,KAAA,cAAA,CAAA,KAAA;AACA,KAJA;;AAKA,IAAA,mBAAA,GAAA;AAAA;;AACA,MAAA,gBAAA,CAAA,WAAA,CAAA,KAAA,eAAA;AACA,6BAAA,QAAA;AACA;;AARA;AApCA,CAAA","sourcesContent":["<script>\r\nimport ModalWrapperChoice from \"@/components/modals/ModalWrapperChoice\";\r\n\r\nexport default {\r\n  name: \"SwitchAutomatorEditorModal\",\r\n  components: {\r\n    ModalWrapperChoice\r\n  },\r\n  props: {\r\n    callback: {\r\n      type: Function,\r\n      required: false,\r\n      default: () => ({})\r\n    },\r\n    lostBlocks: {\r\n      type: Number,\r\n      required: false,\r\n      default: 0,\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      errorCount: 0,\r\n      isCurrentlyBlocks: false\r\n    };\r\n  },\r\n  computed: {\r\n    currentScriptID: {\r\n      get() {\r\n        return this.$viewModel.tabs.reality.automator.editorScriptID;\r\n      },\r\n      set(value) {\r\n        this.$viewModel.tabs.reality.automator.editorScriptID = value;\r\n      }\r\n    },\r\n    otherMode() {\r\n      return this.isCurrentlyBlocks ? \"Text\" : \"Block\";\r\n    }\r\n  },\r\n  methods: {\r\n    update() {\r\n      this.errorCount = AutomatorData.currentErrors().length;\r\n      this.isCurrentlyBlocks = player.reality.automator.type === AUTOMATOR_TYPE.BLOCK;\r\n    },\r\n    toggleAutomatorMode() {\r\n      AutomatorBackend.changeModes(this.currentScriptID);\r\n      this.callback?.();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <ModalWrapperChoice\r\n    option=\"switchAutomatorMode\"\r\n    @confirm=\"toggleAutomatorMode\"\r\n  >\r\n    <template #header>\r\n      Change Automator to {{ otherMode }} editor\r\n    </template>\r\n    <div class=\"c-modal-message__text\">\r\n      This will stop your current script if it is running!\r\n      <div v-if=\"errorCount\">\r\n        <br>\r\n        Your script has some errors which may not get converted properly to {{ otherMode }} mode. Continuing on will\r\n        make the Automator attempt to parse these lines anyway, although some information may get lost or not be\r\n        converted properly.\r\n      </div>\r\n      <!-- Note: this can only ever appear on text-to-block -->\r\n      <b v-if=\"lostBlocks\">\r\n        <br>\r\n        Warning: Your script also currently has some lines which cannot interpreted as particular commands. These\r\n        lines will end up being deleted since there is no block they can be converted into.\r\n        If an error occurs at the start of a loop or IF, this may end up deleting large portions of your script!\r\n        <span class=\"l-lost-text\">\r\n          Changing editor modes right now will cause {{ quantifyInt(\"line\", lostBlocks) }} of code to be irreversibly\r\n          lost!\r\n        </span>\r\n      </b>\r\n      <br>\r\n      <span class=\"l-lost-text\">\r\n        Hiding this confirmation is not recommended, as it may cause parts of scripts to be immediately and irreversibly\r\n        lost if your script has errors when attempting to switch modes.\r\n      </span>\r\n      <br>\r\n      <br>\r\n      Are you sure you want to change to the {{ otherMode }} editor?\r\n    </div>\r\n    <template #confirm-text>\r\n      Change Modes\r\n    </template>\r\n  </ModalWrapperChoice>\r\n</template>\r\n\r\n<style scoped>\r\n.l-lost-text {\r\n  color: var(--color-bad);\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/modals"},"metadata":{},"sourceType":"module"}